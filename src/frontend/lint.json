[{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\api\\ai-insight\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'threshold' is assigned a value but never used.","line":9,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenAI } from \"@google/genai\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { portfolio, userSettings } = await req.json();\r\n\r\n        // Extract user threshold (default 1.1 if missing)\r\n        const threshold = userSettings?.alert_threshold || 1.1;\r\n\r\n        const apiKey = process.env.GEMINI_API_KEY;\r\n        if (!apiKey) {\r\n            return NextResponse.json(\r\n                { error: \"GEMINI_API_KEY is not configured\" },\r\n                { status: 500 }\r\n            );\r\n        }\r\n\r\n        const ai = new GoogleGenAI({ apiKey });\r\n\r\n        const prompt = `\r\n      You are an autonomous Risk Agent for a DeFi user on Arbitrum.\r\n      The user follows a \"Good Vibes Only\" philosophy: they want low stress, high safety, and optimized yields.\r\n\r\n      **User Context:**\r\n      - Total Net Worth: $${portfolio.totalNetWorth?.toFixed(2)}\r\n      - Total Supplied: $${portfolio.totalSupplied?.toFixed(2)}\r\n      - Total Borrowed: $${portfolio.totalBorrowed?.toFixed(2)}\r\n      - Global Net APY: ${portfolio.globalNetAPY?.toFixed(2)}%\r\n      - **Target Safe Health Factor:** 1.5\r\n      \r\n      **Protocol Health:**\r\n      - Venus: HF ${portfolio.venus?.health?.toFixed(2)} (Supply: $${portfolio.venus?.supply?.toFixed(2)}, Borrow: $${portfolio.venus?.borrow?.toFixed(2)})\r\n      - Kinza: HF ${portfolio.kinza?.health?.toFixed(2)} (Supply: $${portfolio.kinza?.supply?.toFixed(2)}, Borrow: $${portfolio.kinza?.borrow?.toFixed(2)})\r\n      - Radiant: HF ${portfolio.radiant?.health?.toFixed(2)} (Supply: $${portfolio.radiant?.supply?.toFixed(2)}, Borrow: $${portfolio.radiant?.borrow?.toFixed(2)})\r\n\r\n      **Detailed Positions:**\r\n      ${JSON.stringify(portfolio.positions, null, 2)}\r\n\r\n      **Task:**\r\n      Analyze this portfolio and generate 3 short, actionable, \"Good Vibes\" tips.\r\n      \r\n      **Guidelines:**\r\n      1. **Address Risk First:** If any protocol HF is below 1.4, use the following math to give EXACT dollar and percentage figures in your tip:\r\n         - **To reach Target HF 1.5 by Repaying:** Repay Amount = CurrentBorrow - ((Supply * LTV) / 1.5).\r\n         - **To reach Target HF 1.5 by Depositing:** Deposit Amount = (Borrow * 1.5 / LTV) - Supply.\r\n         - *Note: Average LTV is roughly 0.75-0.80. Use the 'ltv' field from the positions if available, or assume 0.8.*\r\n         - **Vibe:** \"Repay ~$X to hit 1.5 HF\" or \"Deposit ~$Y more to sleep better.\"\r\n      \r\n      2. **Specific Tips:** If health is safe (>1.5), suggest ways to flip yield if negative, or boost it if positive.\r\n      3. **Natural Formatting:** Do not use bullet points or dry tables. Keep it conversational but data-rich. Use the \"$\" and \"%\" symbols and mention the specific assets (e.g., USDT, ETH).\r\n      4. **Consistency:** Ensure the numbers you mention match the reality of the portfolio data provided.\r\n      5. **Format:** JSON array of strings only. Example: [\"Tip 1\", \"Tip 2\", \"Tip 3\"].\r\n      Just the raw JSON array.\r\n    `;\r\n\r\n        const result = await ai.models.generateContent({\r\n            model: \"gemini-3-flash-preview\",\r\n            contents: prompt,\r\n        });\r\n\r\n        const text = result.text || \"[]\";\r\n\r\n        // Clean up potential markdown formatting if the model disregards instructions\r\n        const cleanText = text.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\r\n\r\n        return NextResponse.json({ tips: JSON.parse(cleanText) });\r\n    } catch (error) {\r\n        console.error(\"AI Insight Error:\", error);\r\n        return NextResponse.json(\r\n            { error: \"Failed to generate insights\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\lend\\borrow\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":17,"column":98,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[859,865],"text":"&quot;Earn\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[859,865],"text":"&ldquo;Earn\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[859,865],"text":"&#34;Earn\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[859,865],"text":"&rdquo;Earn\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":17,"column":103,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[859,865],"text":"\"Earn&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[859,865],"text":"\"Earn&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[859,865],"text":"\"Earn&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[859,865],"text":"\"Earn&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Suspense } from 'react';\nimport { BorrowTable } from \"@/components/BorrowTable\";\nimport { Loader2, Info } from 'lucide-react';\n\nexport default function BorrowPage() {\n    return (\n        <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            {/* Section Title */}\n            <div className=\"flex items-center gap-2 mb-6\">\n                <h2 className=\"text-2xl font-bold text-white\">Available Markets</h2>\n            </div>\n            <div className=\"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4 mb-8 flex items-start gap-3\">\n                <Info className=\"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5\" />\n                <p className=\"text-blue-100/80 text-sm leading-relaxed font-medium\">\n                    You must deposit collateral in the <span className=\"text-blue-400 font-bold\">\"Earn\"</span> section required by the protocol before you can borrow.\n                </p>\n            </div>\n\n            {/* Table */}\n            <Suspense fallback={<div className=\"h-64 flex items-center justify-center\"><Loader2 className=\"animate-spin\" /></div>}>\n                <BorrowTable />\n            </Suspense>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\lend\\earn\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\lend\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\lend\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\lend\\strategy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\market\\[symbol]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XAxis' is defined but never used.","line":9,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XAxis"},"fix":{"range":[379,386],"text":""},"desc":"Remove unused variable \"XAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":9,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"YAxis"},"fix":{"range":[386,393],"text":""},"desc":"Remove unused variable \"YAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'format' is defined but never used.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"format"},"fix":{"range":[473,508],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\market\\[symbol]\\page.tsx:26:49\n  24 |     useEffect(() => {\n  25 |         const tab = searchParams.get('tab');\n> 26 |         if (tab === 'lend' || tab === 'borrow') setActiveTab(tab);\n     |                                                 ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |     }, [searchParams]);\n  28 |\n  29 |     // Mock Chart Data","line":26,"column":49,"nodeType":null,"endLine":26,"endColumn":61},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'assetPools' logical expression could make the dependencies of useEffect Hook (at line 47) change on every render. To fix this, wrap the initialization of 'assetPools' in its own useMemo() Hook.","line":39,"column":11,"nodeType":"VariableDeclarator","endLine":39,"endColumn":84},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\market\\[symbol]\\page.tsx:45:13\n  43 |         if (assetPools.length > 0 && !selectedProtocol) {\n  44 |             const best = assetPools.reduce((prev, current) => (prev.apy > current.apy) ? prev : current);\n> 45 |             setSelectedProtocol(best.project);\n     |             ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  46 |         }\n  47 |     }, [assetPools, selectedProtocol]);\n  48 |","line":45,"column":13,"nodeType":null,"endLine":45,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useParams, useSearchParams } from 'next/navigation';\nimport { useYields } from \"@/hooks/useYields\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\nimport Link from 'next/link';\nimport { format } from 'date-fns';\n\nexport default function MarketDetailPage() {\n    const params = useParams();\n    const searchParams = useSearchParams();\n    const symbol = (params.symbol as string).toUpperCase();\n    const { data: yields } = useYields();\n\n    // Tab State: 'lend' or 'borrow' (default from URL or 'lend')\n    const [activeTab, setActiveTab] = useState<'lend' | 'borrow'>('lend');\n    const [selectedProtocol, setSelectedProtocol] = useState<string>('');\n    const [amount, setAmount] = useState('');\n\n    useEffect(() => {\n        const tab = searchParams.get('tab');\n        if (tab === 'lend' || tab === 'borrow') setActiveTab(tab);\n    }, [searchParams]);\n\n    // Mock Chart Data\n    const chartData = [\n        { name: 'Jan', value: 400 },\n        { name: 'Feb', value: 300 },\n        { name: 'Mar', value: 500 },\n        { name: 'Apr', value: 280 },\n        { name: 'May', value: 590 },\n    ];\n\n    // Filter pools\n    const assetPools = yields?.filter(p => p.symbol.toUpperCase() === symbol) || [];\n\n    // Set default protocol to highest APY on load\n    useEffect(() => {\n        if (assetPools.length > 0 && !selectedProtocol) {\n            const best = assetPools.reduce((prev, current) => (prev.apy > current.apy) ? prev : current);\n            setSelectedProtocol(best.project);\n        }\n    }, [assetPools, selectedProtocol]);\n\n    const currentPool = assetPools.find(p => p.project === selectedProtocol) || assetPools[0];\n\n    return (\n        <div className=\"pt-32 min-h-screen bg-[#0B0B0F] text-foreground\">\n            <div className=\"container py-8 max-w-screen-2xl mx-auto px-8 md:px-16 space-y-8\">\n\n                {/* Header */}\n                <div className=\"flex items-center gap-4\">\n                    <Link href=\"/\" className=\"text-muted-foreground hover:text-white transition-colors\">\n                        ← Back to Markets\n                    </Link>\n                </div>\n\n                <div className=\"flex items-center gap-6\">\n                    <AssetIcon symbol={symbol} size={64} />\n                    <div>\n                        <h1 className=\"text-4xl font-bold text-white\">{symbol}</h1>\n                        <p className=\"text-muted-foreground\">Arbitrum</p>\n                    </div>\n                </div>\n\n                {/* Main Grid */}\n                <div className=\"grid gap-8 lg:grid-cols-3\">\n\n                    {/* Left: Chart & Info */}\n                    <div className=\"lg:col-span-2 space-y-8\">\n                        <Card className=\"glass-card border-l-4 border-l-primary/50 relative overflow-hidden\">\n                            <CardHeader>\n                                <CardTitle>Market Overview</CardTitle>\n                            </CardHeader>\n                            <CardContent className=\"h-[300px]\">\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                    <AreaChart data={chartData}>\n                                        <defs>\n                                            <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                                <stop offset=\"5%\" stopColor=\"#F0B90B\" stopOpacity={0.3} />\n                                                <stop offset=\"95%\" stopColor=\"#F0B90B\" stopOpacity={0} />\n                                            </linearGradient>\n                                        </defs>\n                                        <Tooltip contentStyle={{ backgroundColor: '#1a1b23', borderColor: '#333' }} />\n                                        <Area type=\"monotone\" dataKey=\"value\" stroke=\"#F0B90B\" fill=\"url(#colorValue)\" />\n                                    </AreaChart>\n                                </ResponsiveContainer>\n                            </CardContent>\n                        </Card>\n\n                        {/* Protocol Stats Grid */}\n                        <div className=\"grid md:grid-cols-3 gap-4\">\n                            {assetPools.map(pool => (\n                                <div\n                                    key={pool.pool}\n                                    className={`p-4 rounded-xl border cursor-pointer transition-all ${selectedProtocol === pool.project ? 'bg-primary/10 border-primary' : 'bg-black/20 border-white/5 hover:bg-white/5'}`}\n                                    onClick={() => setSelectedProtocol(pool.project)}\n                                >\n                                    <div className=\"flex items-center justify-between mb-2\">\n                                        <span className=\"capitalize font-bold\">{pool.project}</span>\n                                        {selectedProtocol === pool.project && <div className=\"h-2 w-2 rounded-full bg-primary\"></div>}\n                                    </div>\n                                    <div className=\"space-y-1 text-sm\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-muted-foreground\">Supply</span>\n                                            <span className=\"text-emerald-400 font-mono font-bold\">{pool.apy.toFixed(2)}%</span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-muted-foreground\">Borrow</span>\n                                            <span className=\"text-red-400 font-mono font-bold\">-{pool.apyBaseBorrow?.toFixed(2)}%</span>\n                                        </div>\n                                        <div className=\"flex justify-between pt-2 border-t border-white/5 mt-1\">\n                                            <span className=\"text-[10px] text-muted-foreground\">TVL</span>\n                                            <span className=\"text-[10px] text-muted-foreground\">${(pool.tvlUsd / 1000000).toFixed(1)}M</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* Right: Interaction Card */}\n                    <div className=\"space-y-6\">\n                        <Card className=\"glass-card border border-white/10 shadow-2xl bg-[#121216]\">\n                            <div className=\"flex border-b border-white/5\">\n                                <button\n                                    onClick={() => setActiveTab('lend')}\n                                    className={`flex-1 py-4 text-sm font-bold uppercase tracking-wider transition-colors ${activeTab === 'lend' ? 'text-primary border-b-2 border-primary bg-primary/5' : 'text-muted-foreground hover:text-white'}`}\n                                >\n                                    Lend / Supply\n                                </button>\n                                <button\n                                    onClick={() => setActiveTab('borrow')}\n                                    className={`flex-1 py-4 text-sm font-bold uppercase tracking-wider transition-colors ${activeTab === 'borrow' ? 'text-primary border-b-2 border-primary bg-primary/5' : 'text-muted-foreground hover:text-white'}`}\n                                >\n                                    Borrow\n                                </button>\n                            </div>\n\n                            <CardContent className=\"p-6 space-y-6\">\n                                {/* Input Area */}\n                                <div className=\"space-y-2\">\n                                    <div className=\"flex justify-between text-xs font-bold text-muted-foreground uppercase\">\n                                        <span>Amount</span>\n                                        <span>Balance: 0.00</span>\n                                    </div>\n                                    <div className=\"relative group\">\n                                        <input\n                                            type=\"number\"\n                                            placeholder=\"0.00\"\n                                            className=\"w-full bg-black/40 border border-white/10 rounded-xl py-4 pl-4 pr-24 text-2xl font-mono text-white focus:outline-none focus:border-primary/50 transition-colors\"\n                                            value={amount}\n                                            onChange={(e) => setAmount(e.target.value)}\n                                        />\n                                        <div className=\"absolute right-3 top-2 bottom-2 bg-white/5 rounded-lg px-3 flex items-center justify-center gap-2 border border-white/5\">\n                                            <AssetIcon symbol={symbol} size={20} />\n                                            <span className=\"font-bold text-sm\">{symbol}</span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Protocol Selector Dropdown (Simulated with current selection text) */}\n                                <div className=\"p-4 bg-black/20 rounded-xl border border-white/5 space-y-3\">\n                                    <div className=\"flex justify-between items-center text-sm\">\n                                        <span className=\"text-muted-foreground\">Protocol</span>\n                                        <span className=\"capitalize font-bold text-white flex items-center gap-2\">\n                                            {selectedProtocol || 'Select Protocol'}\n                                            <span className=\"text-[10px] bg-primary/20 text-primary px-1.5 py-0.5 rounded\">\n                                                {activeTab === 'lend' ? `+${currentPool?.apy.toFixed(2)}%` : `-${currentPool?.apyBaseBorrow?.toFixed(2)}%`}\n                                            </span>\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between items-center text-sm\">\n                                        <span className=\"text-muted-foreground\">Liquidity</span>\n                                        <span className=\"text-white\">${currentPool ? (currentPool.tvlUsd / 1000000).toFixed(2) : '0.00'}M</span>\n                                    </div>\n                                    <div className=\"flex justify-between items-center text-sm\">\n                                        <span className=\"text-muted-foreground\">Utilization</span>\n                                        <span className=\"text-white\">--%</span>\n                                    </div>\n                                </div>\n\n                                {/* Action Button */}\n                                <Button className=\"w-full h-14 text-lg font-bold bg-[#ceff00] text-black hover:bg-[#b8e600] rounded-xl shadow-[0_0_20px_rgba(206,255,0,0.2)] transition-all transform active:scale-[0.98]\">\n                                    {activeTab === 'lend' ? `Supply ${symbol}` : `Borrow ${symbol}`}\n                                </Button>\n\n                                <div className=\"text-center text-[10px] text-muted-foreground\">\n                                    Powered by ArbiLoop Smart Wallet\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AssetIcon' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"AssetIcon"},"fix":{"range":[133,189],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LoopSelector' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"LoopSelector"},"fix":{"range":[189,247],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":48,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get &quot;Good Vibes Only\" with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get &ldquo;Good Vibes Only\" with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get &#34;Good Vibes Only\" with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get &rdquo;Good Vibes Only\" with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":48,"column":37,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get \"Good Vibes Only&quot; with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get \"Good Vibes Only&ldquo; with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get \"Good Vibes Only&#34; with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2690,2905],"text":"\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get \"Good Vibes Only&rdquo; with automated risk alerts and stress-free yield optimization.\n              "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":93,"column":27,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop&apos;s \"God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop&lsquo;s \"God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop&#39;s \"God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop&rsquo;s \"God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":93,"column":30,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's &quot;God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's &ldquo;God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's &#34;God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's &rdquo;God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":93,"column":39,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's \"God Mode&quot; AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's \"God Mode&ldquo; AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's \"God Mode&#34; AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4938,5159],"text":"\n                  ArbiLoop's \"God Mode&rdquo; AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\nimport { LandingCTA } from \"@/components/LandingCTA\";\nimport { Button } from \"@/components/ui/button\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { LoopSelector } from \"@/components/LoopSelector\";\nimport { TopLoops } from \"@/components/TopLoops\";\nimport { RiskMonitor } from \"@/components/RiskMonitor\";\nimport { LiquidationAlerts } from \"@/components/LiquidationAlerts\";\nimport { ArrowRight, BarChart3, Bot, ShieldCheck, Zap } from 'lucide-react';\n\nexport default function LandingPage() {\n  return (\n    <main className=\"min-h-screen bg-background text-foreground selection:bg-primary/30 font-sans overflow-x-hidden\">\n\n      {/* Background Gradients (Hidden on Mobile) */}\n      <div className=\"fixed inset-0 pointer-events-none hidden md:block\">\n        {/* Top Right - Primary Lime Glow */}\n        <div className=\"absolute top-[-20%] right-[-10%] w-[800px] h-[800px] bg-[#CEFF00]/15 rounded-full blur-[120px]\"></div>\n        {/* Bottom Left - Emerald Glow (Safe Theme) */}\n        <div className=\"absolute bottom-[-20%] left-[-10%] w-[800px] h-[800px] bg-emerald-500/10 rounded-full blur-[120px]\"></div>\n        {/* Center Left - Subtle Lime/Emerald Mix for depth */}\n        <div className=\"absolute top-[30%] left-[-10%] w-[500px] h-[500px] bg-[#CEFF00]/5 rounded-full blur-[100px]\"></div>\n      </div>\n\n      <div className=\"relative z-10 pt-24 md:pt-32 pb-20\">\n        <div className=\"container max-w-screen-2xl mx-auto px-3 md:px-16\">\n\n          {/* Hero Section */}\n          <div className=\"grid lg:grid-cols-2 gap-8 lg:gap-16 items-center mb-16 md:mb-32\">\n            <div className=\"space-y-8 animate-fade-in-up\">\n              <div className=\"inline-flex items-center gap-2 px-3 py-1.5 md:px-4 md:py-2 rounded-full bg-[#CEFF00]/10 border border-[#CEFF00]/20 text-[#CEFF00] text-xs md:text-sm font-bold tracking-wide\">\n                <span className=\"relative flex h-1.5 w-1.5 md:h-2 md:w-2\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#CEFF00] opacity-75\"></span>\n                  <span className=\"relative inline-flex rounded-full h-1.5 w-1.5 md:h-2 md:w-2 bg-[#CEFF00]\"></span>\n                </span>\n                Live on Arbitrum\n              </div>\n\n              <h1 className=\"text-4xl md:text-7xl font-bold font-outfit leading-[1.1]\">\n                Your Personal <br />\n                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-[#CEFF00] to-emerald-400\">\n                  AI Risk Agent\n                </span>\n              </h1>\n\n              <p className=\"text-lg md:text-xl text-muted-foreground max-w-xl leading-relaxed\">\n                Stop staring at charts. Let our autonomous AI agent monitor your DeFi health 24/7.\n                Get \"Good Vibes Only\" with automated risk alerts and stress-free yield optimization.\n              </p>\n\n              <div className=\"flex flex-col sm:flex-row gap-4\">\n                <LandingCTA />\n              </div>\n\n              <div className=\"pt-8 flex items-center gap-8 opacity-50 grayscale hover:grayscale-0 transition-all duration-500\">\n                <span className=\"text-sm font-bold tracking-widest uppercase text-muted-foreground\">Powered By</span>\n                <div className=\"h-8 w-auto flex items-center gap-2 font-bold text-xl\">Venus</div>\n                <div className=\"h-8 w-auto flex items-center gap-2 font-bold text-xl\">Radiant</div>\n                <div className=\"h-8 w-auto flex items-center gap-2 font-bold text-xl\">Kinza</div>\n              </div>\n            </div>\n\n            {/* Hero Visual */}\n            <div className=\"relative h-auto lg:h-[400px] perspective-1000 mt-8 lg:mt-0\">\n              <div className=\"relative lg:absolute lg:top-10 lg:right-0 w-full max-w-md mx-auto transform hover:scale-105 transition-transform duration-500\">\n                <RiskMonitor />\n              </div>\n            </div>\n          </div>\n\n          {/* New Interactive Section (Strategy Builder & Top Loops) */}\n          <div className=\"space-y-16 md:space-y-24 mb-16 md:mb-32\">\n\n            {/* Top Loops Section */}\n\n\n            {/* Top Loops */}\n            <div>\n              <div>\n                <TopLoops maxItems={4} showFilters={false} />\n              </div>\n            </div>\n\n            {/* Risk Management Center */}\n            <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n              <div className=\"space-y-6\">\n                <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 border border-red-500/20 text-red-500 text-sm font-bold tracking-wide\">\n                  <ShieldCheck size={16} />\n                  Advanced Safety Protocols\n                </div>\n                <h2 className=\"text-4xl font-bold font-outfit\">Never Get Liquidated.</h2>\n                <p className=\"text-muted-foreground text-lg leading-relaxed\">\n                  ArbiLoop's \"God Mode\" AI Agent monitors your Health Factor across every protocol in real-time.\n                  Sleep soundly knowing an autonomous guardian is watching your positions.\n                </p>\n                <ul className=\"space-y-4 pt-4\">\n                  {[\n                    'Real-time Health Factor monitoring across chains',\n\n                    'Telegram Liquidation Alerts',\n                    'Simulation mode to stress-test your strategy'\n                  ].map((item, i) => (\n                    <li key={i} className=\"flex items-center gap-3 font-bold text-white/80\">\n                      <div className=\"h-6 w-6 rounded-full bg-[#CEFF00]/20 flex items-center justify-center text-[#CEFF00]\">\n                        <Zap size={14} />\n                      </div>\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n\n              <div className=\"relative\">\n                {/* Visual Composition */}\n                <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-gradient-to-tr from-purple-500/10 to-blue-500/10 blur-[100px] rounded-full -z-10\"></div>\n\n                <div className=\"grid gap-6 md:grid-cols-2\">\n                  <div className=\"md:col-span-2 transform hover:scale-[1.02] transition-transform duration-500\">\n\n                  </div>\n                  <div className=\"md:col-span-2 transform hover:scale-[1.02] transition-transform duration-500 delay-100\">\n                    {/* Placeholder for LiquidationAlerts - need to import it first */}\n                    <LiquidationAlerts />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n\n\n          {/* Features Section */}\n          <div className=\"py-16 md:py-32 border-t border-white/5\">\n            <div className=\"text-center max-w-2xl mx-auto mb-20 space-y-4\">\n              <h2 className=\"text-4xl font-bold font-outfit\">Good Vibes Only.</h2>\n              <p className=\"text-muted-foreground text-lg\">\n                We stripped away the complexity of DeFi and built a stress-free interface powered by AI.\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n              {[\n                {\n                  title: 'AI Agent Monitoring',\n                  desc: 'Our intelligent Telegram bot keeps a 24/7 watch on the blockchain and your portfolio, acting as your personal AI risk manager.',\n                  icon: <Bot className=\"text-[#CEFF00]\" size={32} />,\n                  bg: 'bg-[#CEFF00]/5'\n                },\n                {\n                  title: 'Real-Time Analytics',\n                  desc: 'Track your Net Worth, APY, and Health Factor across all protocols in one unified dashboard.',\n                  icon: <BarChart3 className=\"text-emerald-400\" size={32} />,\n                  bg: 'bg-emerald-400/5'\n                },\n                {\n                  title: 'Non-Custodial Security',\n                  desc: 'You own your keys. Our Smart Wallet architecture gives you power without giving up control.',\n                  icon: <ShieldCheck className=\"text-purple-400\" size={32} />,\n                  bg: 'bg-purple-400/5'\n                }\n              ].map((feature, i) => (\n                <div key={i} className={`p-8 rounded-3xl border border-white/5 ${feature.bg} hover:bg-white/5 transition-all duration-300 hover:-translate-y-2`}>\n                  <div className=\"h-14 w-14 rounded-2xl bg-[#0B0B0F] border border-white/10 flex items-center justify-center mb-6 shadow-lg\">\n                    {feature.icon}\n                  </div>\n                  <h3 className=\"text-2xl font-bold mb-3\">{feature.title}</h3>\n                  <p className=\"text-muted-foreground leading-relaxed\">{feature.desc}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Steps Section */}\n          <div className=\"py-20 bg-gradient-to-b from-transparent to-[#CEFF00]/5 rounded-[3rem] border border-white/5 relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-[#0B0B0F]/80 backdrop-blur-sm -z-10\"></div>\n            <div className=\"container max-w-4xl mx-auto px-8\">\n              <h2 className=\"text-4xl font-bold font-outfit text-center mb-16\">\n                Start Earning in 3 Easy Steps\n              </h2>\n\n              <div className=\"space-y-12 relative\">\n                {/* Line */}\n                <div className=\"absolute left-[27px] top-4 bottom-4 w-0.5 bg-gradient-to-b from-[#CEFF00] to-transparent md:hidden\"></div>\n\n                {[\n                  { step: '01', title: 'Connect Wallet', desc: 'Link your MetaMask, TrustWallet, or any Web3 wallet securely.' },\n                  { step: '02', title: 'Link Telegram', desc: 'Set up alerts to get notified when your Health Factor drops.' },\n                  { step: '03', title: 'Monitor & Manage', desc: 'Track positions across Venus, Kinza, and Radiant. Take action when needed.' }\n                ].map((s, i) => (\n                  <div key={i} className=\"flex gap-8 items-start relative\">\n                    <div className=\"h-14 w-14 shrink-0 rounded-full bg-[#CEFF00] text-black font-bold text-xl flex items-center justify-center shadow-[0_0_15px_rgba(206,255,0,0.5)] z-10\">\n                      {s.step}\n                    </div>\n                    <div className=\"pt-2\">\n                      <h3 className=\"text-2xl font-bold mb-2\">{s.title}</h3>\n                      <p className=\"text-muted-foreground text-lg\">{s.desc}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* CTA */}\n          <div className=\"py-16 md:py-32 text-center\">\n            <h2 className=\"text-5xl font-bold font-outfit mb-8\">Ready to Optimize?</h2>\n            <Link href=\"/dashboard\">\n              <Button className=\"h-16 px-12 text-xl font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full shadow-[0_0_30px_rgba(206,255,0,0.4)] transition-all hover:scale-105\">\n                Launch ArbiLoop <ArrowRight className=\"ml-2\" />\n              </Button>\n            </Link>\n          </div>\n\n        </div>\n      </div>\n    </main>\n  );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\portfolio\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\privacy-policy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\app\\terms-of-service\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":43,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (&quot;we,\" \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (&ldquo;we,\" \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (&#34;we,\" \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (&rdquo;we,\" \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,&quot; \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,&ldquo; \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,&#34; \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,&rdquo; \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" &quot;our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" &ldquo;our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" &#34;our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" &rdquo;our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,&quot; or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,&ldquo; or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,&#34; or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,&rdquo; or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or &quot;us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or &ldquo;us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or &#34;us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or &rdquo;us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or \"us&quot;) provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or \"us&ldquo;) provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or \"us&#34;) provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2968,3181],"text":"\n                                ArbiLoop (\"we,\" \"our,\" or \"us&rdquo;) provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":54,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking &quot;Connect Wallet\", creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking &ldquo;Connect Wallet\", creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking &#34;Connect Wallet\", creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking &rdquo;Connect Wallet\", creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":54,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking \"Connect Wallet&quot;, creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking \"Connect Wallet&ldquo;, creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking \"Connect Wallet&#34;, creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3234,3522],"text":"\n                                By clicking \"Connect Wallet&rdquo;, creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport Link from 'next/link';\nimport { ArrowLeft, Scale, AlertTriangle, CloudOff, ShieldAlert } from 'lucide-react';\n\nexport default function TermsOfService() {\n    const currentYear = new Date().getFullYear();\n\n    return (\n        <main className=\"min-h-screen bg-background text-foreground font-sans relative overflow-hidden\">\n            {/* Background Gradients (Distinct from Privacy Policy slightly, or same theme) */}\n            <div className=\"fixed inset-0 pointer-events-none\">\n                <div className=\"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-[#CEFF00]/5 rounded-full blur-[120px]\"></div>\n                <div className=\"absolute bottom-[-20%] left-[-10%] w-[600px] h-[600px] bg-purple-500/5 rounded-full blur-[120px]\"></div>\n            </div>\n\n            <div className=\"relative z-10 pt-32 pb-20 container max-w-4xl mx-auto px-6\">\n\n                {/* Back Button */}\n                <div className=\"mb-8\">\n                    <Link href=\"/\" className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-[#CEFF00] transition-colors group\">\n                        <ArrowLeft size={16} className=\"group-hover:-translate-x-1 transition-transform\" />\n                        Back to Home\n                    </Link>\n                </div>\n\n                {/* Header */}\n                <div className=\"mb-12 border-b border-white/10 pb-8\">\n                    <div className=\"inline-flex items-center gap-2 px-3 py-1 mb-6 rounded-full bg-[#CEFF00]/10 border border-[#CEFF00]/20 text-[#CEFF00] text-xs font-bold tracking-wide uppercase\">\n                        <Scale size={12} />\n                        Last Updated: {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}\n                    </div>\n                    <h1 className=\"text-4xl md:text-6xl font-bold font-outfit mb-4\">Terms of Service</h1>\n                    <p className=\"text-xl text-muted-foreground leading-relaxed max-w-2xl\">\n                        Please read these terms carefully before using the ArbiLoop platform. By accessing or using our services, you agree to be bound by these terms.\n                    </p>\n                </div>\n\n                {/* Content Sections */}\n                <div className=\"space-y-12\">\n\n                    {/* Section 1 */}\n                    <section>\n                        <h2 className=\"text-2xl font-bold font-outfit mb-4 flex items-center gap-3\">\n                            <div className=\"h-8 w-8 rounded-lg bg-[#CEFF00]/10 flex items-center justify-center text-[#CEFF00]\">\n                                <span className=\"font-bold\">1</span>\n                            </div>\n                            Acceptance of Terms\n                        </h2>\n                        <div className=\"prose prose-invert prose-p:text-muted-foreground prose-li:text-muted-foreground max-w-none pl-11\">\n                            <p>\n                                ArbiLoop (\"we,\" \"our,\" or \"us\") provides a web-based interface that allows you to interact with decentralized finance (DeFi) protocols on the Arbitrum.\n                            </p>\n                            <p className=\"mt-4\">\n                                By clicking \"Connect Wallet\", creating a strategy, or using any feature of the platform, you acknowledge that you have read, understood, and agreed to these Terms of Service. If you do not agree, you must not use the platform.\n                            </p>\n                        </div>\n                    </section>\n\n                    {/* Section 2 */}\n                    <section>\n                        <div className=\"p-6 rounded-2xl border border-red-500/20 bg-red-500/5 mb-8\">\n                            <h2 className=\"text-xl font-bold font-outfit mb-3 text-red-400 flex items-center gap-2\">\n                                <AlertTriangle size={20} />\n                                Risk Disclosure\n                            </h2>\n                            <div className=\"text-muted-foreground text-sm space-y-2\">\n                                <p>\n                                    Cryptocurrency and DeFi investments carry a high degree of risk. ArbiLoop is a tool for interacting with smart contracts, but we do not manage your funds or guarantee returns.\n                                </p>\n                                <ul className=\"list-disc pl-5 mt-2 space-y-1 text-muted-foreground/80\">\n                                    <li><strong>Smart Contract Risk:</strong> Underlying protocols (Venus, Radiant, etc.) may have bugs or vulnerabilities.</li>\n                                    <li><strong>Liquidation Risk:</strong> Market volatility can lead to liquidation of your collateral. While ArbiLoop provides monitoring tools, we are not responsible for losses due to liquidation.</li>\n                                    <li><strong>Impermanent Loss:</strong> Providing liquidity to pools may result in impermanent loss.</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </section>\n\n                    {/* Section 3 */}\n                    <section>\n                        <h2 className=\"text-2xl font-bold font-outfit mb-4 flex items-center gap-3\">\n                            <div className=\"h-8 w-8 rounded-lg bg-[#CEFF00]/10 flex items-center justify-center text-[#CEFF00]\">\n                                <CloudOff size={18} />\n                            </div>\n                            3. Non-Custodial Nature\n                        </h2>\n                        <div className=\"prose prose-invert prose-p:text-muted-foreground prose-li:text-muted-foreground max-w-none pl-11\">\n                            <p>\n                                ArbiLoop is a non-custodial platform. We do not have access to your private keys, funds, or ability to initiate transactions without your signature. You are solely responsible for the security of your wallet and private keys.\n                            </p>\n                            <p className=\"mt-4\">\n                                We cannot recover your funds if you lose access to your wallet or if you approve a malicious transaction on a third-party site.\n                            </p>\n                        </div>\n                    </section>\n\n                    {/* Section 4 */}\n                    <section>\n                        <h2 className=\"text-2xl font-bold font-outfit mb-4 flex items-center gap-3\">\n                            <div className=\"h-8 w-8 rounded-lg bg-[#CEFF00]/10 flex items-center justify-center text-[#CEFF00]\">\n                                <ShieldAlert size={18} />\n                            </div>\n                            4. Limitation of Liability\n                        </h2>\n                        <div className=\"prose prose-invert prose-p:text-muted-foreground prose-li:text-muted-foreground max-w-none pl-11\">\n                            <p>\n                                To the maximum extent permitted by law, ArbiLoop and its developers shall not be liable for any direct, indirect, incidental, special, consequential, or exemplary damages, including but not limited to damages for loss of profits, goodwill, use, data, or other intangible losses.\n                            </p>\n                            <p className=\"mt-4\">\n                                This includes losses resulting from: (i) the use or inability to use the service; (ii) cost of procurement of substitute goods and services; (iii) unauthorized access to or alteration of your transmissions or data.\n                            </p>\n                        </div>\n                    </section>\n\n                    <div className=\"pt-8 border-t border-white/10 mt-12 text-center\">\n                        <p className=\"text-xs text-muted-foreground/60 mt-4\">\n                            &copy; {currentYear} ArbiLoop. All rights reserved.\n                        </p>\n                    </div>\n\n                </div>\n            </div>\n        </main>\n    );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\AIInsights.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[497,500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[497,500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3164,3167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3164,3167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'isParentLoading' and 'loading'. Either include them or remove the dependency array.","line":157,"column":8,"nodeType":"ArrayExpression","endLine":157,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [address, isParentLoading, loading, portfolioData, settings, settingsLoading]","fix":{"range":[6225,6276],"text":"[address, isParentLoading, loading, portfolioData, settings, settingsLoading]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport { Sparkles, Loader2, RefreshCw } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useAccount } from 'wagmi';\nimport { useUserSettings } from '@/hooks/useUserSettings';\nimport { Button } from \"@/components/ui/button\";\nimport { ConnectButton } from '@rainbow-me/rainbowkit';\nimport { Wallet } from 'lucide-react';\n\ninterface AIInsightsProps {\n    portfolioData: any;\n    isLoading?: boolean;\n}\n\nconst CACHE_KEY_PREFIX = 'ArbiLoop_ai_insights_';\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minute cache for stability\n\nconst LOADING_MESSAGES = [\n    \"Fetching your protocol positions...\",\n    \"Syncing market data from Arbitrum...\",\n    \"Calculating individual Health Factors...\",\n    \"Analyzing debt-to-collateral ratios...\",\n    \"Scanning for yield optimization paths...\",\n    \"Generating safety recommendations...\",\n    \"Finalizing personalized AI insights...\"\n];\n\nexport function AIInsights({ portfolioData, isLoading: isParentLoading }: AIInsightsProps) {\n    const { address } = useAccount();\n    const [tips, setTips] = useState<string[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Use refs to track the last analyzed data and session status\n    const lastAnalyzedData = useRef<string>(\"\");\n    const hasFetchedThisSession = useRef<boolean>(false);\n    const [messageIndex, setMessageIndex] = useState(0);\n\n    const { settings, loading: settingsLoading } = useUserSettings();\n\n    // Dynamic loading messages logic\n    useEffect(() => {\n        let timeoutId: NodeJS.Timeout;\n\n        if (loading || isParentLoading) {\n            const cycleMessage = () => {\n                const randomTime = Math.floor(Math.random() * (2500 - 1000 + 1) + 1000);\n                timeoutId = setTimeout(() => {\n                    setMessageIndex((prev) => (prev + 1) % LOADING_MESSAGES.length);\n                    cycleMessage();\n                }, randomTime);\n            };\n            cycleMessage();\n        } else {\n            setMessageIndex(0);\n        }\n\n        return () => clearTimeout(timeoutId);\n    }, [loading, isParentLoading]);\n\n    useEffect(() => {\n        async function fetchInsights() {\n            if (!address || !portfolioData || settingsLoading) return;\n\n            // 1. Check for significant data (ignore empty/loading states)\n            if (isParentLoading || settingsLoading) return;\n\n            const hasData = (portfolioData.totalSupplied > 0 || portfolioData.totalBorrowed > 0);\n            if (!hasData) return;\n\n            // 2. Create a stable hash/string of the data to detect changes\n            // We include the total values and the positions count/ids to catch major changes\n            const currentDataString = JSON.stringify({\n                totalNetWorth: portfolioData.totalNetWorth?.toFixed(2),\n                totalSupplied: portfolioData.totalSupplied?.toFixed(2),\n                totalBorrowed: portfolioData.totalBorrowed?.toFixed(2),\n                positions: portfolioData.positions?.map((p: any) => p.symbol + p.supply + p.borrow).join(','),\n                threshold: settings?.alert_threshold\n            });\n\n            // 3. Check Cache Freshness & Session Status\n            const cacheKey = `${CACHE_KEY_PREFIX}${address}`;\n            const cached = localStorage.getItem(cacheKey);\n\n            if (cached) {\n                const { timestamp, data, inputHash } = JSON.parse(cached);\n                const isFresh = (Date.now() - timestamp) < CACHE_DURATION;\n                const isSameData = inputHash === currentDataString;\n\n                // If cache is fresh, use it and mark as fetched for this session\n                if (isFresh) {\n                    setTips(data);\n                    lastAnalyzedData.current = currentDataString;\n                    hasFetchedThisSession.current = true;\n                    return;\n                }\n\n                // If we've already shown insights (fresh or not) and data hasn't changed, \n                // don't poll again while we are on this same page.\n                if (hasFetchedThisSession.current && isSameData) {\n                    return;\n                }\n            }\n\n            // 4. Check if we just tried this exact data (prevent internal loops)\n            if (lastAnalyzedData.current === currentDataString && !loading) {\n                return;\n            }\n\n            // If we've already fetched ONCE this session, don't auto-poll again\n            // unless the data actually changed (inputHash check above).\n            if (hasFetchedThisSession.current && lastAnalyzedData.current === currentDataString) {\n                return;\n            }\n\n            setLoading(true);\n            setError(null);\n            lastAnalyzedData.current = currentDataString; // Mark as processing\n\n            try {\n                const response = await fetch('/api/ai-insight', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        portfolio: portfolioData,\n                        userSettings: settings\n                    }),\n                });\n\n                if (!response.ok) throw new Error('Failed to fetch insights');\n\n                const data = await response.json();\n                setTips(data.tips);\n\n                // Save to cache\n                localStorage.setItem(cacheKey, JSON.stringify({\n                    timestamp: Date.now(),\n                    data: data.tips,\n                    inputHash: currentDataString\n                }));\n                hasFetchedThisSession.current = true;\n\n            } catch (err) {\n                console.error(err);\n                setError(\"AI Agent is currently sleeping. Try again later.\");\n                // Reset ref so we can try again if data updates\n                lastAnalyzedData.current = \"\";\n            } finally {\n                setLoading(false);\n            }\n        }\n\n        fetchInsights();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [address, portfolioData, settings, settingsLoading]); // Keep dependencies, but logic handles the loop\n\n    // Manual Refresh Handler\n    const handleRefresh = () => {\n        if (!address) return;\n        localStorage.removeItem(`${CACHE_KEY_PREFIX}${address}`);\n        lastAnalyzedData.current = \"\";\n        window.location.reload();\n    };\n\n    // Prompt to connect wallet if not connected\n    if (!address) {\n        return (\n            <Card className=\"bg-[#0A0A0B] border-white/10 shadow-2xl relative overflow-hidden group min-h-[300px] flex flex-col items-center justify-center\">\n                {/* Background Glow Effects */}\n                <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/20 rounded-full blur-[120px] pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity duration-1000\" />\n                <div className=\"absolute -bottom-24 -right-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-[80px] pointer-events-none\" />\n\n                <CardContent className=\"relative z-10 py-12 flex flex-col items-center text-center space-y-8 max-w-md mx-auto\">\n                    <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary/20 to-emerald-500/10 flex items-center justify-center border border-white/10 shadow-2xl rotate-3 group-hover:rotate-6 transition-transform duration-500\">\n                        <Sparkles className=\"w-8 h-8 text-primary animate-pulse\" />\n                    </div>\n\n                    <div className=\"space-y-3\">\n                        <h2 className=\"text-2xl md:text-3xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60\">\n                            Unlock AI-Driven Protection\n                        </h2>\n                        <p className=\"text-muted-foreground text-sm md:text-base leading-relaxed\">\n                            Connect your wallet to enable 24/7 autonomous monitoring,\n                            real-time risk alerts, and personalized yield optimization tips.\n                        </p>\n                    </div>\n\n                    <ConnectButton.Custom>\n                        {({ openConnectModal, mounted }) => {\n                            if (!mounted) return null;\n                            return (\n                                <Button\n                                    onClick={openConnectModal}\n                                    size=\"lg\"\n                                    className=\"bg-primary text-black font-bold h-12 px-8 rounded-full shadow-[0_0_20px_rgba(206,255,0,0.2)] hover:shadow-[0_0_30px_rgba(206,255,0,0.4)] transition-all hover:scale-105 active:scale-95 flex items-center gap-2\"\n                                >\n                                    <Wallet className=\"w-5 h-5\" />\n                                    Connect Wallet\n                                </Button>\n                            );\n                        }}\n                    </ConnectButton.Custom>\n                </CardContent>\n            </Card>\n        );\n    }\n\n    return (\n        <Card className=\"bg-gradient-to-br from-[#CEFF00]/10 to-emerald-500/10 border-emerald-500/20 shadow-lg relative overflow-hidden\">\n            <CardHeader className=\"pb-2 flex flex-row items-center justify-between space-y-0\">\n                <CardTitle className=\"flex items-center gap-2 text-lg font-outfit text-emerald-400\">\n                    <Sparkles className=\"w-5 h-5 text-[#CEFF00]\" />\n                    AI Risk Agent Insights\n                </CardTitle>\n                {tips.length > 0 && !loading && (\n                    <button onClick={handleRefresh} className=\"text-xs text-emerald-500/50 hover:text-[#CEFF00] transition-colors\" title=\"Force Refresh\">\n                        <RefreshCw className=\"w-4 h-4\" />\n                    </button>\n                )}\n            </CardHeader>\n            <CardContent>\n                {loading || isParentLoading ? (\n                    <div className=\"space-y-3 py-2\">\n                        <div className=\"flex items-center gap-3 text-muted-foreground mb-4\">\n                            <Loader2 className=\"w-4 h-4 animate-spin text-[#CEFF00]\" />\n                            <div className=\"overflow-hidden h-4\">\n                                <span\n                                    key={messageIndex}\n                                    className=\"text-xs uppercase font-bold tracking-widest block animate-in fade-in slide-in-from-bottom-1 duration-500\"\n                                >\n                                    {isParentLoading ? \"Syncing Portfolio...\" : LOADING_MESSAGES[messageIndex]}\n                                </span>\n                            </div>\n                        </div>\n                        <div className=\"space-y-3\">\n                            {[1, 2, 3].map((i) => (\n                                <div key={i} className=\"h-12 w-full bg-white/5 animate-pulse rounded-lg border border-white/5\" />\n                            ))}\n                        </div>\n                    </div>\n                ) : error ? (\n                    <div className=\"flex flex-col gap-2\">\n                        <p className=\"text-sm text-red-400\">{error}</p>\n                        <button onClick={handleRefresh} className=\"text-xs underline text-muted-foreground hover:text-white text-left\">Try Again</button>\n                    </div>\n\n                ) : tips.length > 0 ? (\n                    <ul className=\"space-y-3\">\n                        {tips.map((tip, i) => (\n                            <li key={i} className=\"flex gap-3 text-sm text-white/90 bg-black/20 p-3 rounded-lg border border-white/5 hover:border-[#CEFF00]/30 transition-colors\">\n                                <span className=\"text-[#CEFF00] font-bold min-w-[20px]\">0{i + 1}</span>\n                                <span className=\"leading-relaxed\">{tip}</span>\n                            </li>\n                        ))}\n                    </ul>\n                ) : (\n                    <p className=\"text-sm text-muted-foreground italic\">\n                        No active positions found. Deposit assets to activate the AI Agent.\n                    </p>\n                )}\n            </CardContent>\n        </Card>\n    );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\BorrowModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\BorrowTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[903,906],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[903,906],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2658,2661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2658,2661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2714,2717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2714,2717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3129,3132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3129,3132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3255,3258],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3255,3258],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3391,3394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3391,3394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\BorrowTable.tsx:139:21\n  137 |                 );\n  138 |                 if (foundPool) {\n> 139 |                     setSelectedPool(foundPool);\n      |                     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  140 |                     lastUrlKey.current = currentUrlKey;\n  141 |                 }\n  142 |             } else if (!currentUrlKey) {","line":139,"column":21,"nodeType":null,"endLine":139,"endColumn":36},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":174,"column":33,"nodeType":"JSXOpeningElement","endLine":174,"endColumn":125},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borrowedAmount' is assigned a value but never used.","line":230,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":230,"endColumn":49},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":246,"column":57,"nodeType":"JSXOpeningElement","endLine":246,"endColumn":143},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borrowedAmount' is assigned a value but never used.","line":310,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":310,"endColumn":45},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":326,"column":57,"nodeType":"JSXOpeningElement","endLine":326,"endColumn":143}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useMemo, useState, useEffect, useRef } from 'react';\nimport { useSearchParams, useRouter, usePathname } from 'next/navigation';\nimport { useYields } from \"@/hooks/useYields\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { ChevronRight, LayoutGrid, List, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\nimport { Card } from \"@/components/ui/card\";\nimport { MarketModal } from \"./MarketModal\";\nimport { formatMoney } from \"@/lib/utils\";\nimport { useVenusPortfolio } from \"@/hooks/useVenusPortfolio\";\nimport { useKinzaPortfolio } from \"@/hooks/useKinzaPortfolio\";\nimport { useRadiantPortfolio } from \"@/hooks/useRadiantPortfolio\";\nimport { ACTIVE_PROTOCOLS, getProtocolIcon, getProtocolLabel } from '@/lib/protocols';\n\nexport function BorrowTable() {\n    const { data: yields, isLoading } = useYields();\n    const [selectedPool, setSelectedPool] = useState<any>(null);\n    const [viewMode, setViewMode] = useState<'list' | 'card'>('list');\n    const [selectedProtocol, setSelectedProtocol] = useState<string | null>(null);\n    const [sortConfig, setSortConfig] = useState<{ column: 'apy' | 'default', direction: 'asc' | 'desc' | 'none' }>({\n        column: 'default',\n        direction: 'none'\n    });\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    const PROTOCOLS = useMemo(\n        () =>\n            ACTIVE_PROTOCOLS.map((protocol) => ({\n                id: protocol.id,\n                name: protocol.label,\n                img: protocol.icon,\n            })),\n        [],\n    );\n\n    const toggleApySort = () => {\n        setSortConfig(prev => {\n            if (prev.column !== 'apy') return { column: 'apy', direction: 'desc' };\n            if (prev.direction === 'desc') return { column: 'apy', direction: 'asc' };\n            if (prev.direction === 'asc') return { column: 'apy', direction: 'none' };\n            return { column: 'apy', direction: 'desc' };\n        });\n    };\n\n    const handleClose = () => {\n        setSelectedPool(null);\n        // Clear URL search parameters to prevent the deep-linking useEffect from re-opening it\n        if (searchParams.get('asset')) {\n            router.replace(pathname, { scroll: false });\n        }\n    };\n\n    // Fetch User Portfolios\n    const { positions: venusPositions = [] } = useVenusPortfolio();\n    const { positions: kinzaPositions = [] } = useKinzaPortfolio();\n    const { positions: radiantPositions = [] } = useRadiantPortfolio();\n\n    // Map positions for O(1) lookup: key = `${protocol}-${symbol}`\n    const positionMap = useMemo(() => {\n        const map = new Map<string, any>();\n\n        const addPosition = (key: string, pos: any) => {\n            if (map.has(key)) {\n                const existing = map.get(key);\n                existing.supply += pos.supply;\n                existing.supplyUSD += pos.supplyUSD;\n                existing.borrow += pos.borrow;\n                existing.borrowUSD += pos.borrowUSD;\n            } else {\n                map.set(key, { ...pos });\n            }\n        };\n\n        venusPositions.forEach((pos: any) => {\n            addPosition(`venus-${pos.symbol}`.toUpperCase(), pos);\n        });\n        kinzaPositions.forEach((pos: any) => {\n            addPosition(`kinza-finance-${pos.symbol}`.toUpperCase(), pos);\n        });\n        radiantPositions.forEach((pos: any) => {\n            addPosition(`radiant-v2-${pos.symbol}`.toUpperCase(), pos);\n        });\n\n        return map;\n    }, [venusPositions, kinzaPositions, radiantPositions]);\n\n    const borrowData = useMemo(() => {\n        if (!yields) return [];\n\n        let data = yields.filter(pool => (pool.totalSupplyUsd || 0) > 0);\n\n        // Filter by protocol\n        if (selectedProtocol) {\n            data = data.filter(pool => pool.project === selectedProtocol);\n        }\n\n        // Sort\n        return data.sort((a, b) => {\n            if (sortConfig.column === 'apy' && sortConfig.direction !== 'none') {\n                const apyA = (a.apyBaseBorrow || 0) + (a.apyRewardBorrow || 0);\n                const apyB = (b.apyBaseBorrow || 0) + (b.apyRewardBorrow || 0);\n                return sortConfig.direction === 'desc' ? apyB - apyA : apyA - apyB;\n            }\n\n            // Default Sort: User Debt USD (desc) then Liquidity (desc)\n            const keyA = `${a.project}-${a.symbol}`.toUpperCase();\n            const keyB = `${b.project}-${b.symbol}`.toUpperCase();\n            const posA = positionMap.get(keyA);\n            const posB = positionMap.get(keyB);\n            const debtA = posA?.borrowUSD || 0;\n            const debtB = posB?.borrowUSD || 0;\n\n            if (debtA !== debtB) return debtB - debtA;\n\n            const availableA = (a.totalSupplyUsd || 0) - (a.totalBorrowUsd || 0);\n            const availableB = (b.totalSupplyUsd || 0) - (b.totalBorrowUsd || 0);\n            return availableB - availableA;\n        });\n    }, [yields, selectedProtocol, sortConfig, positionMap]);\n\n    const lastUrlKey = useRef<string | null>(null);\n\n    // Handle Deep Linking (Auto-open modal)\n    useEffect(() => {\n        const assetQuery = searchParams.get('asset');\n        const protocolQuery = searchParams.get('protocol');\n        const currentUrlKey = assetQuery ? `${assetQuery}-${protocolQuery || 'any'}` : null;\n\n        if (borrowData.length > 0) {\n            if (currentUrlKey && currentUrlKey !== lastUrlKey.current) {\n                const foundPool = borrowData.find(pool =>\n                    pool.symbol.toUpperCase() === assetQuery!.toUpperCase() &&\n                    (!protocolQuery || pool.project.toLowerCase() === protocolQuery.toLowerCase())\n                );\n                if (foundPool) {\n                    setSelectedPool(foundPool);\n                    lastUrlKey.current = currentUrlKey;\n                }\n            } else if (!currentUrlKey) {\n                lastUrlKey.current = null;\n            }\n        }\n    }, [borrowData, searchParams]);\n\n    if (isLoading) {\n        return (\n            <div className=\"space-y-4\">\n                {[1, 2, 3, 4, 5].map(i => (\n                    <div key={i} className=\"h-20 bg-muted/10 rounded-xl animate-pulse\" />\n                ))}\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Toolbar */}\n            <div className=\"flex items-center justify-between mb-6\">\n                <button className=\"px-4 py-1.5 rounded-full bg-[#1A1A1E] text-white text-sm font-medium border border-blue-500/20 text-blue-400\">\n                    Borrow\n                </button>\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-2\">\n                        {PROTOCOLS.map(proto => (\n                            <button\n                                key={proto.id}\n                                onClick={() => setSelectedProtocol(selectedProtocol === proto.id ? null : proto.id)}\n                                className={`w-8 h-8 rounded-full border-2 transition-all flex items-center justify-center overflow-hidden bg-black/40 ${selectedProtocol === proto.id ? 'border-blue-500 scale-110 shadow-[0_0_12px_rgba(59,130,246,0.4)]' : 'border-white/5 opacity-50 hover:opacity-100 hover:border-white/20'}`}\n                                title={proto.name}\n                            >\n                                <img src={proto.img} className=\"w-full h-full object-cover rounded-full\" alt={proto.name} />\n                            </button>\n                        ))}\n                    </div>\n                    <div className=\"hidden md:flex items-center gap-2 bg-muted/20 p-1 rounded-lg\">\n                        <button\n                            onClick={() => setViewMode('card')}\n                            className={`p-1.5 rounded-md transition-all ${viewMode === 'card' ? 'bg-muted text-white shadow-sm' : 'text-muted-foreground hover:text-white'}`}\n                        >\n                            <LayoutGrid className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                            onClick={() => setViewMode('list')}\n                            className={`p-1.5 rounded-md transition-all ${viewMode === 'list' ? 'bg-muted text-white shadow-sm' : 'text-muted-foreground hover:text-white'}`}\n                        >\n                            <List className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            {/* List View */}\n            {viewMode === 'list' && (\n                <>\n                    {/* Table Header */}\n                    <div className=\"grid grid-cols-12 gap-2 md:gap-4 px-2 md:px-6 py-2 text-[10px] md:text-xs font-semibold text-muted-foreground uppercase tracking-wider\">\n                        <div className=\"col-span-5 md:col-span-4\">Asset</div>\n                        <div\n                            className=\"col-span-3 md:col-span-2 text-right cursor-pointer hover:text-white transition-colors flex items-center justify-end gap-1\"\n                            onClick={toggleApySort}\n                        >\n                            Borrow APY\n                            {sortConfig.column === 'apy' && sortConfig.direction === 'desc' && <ArrowDown className=\"w-3 h-3 text-blue-400\" />}\n                            {sortConfig.column === 'apy' && sortConfig.direction === 'asc' && <ArrowUp className=\"w-3 h-3 text-blue-400\" />}\n                            {(sortConfig.column !== 'apy' || sortConfig.direction === 'none') && <ArrowUpDown className=\"w-3 h-3 opacity-30\" />}\n                        </div>\n                        <div className=\"hidden md:block col-span-2 text-right\">Max LTV</div>\n                        <div className=\"hidden md:block col-span-2 text-right\">Liquidity</div>\n                        <div className=\"col-span-4 md:col-span-2 text-right pr-2 md:pr-0\">Liquidity</div>\n                    </div>\n\n                    {/* Table Body */}\n                    <div className=\"space-y-2\">\n                        {borrowData.map((pool) => {\n                            const projectKey = pool.project;\n                            const protocolDisplay = getProtocolLabel(projectKey);\n                            const protocolImg = getProtocolIcon(projectKey);\n\n                            // Calculate metrics\n                            const availableLiquidity = (pool.totalSupplyUsd || 0) - (pool.totalBorrowUsd || 0);\n                            const borrowApy = (pool.apyBaseBorrow || 0) + (pool.apyRewardBorrow || 0);\n                            const ltvDisplay = pool.ltv ? `${(pool.ltv * 100).toFixed(0)}%` : '-';\n\n                            // Fetched Position\n                            const positionKey = `${projectKey}-${pool.symbol}`.toUpperCase();\n                            const position = positionMap.get(positionKey);\n                            const borrowedAmount = position?.borrow || 0;\n                            const borrowedUSD = position?.borrowUSD || 0;\n\n                            return (\n                                <div\n                                    key={`${pool.pool}-${pool.project}`}\n                                    onClick={() => setSelectedPool(pool)}\n                                    className=\"group relative bg-[#0f0f12] hover:bg-[#16161a] border border-white/5 hover:border-white/10 rounded-2xl transition-all duration-300 cursor-pointer\"\n                                >\n                                    <div className=\"grid grid-cols-12 gap-2 md:gap-4 px-2 md:px-6 py-3 md:py-5 items-center\">\n                                        {/* Asset */}\n                                        <div className=\"col-span-5 md:col-span-4 flex items-center gap-4\">\n                                            <div className=\"relative flex-shrink-0\">\n                                                <AssetIcon symbol={pool.symbol} className=\"w-8 h-8 md:w-10 md:h-10\" />\n                                                {protocolImg && (\n                                                    <div className=\"absolute -bottom-1 -right-1 w-4 h-4 md:w-5 md:h-5 rounded-full border-2 border-[#0f0f12] bg-white overflow-hidden\">\n                                                        <img src={protocolImg} className=\"w-full h-full object-cover\" alt={protocolDisplay} />\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div className=\"flex flex-col min-w-0\">\n                                                <span className=\"font-bold text-white text-xs md:text-base truncate leading-tight\">{pool.symbol}</span>\n                                                <span className=\"text-[9px] md:text-xs text-muted-foreground truncate leading-tight\">{protocolDisplay}</span>\n                                            </div>\n                                        </div>\n\n                                        {/* Borrow APY */}\n                                        <div className=\"col-span-3 md:col-span-2 text-right\">\n                                            <div className=\"flex items-center justify-end gap-1.5 font-mono text-blue-400 font-bold text-sm md:text-base\">\n                                                {borrowApy > 0 ? `-${borrowApy.toFixed(2)}%` : '0%'}\n                                            </div>\n                                        </div>\n\n                                        {/* Max LTV */}\n                                        <div className=\"hidden md:block col-span-2 text-right font-mono text-white text-sm\">\n                                            {ltvDisplay}\n                                        </div>\n\n                                        {/* Liquidity */}\n                                        <div className=\"hidden md:block col-span-2 text-right font-mono text-emerald-400 text-sm\">\n                                            {formatMoney(availableLiquidity)}\n                                        </div>\n\n                                        {/* Your Debt */}\n                                        <div className=\"col-span-4 md:col-span-2 flex items-center justify-end pl-0 md:pl-4 gap-1\">\n                                            <div className=\"flex flex-col items-end flex-1 min-w-0\">\n                                                <span className=\"font-bold text-white text-[10px] md:text-sm max-w-full truncate\">\n                                                    {formatMoney(availableLiquidity)}\n                                                </span>\n                                                <span className=\"text-[9px] md:text-xs text-muted-foreground\">\n                                                    {borrowedUSD > 0 ? `Debt: ${formatMoney(borrowedUSD)}` : formatMoney(availableLiquidity)}\n                                                </span>\n                                            </div>\n                                            <div className=\"ml-1 md:ml-4 flex-shrink-0 w-5 h-5 md:w-8 md:h-8 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors group-hover:border-blue-500/50 group-hover:text-blue-500\">\n                                                <ChevronRight className=\"w-3 h-3 md:w-4 md:h-4\" />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </>\n            )}\n\n            {/* Card View */}\n            {viewMode === 'card' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {borrowData.map((pool) => {\n                        const projectKey = pool.project;\n                        const protocolDisplay = getProtocolLabel(projectKey);\n                        const protocolImg = getProtocolIcon(projectKey);\n\n                        // Calculate metrics\n                        const availableLiquidity = (pool.totalSupplyUsd || 0) - (pool.totalBorrowUsd || 0);\n                        const borrowApy = (pool.apyBaseBorrow || 0) + (pool.apyRewardBorrow || 0);\n\n                        // Fetched Position\n                        const positionKey = `${projectKey}-${pool.symbol}`.toUpperCase();\n                        const position = positionMap.get(positionKey);\n                        const borrowedAmount = position?.borrow || 0;\n                        const borrowedUSD = position?.borrowUSD || 0;\n\n                        return (\n                            <Card\n                                key={`${pool.pool}-${pool.project}`}\n                                className=\"bg-[#0f0f12] border-white/5 hover:border-blue-500/30 transition-all cursor-pointer group overflow-hidden\"\n                                onClick={() => setSelectedPool(pool)}\n                            >\n                                <div className=\"p-6 space-y-4\">\n                                    <div className=\"flex items-start justify-between\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"relative\">\n                                                <AssetIcon symbol={pool.symbol} className=\"w-10 h-10\" />\n                                                {protocolImg && (\n                                                    <div className=\"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border border-[#0f0f12] bg-white overflow-hidden\">\n                                                        <img src={protocolImg} className=\"w-full h-full object-cover\" alt={protocolDisplay} />\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div>\n                                                <h3 className=\"font-bold text-lg leading-tight\">{pool.symbol}</h3>\n                                                <p className=\"text-xs text-muted-foreground\">{protocolDisplay}</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className=\"text-xs text-muted-foreground uppercase tracking-wider mb-0.5\">Borrow APY</div>\n                                            <div className=\"font-mono text-xl font-bold text-blue-400\">\n                                                {borrowApy > 0 ? `-${borrowApy.toFixed(2)}%` : '0%'}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"grid grid-cols-2 gap-4 py-4 border-t border-white/5\">\n                                        <div>\n                                            <div className=\"text-[10px] text-muted-foreground uppercase tracking-wider mb-1\">Available</div>\n                                            <div className=\"font-mono font-medium text-emerald-400\">{formatMoney(availableLiquidity)}</div>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className=\"text-[10px] text-muted-foreground uppercase tracking-wider mb-1\">Your Debt</div>\n                                            <div className=\"font-mono font-medium\">\n                                                {borrowedUSD > 0 ? formatMoney(borrowedUSD) : '-'}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between pt-2\">\n                                        <span className=\"text-xs text-blue-500/80 bg-blue-500/10 px-2 py-0.5 rounded-full border border-blue-500/20\">\n                                            Variable Rate\n                                        </span>\n                                        <div className=\"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-blue-500 group-hover:text-white transition-colors\">\n                                            <ChevronRight className=\"w-4 h-4\" />\n                                        </div>\n                                    </div>\n                                </div>\n                            </Card>\n                        );\n                    })}\n                </div>\n            )}\n\n            {selectedPool && (() => {\n                const posKey = `${selectedPool.project}-${selectedPool.symbol}`.toUpperCase();\n                const pos = positionMap.get(posKey);\n                return (\n                    <MarketModal\n                        isOpen={!!selectedPool}\n                        onClose={handleClose}\n                        initialMode=\"borrow\"\n                        pool={{\n                            ...selectedPool,\n                            userBorrowed: pos?.borrow || 0,\n                            userBorrowedUSD: pos?.borrowUSD || 0,\n                            userDeposited: pos?.supply || 0,\n                            userDepositedUSD: pos?.supplyUSD || 0,\n                        }}\n                    />\n                );\n            })()}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\EarnModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":7,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":60,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Shield"},"fix":{"range":[302,310],"text":""},"desc":"Remove unused variable \"Shield\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":7,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":74,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ExternalLink"},"fix":{"range":[310,324],"text":""},"desc":"Remove unused variable \"ExternalLink\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1636,1639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1636,1639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'writeError' is assigned a value but never used.","line":74,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6924,6927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6924,6927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7857,7860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7857,7860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isHealthLoading' is assigned a value but never used.","line":162,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":62},{"ruleId":"prefer-const","severity":1,"message":"'newDebt' is never reassigned. Use 'const' instead.","line":181,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":181,"endColumn":20,"fix":{"range":[9331,9358],"text":"const newDebt = protocolDebt;"}},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'withdrawUSD'. Either include it or remove the dependency array.","line":190,"column":8,"nodeType":"ArrayExpression","endLine":190,"endColumn":108,"suggestions":[{"desc":"Update the dependencies array to be: [withdrawUSD, amount, activeHealth.healthFactor, tokenPrice, protocolPowerUSD, protocolDebt, activeTab, assetLTV]","fix":{"range":[9630,9730],"text":"[withdrawUSD, amount, activeHealth.healthFactor, tokenPrice, protocolPowerUSD, protocolDebt, activeTab, assetLTV]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'allowanceAddress', 'allowanceSpender', 'openConnectModal', and 'writeContract'. Either include them or remove the dependency array.","line":300,"column":8,"nodeType":"ArrayExpression","endLine":300,"endColumn":253,"suggestions":[{"desc":"Update the dependencies array to be: [isConnected, amount, decimals, openConnectModal, activeTab, isNative, underlyingAddress, approvalTarget, currentAllowance, isVenus, isKinza, isRadiant, vTokenAddress, writeContract, address, collateral?.isCollateral, collateral.maxWithdrawable, toast, allowanceAddress, allowanceSpender]","fix":{"range":[16198,16443],"text":"[isConnected, amount, decimals, openConnectModal, activeTab, isNative, underlyingAddress, approvalTarget, currentAllowance, isVenus, isKinza, isRadiant, vTokenAddress, writeContract, address, collateral?.isCollateral, collateral.maxWithdrawable, toast, allowanceAddress, allowanceSpender]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\";\n\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { Loader2, Check, ArrowUpDown, AlertTriangle, Shield, ExternalLink, ArrowRight, ShieldAlert, X } from \"lucide-react\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useAccount, useWriteContract, useWaitForTransactionReceipt, useReadContract, useReadContracts, useBalance } from \"wagmi\";\nimport { parseUnits, formatUnits, maxUint256 } from \"viem\";\nimport {\n    VENUS_VTOKENS, VTOKEN_ABI, VBNB_ABI, ERC20_ABI,\n    KINZA_POOL, KINZA_POOL_ABI,\n    RADIANT_LENDING_POOL, RADIANT_POOL_ABI,\n    WETH_GATEWAY_ABI, KINZA_GATEWAY, RADIANT_GATEWAY,\n    getUnderlyingAddress, getApprovalTarget,\n} from \"@/lib/pool-config\";\nimport { useConnectModal } from \"@rainbow-me/rainbowkit\";\nimport { formatMoney, formatSmallNumber, getTokenDecimals, toPlainString, cn } from \"@/lib/utils\";\nimport { useTokenPrices } from \"@/hooks/useTokenPrices\";\nimport { useVenusCollateral } from \"@/hooks/useVenusCollateral\";\nimport { useAggregatedHealth } from \"@/hooks/useAggregatedHealth\";\n\ninterface EarnModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    pool: {\n        symbol: string;\n        project: string;\n        apy: number;\n        tvlUsd: number;\n        userDeposited?: number;\n        userDepositedUSD?: number;\n        ltv?: number;\n    };\n}\n\ninterface EarnModalContentProps {\n    onClose: () => void;\n    pool: any;\n    isEmbedded?: boolean;\n}\n\nexport function EarnModalContent({ onClose, pool, isEmbedded = false }: EarnModalContentProps) {\n    const { toast } = useToast();\n    const { address, isConnected } = useAccount();\n    const { openConnectModal } = useConnectModal();\n    const [amount, setAmount] = useState(\"\");\n    const [activeTab, setActiveTab] = useState<\"deposit\" | \"withdraw\">(\"deposit\");\n    const [step, setStep] = useState<\"idle\" | \"approving\" | \"mining\" | \"success\">(\"idle\");\n    const [isStatsExpanded, setIsStatsExpanded] = useState(false);\n    const { data: prices } = useTokenPrices();\n\n    // Protocol detection\n    const isVenus = pool.project === 'venus';\n    const isKinza = pool.project === 'kinza-finance';\n    const isRadiant = pool.project === 'radiant-v2';\n    const isNative = pool.symbol === 'BNB' || pool.symbol === 'WBNB';\n    const decimals = getTokenDecimals(pool.symbol);\n    const tokenPrice = prices ? prices.getPrice(pool.symbol) : 0;\n\n    // Venus-specific addresses\n    const vTokenAddress = isVenus ? VENUS_VTOKENS[pool.symbol] : undefined;\n\n    // Underlying token address (for ERC20 balance + approval)\n    const underlyingAddress = getUnderlyingAddress(pool.symbol, pool.project);\n    const approvalTarget = getApprovalTarget(pool.project, pool.symbol);\n\n    // Venus collateral awareness\n    const collateral = useVenusCollateral(pool.symbol);\n\n    // Transaction hooks\n    const { writeContract, data: hash, isPending, error: writeError, reset: resetWrite } = useWriteContract();\n    const { isLoading: isConfirming, isSuccess: isConfirmed } = useWaitForTransactionReceipt({ hash });\n\n    // WALLET BALANCE\n    const { data: balanceData, refetch: refetchBalance } = useBalance({\n        address,\n        query: { enabled: !!address && isNative }\n    });\n\n    const { data: tokenBalanceRaw, refetch: refetchToken } = useReadContract({\n        address: underlyingAddress,\n        abi: ERC20_ABI,\n        functionName: 'balanceOf',\n        args: address ? [address] : undefined,\n        query: { enabled: !!address && !isNative && !!underlyingAddress }\n    });\n\n    let walletBalance = 0;\n    if (isNative && balanceData) {\n        walletBalance = parseFloat(balanceData.formatted);\n    } else if (tokenBalanceRaw) {\n        walletBalance = parseFloat(formatUnits(tokenBalanceRaw, decimals));\n    }\n\n    // DEPOSITED BALANCE\n    const { data: venusData, refetch: refetchVenus } = useReadContracts({\n        contracts: [\n            { address: vTokenAddress, abi: VTOKEN_ABI, functionName: 'balanceOf', args: address ? [address] : undefined },\n            { address: vTokenAddress, abi: VTOKEN_ABI, functionName: 'exchangeRateStored' },\n        ],\n        query: { enabled: !!address && isVenus && !!vTokenAddress, refetchInterval: 10000 }\n    });\n\n    const KINZA_DATA_PROVIDER = '0x09ddc4ae826601b0f9671b9edffdf75e7e6f5d61' as `0x${string}`;\n    const { data: kinzaReserve, refetch: refetchKinza } = useReadContract({\n        address: KINZA_DATA_PROVIDER,\n        abi: [{ name: 'getUserReserveData', type: 'function', stateMutability: 'view', inputs: [{ name: 'asset', type: 'address' }, { name: 'user', type: 'address' }], outputs: [{ name: 'currentATokenBalance', type: 'uint256' }, { name: 'currentStableDebtBalance', type: 'uint256' }, { name: 'currentVariableDebtBalance', type: 'uint256' }, { name: 'principalStableDebt', type: 'uint256' }, { name: 'scaledVariableDebt', type: 'uint256' }, { name: 'stableBorrowRate', type: 'uint256' }, { name: 'liquidityRate', type: 'uint256' }, { name: 'stableRateLastUpdated', type: 'uint40' }, { name: 'usedAsCollateralEnabled', type: 'bool' }] }] as const,\n        functionName: 'getUserReserveData',\n        args: (underlyingAddress || isNative) && address ? [\n            isNative ? '0xCC650b486f723C924370656b509a82bD69526739' as `0x${string}` : underlyingAddress!,\n            address\n        ] : undefined,\n        query: { enabled: !!address && isKinza && (!!underlyingAddress || isNative), refetchInterval: 10000 }\n    });\n\n    const { data: radiantReserveData } = useReadContract({\n        address: RADIANT_LENDING_POOL,\n        abi: [{ name: 'getReserveData', type: 'function', stateMutability: 'view', inputs: [{ name: 'asset', type: 'address' }], outputs: [{ name: 'configuration', type: 'uint256' }, { name: 'liquidityIndex', type: 'uint128' }, { name: 'currentLiquidityRate', type: 'uint128' }, { name: 'variableBorrowIndex', type: 'uint128' }, { name: 'currentVariableBorrowRate', type: 'uint128' }, { name: 'currentStableBorrowRate', type: 'uint128' }, { name: 'lastUpdateTimestamp', type: 'uint40' }, { name: 'aTokenAddress', type: 'address' }, { name: 'stableDebtTokenAddress', type: 'address' }, { name: 'variableDebtTokenAddress', type: 'address' }, { name: 'interestRateStrategyAddress', type: 'address' }, { name: 'id', type: 'uint8' }] }] as const,\n        functionName: 'getReserveData',\n        args: (underlyingAddress || isNative) ? [\n            isNative ? '0xCC650b486f723C924370656b509a82bD69526739' as `0x${string}` : underlyingAddress!\n        ] : undefined,\n        query: { enabled: !!address && isRadiant && (!!underlyingAddress || isNative), staleTime: 60 * 60 * 1000 }\n    });\n\n    const radiantATokenAddress = radiantReserveData ? (radiantReserveData as unknown as any[])[7] as `0x${string}` : undefined;\n    const { data: radiantATokenBalance, refetch: refetchRadiant } = useReadContract({\n        address: radiantATokenAddress,\n        abi: ERC20_ABI,\n        functionName: 'balanceOf',\n        args: address ? [address] : undefined,\n        query: { enabled: !!address && isRadiant && !!radiantATokenAddress, refetchInterval: 10000 }\n    });\n\n    let depositedAmount = 0;\n    let depositedAmountUSD = 0;\n\n    if (isVenus && venusData) {\n        if (venusData[0].status === 'success' && venusData[1].status === 'success') {\n            const vBal = venusData[0].result as bigint;\n            const exchangeRate = venusData[1].result as bigint;\n            const rawUnderlying = (vBal * exchangeRate) / BigInt(1e18);\n            depositedAmount = parseFloat(formatUnits(rawUnderlying, decimals));\n        }\n    } else if (isKinza && kinzaReserve) {\n        const data = kinzaReserve as unknown as any[];\n        const aTokenBal = data[0] as bigint;\n        depositedAmount = parseFloat(formatUnits(aTokenBal, decimals));\n    } else if (isRadiant && radiantATokenBalance) {\n        depositedAmount = parseFloat(formatUnits(radiantATokenBalance, decimals));\n    }\n\n    if (depositedAmount === 0 && pool.userDeposited && pool.userDeposited > 0) {\n        depositedAmount = pool.userDeposited;\n    }\n    depositedAmountUSD = depositedAmount * tokenPrice;\n\n    // HEALTH & SAFETY\n    const { venus, kinza, radiant, isLoading: isHealthLoading, refetch: refetchHealth } = useAggregatedHealth();\n    const activeHealth = isVenus ? venus : isKinza ? kinza : radiant;\n    const protocolDebt = activeHealth.debtUSD;\n    const protocolPowerUSD = activeHealth.borrowPowerUSD;\n    const assetLTV = pool.ltv || 0.7;\n\n    const safeWithdrawPower = Math.max(0, protocolPowerUSD - (protocolDebt / 0.95));\n    const safeMaxWithdrawAmount = assetLTV > 0 ? safeWithdrawPower / (assetLTV * tokenPrice) : depositedAmount;\n    const maxSafe = Math.min(depositedAmount, safeMaxWithdrawAmount);\n\n    const withdrawAmount = parseFloat(amount) || 0;\n    const withdrawUSD = withdrawAmount * tokenPrice;\n\n    const newHF = useMemo(() => {\n        if (!withdrawUSD && !amount) return activeHealth.healthFactor || 10;\n        const changeUSD = (parseFloat(amount) || 0) * tokenPrice;\n        if (changeUSD <= 0) return activeHealth.healthFactor || 10;\n\n        let newPower = protocolPowerUSD;\n        let newDebt = protocolDebt;\n        if (activeTab === 'deposit') {\n            newPower += changeUSD * assetLTV;\n        } else {\n            newPower = Math.max(0, protocolPowerUSD - (changeUSD * assetLTV));\n        }\n\n        if (newDebt <= 0) return 10;\n        return newPower / newDebt;\n    }, [activeTab, protocolPowerUSD, protocolDebt, amount, assetLTV, activeHealth.healthFactor, tokenPrice]);\n\n    const isRisky = newHF < 1.1;\n\n    // ALLOWANCE LOGIC\n    // For deposits: Check underlying -> approvalTarget\n    // For native withdrawals (Kinza/Radiant): Check aToken -> Gateway\n    const isNativeWithdraw = activeTab === 'withdraw' && isNative && (isKinza || isRadiant);\n    const kBNB = '0xf5e0ADda6Fb191A332A787DEeDFD2cFFC72Dba0c' as `0x${string}`; // Kinza aToken for BNB\n    const rBNB = '0x40351090037b9c4f6555071e9B24A82B068F2c05' as `0x${string}`; // Radiant aToken for BNB\n\n    const allowanceAddress = isNativeWithdraw\n        ? (isKinza ? kBNB : rBNB)\n        : underlyingAddress;\n    const allowanceSpender = isNativeWithdraw\n        ? (isKinza ? KINZA_GATEWAY : RADIANT_GATEWAY)\n        : approvalTarget;\n\n    const { data: currentAllowance, refetch: refetchAllowance } = useReadContract({\n        address: allowanceAddress,\n        abi: ERC20_ABI,\n        functionName: 'allowance',\n        args: address && allowanceSpender ? [address, allowanceSpender] : undefined,\n        query: { enabled: !!address && !!allowanceAddress && !!allowanceSpender }\n    });\n\n    useEffect(() => {\n        if (isConfirmed) {\n            if (step === 'approving') {\n                setStep('idle');\n                refetchAllowance();\n                toast({\n                    title: \"Asset Approved\",\n                    description: `You can now proceed to ${activeTab}.`,\n                });\n            } else {\n                setStep(\"success\");\n                refetchVenus?.(); refetchKinza?.(); refetchRadiant?.();\n                refetchBalance?.(); refetchToken?.(); refetchHealth?.();\n            }\n        } else if (isConfirming || isPending) {\n            if (step !== 'approving' && step !== 'success') setStep(\"mining\");\n        }\n    }, [isConfirmed, isConfirming, isPending, step, refetchAllowance, refetchVenus, refetchKinza, refetchRadiant, refetchBalance, refetchToken, refetchHealth, activeTab, toast]);\n\n    const handleAction = useCallback(() => {\n        if (!isConnected) { openConnectModal?.(); return; }\n        const amountNum = parseFloat(amount || '0');\n        if (amountNum <= 0) return;\n        const amountBig = parseUnits(amount, decimals);\n\n        try {\n            if (activeTab === 'deposit') {\n                const needsApproval = !isNative && underlyingAddress && approvalTarget && (currentAllowance || BigInt(0)) < amountBig;\n                if (isVenus) {\n                    if (isNative && vTokenAddress) {\n                        writeContract({ address: vTokenAddress, abi: VBNB_ABI, functionName: 'mint', value: amountBig });\n                    } else if (!isNative && vTokenAddress) {\n                        if (needsApproval) {\n                            setStep('approving');\n                            writeContract({ address: underlyingAddress, abi: ERC20_ABI, functionName: 'approve', args: [approvalTarget!, maxUint256] });\n                        } else {\n                            writeContract({ address: vTokenAddress, abi: VTOKEN_ABI, functionName: 'mint', args: [amountBig] });\n                        }\n                    }\n                } else if (isKinza || isRadiant) {\n                    const poolAddress = isKinza ? KINZA_POOL : RADIANT_LENDING_POOL;\n                    if (isNative) {\n                        const gatewayAddress = isKinza ? KINZA_GATEWAY : RADIANT_GATEWAY;\n                        if (gatewayAddress) {\n                            writeContract({ address: gatewayAddress, abi: WETH_GATEWAY_ABI, functionName: 'depositETH', args: [poolAddress, address!, 0], value: amountBig });\n                        }\n                    } else {\n                        if (needsApproval) {\n                            setStep('approving');\n                            writeContract({ address: underlyingAddress, abi: ERC20_ABI, functionName: 'approve', args: [approvalTarget!, amountBig] });\n                        } else {\n                            if (isKinza) writeContract({ address: KINZA_POOL, abi: KINZA_POOL_ABI, functionName: 'supply', args: [underlyingAddress!, amountBig, address!, 0] });\n                            else writeContract({ address: RADIANT_LENDING_POOL, abi: RADIANT_POOL_ABI, functionName: 'deposit', args: [underlyingAddress!, amountBig, address!, 0] });\n                        }\n                    }\n                }\n            } else {\n                if (isVenus) {\n                    if (vTokenAddress) {\n                        if (collateral?.isCollateral && parseFloat(amount) > (collateral.maxWithdrawable || 0)) {\n                            toast({ title: \"Cannot Withdraw\", description: \"This withdrawal would put your account underwater. Repay some debt first.\", variant: \"destructive\" });\n                            setStep('idle'); return;\n                        }\n                        if (isNative) writeContract({ address: vTokenAddress, abi: VBNB_ABI, functionName: 'redeemUnderlying', args: [amountBig] });\n                        else writeContract({ address: vTokenAddress, abi: VTOKEN_ABI, functionName: 'redeemUnderlying', args: [amountBig] });\n                    }\n                } else if (isKinza || isRadiant) {\n                    const poolAddress = isKinza ? KINZA_POOL : RADIANT_LENDING_POOL;\n                    const gatewayAddress = isKinza ? KINZA_GATEWAY : RADIANT_GATEWAY;\n                    if (isNative) {\n                        const needsWithdrawApproval = (currentAllowance || BigInt(0)) < amountBig;\n                        if (needsWithdrawApproval) {\n                            setStep('approving');\n                            writeContract({ address: allowanceAddress!, abi: ERC20_ABI, functionName: 'approve', args: [allowanceSpender!, maxUint256] });\n                        } else {\n                            if (gatewayAddress) writeContract({ address: gatewayAddress, abi: WETH_GATEWAY_ABI, functionName: 'withdrawETH', args: [poolAddress, amountBig, address!] });\n                        }\n                    } else {\n                        if (isKinza) writeContract({ address: KINZA_POOL, abi: KINZA_POOL_ABI, functionName: 'withdraw', args: [underlyingAddress!, amountBig, address!] });\n                        else writeContract({ address: RADIANT_LENDING_POOL, abi: RADIANT_POOL_ABI, functionName: 'withdraw', args: [underlyingAddress!, amountBig, address!] });\n                    }\n                }\n            }\n        } catch (e) { console.error(e); }\n    }, [amount, activeTab, isConnected, isNative, isVenus, isKinza, isRadiant, address, vTokenAddress, underlyingAddress, approvalTarget, currentAllowance, decimals, step, refetchAllowance, refetchVenus, refetchKinza, refetchRadiant, toast, collateral]);\n\n    const isWithdrawBlocked = activeTab === 'withdraw' && isVenus && collateral.isCollateral && collateral.borrowBalance > 0 && collateral.maxWithdrawable === 0;\n    const maxWithdrawableAvailable = isVenus && collateral.isCollateral ? collateral.maxWithdrawable : depositedAmount;\n\n    const setHalf = () => {\n        const base = activeTab === 'deposit' ? walletBalance : maxWithdrawableAvailable;\n        setAmount(toPlainString(base / 2));\n    };\n    const setMax = () => {\n        if (activeTab === 'deposit') {\n            const max = isNative && walletBalance > 0.01 ? walletBalance - 0.01 : walletBalance;\n            setAmount(toPlainString(max));\n        } else {\n            setAmount(toPlainString(maxWithdrawableAvailable));\n        }\n    };\n\n    const amountNum = parseFloat(amount || '0');\n    const isButtonDisabled = !amount || amountNum <= 0 || step === 'mining' || step === 'approving' || step === 'success' || isWithdrawBlocked;\n    const protocolDisplay = isVenus ? 'Venus' : isKinza ? 'Kinza' : isRadiant ? 'Radiant' : pool.project;\n\n    return (\n        <div className=\"flex-1 flex flex-col min-h-0 overflow-hidden\">\n            {/* Scrollable Content Body */}\n            <div className=\"flex-1 overflow-y-auto scrollbar-hide\">\n                {!isEmbedded && (\n                    <div className=\"p-4 md:p-6 pb-2 md:pb-4 border-b border-white/5 bg-[#09090b] sticky top-0 z-20\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                                <AssetIcon symbol={pool.symbol} className=\"w-8 h-8 md:w-10 md:h-10\" />\n                                <div>\n                                    <h2 className=\"text-lg md:text-xl font-bold\">{pool.symbol}</h2>\n                                    <div className=\"flex items-center gap-2 text-[10px] md:text-xs text-muted-foreground\">\n                                        <span className=\"uppercase\">{protocolDisplay}</span>\n                                        <span className=\"w-1 h-1 bg-white/20 rounded-full\" />\n                                        <span className=\"text-emerald-400 font-medium\">Earn Market</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <button onClick={onClose} className=\"p-2 hover:bg-white/5 rounded-full transition-colors text-muted-foreground hover:text-white\">\n                                <X size={20} />\n                            </button>\n                        </div>\n                    </div>\n                )}\n\n                <div className=\"px-4 md:px-6 pt-4 md:pt-6 mb-3 md:mb-5\">\n                    <div className=\"bg-white/[0.02] border border-white/5 rounded-2xl p-0 shadow-2xl relative overflow-hidden\">\n                        {/* Compact Header for Collapsible Stats */}\n                        <button\n                            onClick={() => setIsStatsExpanded(!isStatsExpanded)}\n                            className=\"w-full text-left p-3 md:p-4 flex items-center justify-between group/stats relative z-20\"\n                        >\n                            <div className=\"flex items-center gap-2.5\">\n                                <div className=\"p-1.5 rounded-lg bg-white/5 flex items-center justify-center\">\n                                    <AssetIcon symbol={pool.symbol} size={16} className=\"opacity-80\" />\n                                </div>\n                                <div className=\"flex flex-col\">\n                                    <span className=\"text-[9px] uppercase text-muted-foreground/50 font-black tracking-tighter\">Your Position</span>\n                                    <span className=\"text-sm font-black font-mono tracking-tight text-white\">\n                                        {formatSmallNumber(depositedAmount)} {pool.symbol}\n                                    </span>\n                                </div>\n                            </div>\n                            <div className=\"flex items-center gap-3\">\n                                <div className=\"hidden sm:flex flex-col text-right\">\n                                    <span className=\"text-[9px] uppercase text-muted-foreground/30 font-black tracking-widest\">Yield APY</span>\n                                    <span className=\"text-emerald-400 font-black font-mono text-xs\">+{pool.apy.toFixed(2)}%</span>\n                                </div>\n                                <motion.div\n                                    animate={{ rotate: isStatsExpanded ? 180 : 0 }}\n                                    className=\"p-1 rounded-full bg-white/5 border border-white/10 text-muted-foreground group-hover/stats:text-white transition-colors\"\n                                >\n                                    <ArrowUpDown size={14} />\n                                </motion.div>\n                            </div>\n                        </button>\n\n                        <AnimatePresence>\n                            {isStatsExpanded && (\n                                <motion.div\n                                    initial={{ height: 0, opacity: 0 }}\n                                    animate={{ height: \"auto\", opacity: 1 }}\n                                    exit={{ height: 0, opacity: 0 }}\n                                    className=\"overflow-hidden border-t border-white/5 bg-white/[0.01]\"\n                                >\n                                    <div className=\"p-3 md:p-5 pt-4 space-y-4\">\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div>\n                                                <div className=\"text-[9px] md:text-[10px] uppercase text-muted-foreground/30 font-black tracking-tighter mb-1\">Total Value (USD)</div>\n                                                <div className=\"text-lg font-black font-mono tracking-tighter text-white\">\n                                                    {formatMoney(depositedAmountUSD)}\n                                                </div>\n                                            </div>\n                                            <div className=\"text-right flex flex-col items-end justify-center\">\n                                                {isVenus && (\n                                                    <>\n                                                        <div className=\"text-[9px] md:text-[10px] uppercase text-muted-foreground/30 font-black tracking-tighter mb-1.5\">Collateral</div>\n                                                        {collateral.isLoading ? (\n                                                            <Loader2 className=\"w-3 h-3 animate-spin text-muted-foreground/20\" />\n                                                        ) : collateral.isCollateral ? (\n                                                            <div className=\"px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-1\">\n                                                                <div className=\"w-1 h-1 rounded-full bg-emerald-500\" />\n                                                                <span className=\"text-[10px] md:text-xs font-black text-emerald-500 uppercase italic\">ACTIVE</span>\n                                                            </div>\n                                                        ) : (\n                                                            <div className=\"px-2 py-0.5 rounded-full bg-white/5 border border-white/10 text-[10px] md:text-xs font-black text-muted-foreground/40 uppercase italic\">DISABLED</div>\n                                                        )}\n                                                    </>\n                                                )}\n                                            </div>\n                                        </div>\n\n                                        <div className=\"grid grid-cols-2 gap-3 pt-3 border-t border-white/5\">\n                                            <div className=\"flex flex-col\">\n                                                <span className=\"text-[9px] uppercase text-muted-foreground/30 font-black tracking-widest mb-0.5\">Market Size</span>\n                                                <span className=\"text-white font-black text-sm tracking-tight\">{formatMoney(pool.tvlUsd)}</span>\n                                            </div>\n                                            <div className=\"flex flex-col text-right\">\n                                                <span className=\"text-[9px] uppercase text-muted-foreground/30 font-black tracking-widest mb-0.5\">Protocol</span>\n                                                <span className=\"text-white/60 font-black text-[10px] uppercase italic tracking-tighter\">{protocolDisplay}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </motion.div>\n                            )}\n                        </AnimatePresence>\n                    </div>\n                </div>\n\n                <div className=\"px-4 md:px-6 mb-4\">\n                    <div className=\"bg-[#121216] rounded-xl p-1 flex relative\">\n                        <motion.div className=\"absolute top-1 bottom-1 bg-[#1a1a20] rounded-lg shadow-sm\" initial={false} animate={{ left: activeTab === 'deposit' ? '4px' : '50%', width: 'calc(50% - 4px)' }} transition={{ type: \"spring\", stiffness: 300, damping: 30 }} />\n                        <button onClick={() => { setActiveTab('deposit'); setAmount(''); resetWrite(); setStep('idle'); }} className={`flex-1 relative z-10 py-1.5 md:py-2 text-sm font-bold transition-colors ${activeTab === 'deposit' ? 'text-white' : 'text-muted-foreground hover:text-white/70'}`}>Deposit</button>\n                        <button onClick={() => { setActiveTab('withdraw'); setAmount(''); resetWrite(); setStep('idle'); }} className={`flex-1 relative z-10 py-1.5 md:py-2 text-sm font-bold transition-colors ${activeTab === 'withdraw' ? 'text-white' : 'text-muted-foreground hover:text-white/70'}`}>Withdraw</button>\n                    </div>\n                </div>\n\n                <div className=\"px-4 md:px-6 pb-5 text-white\">\n                    <div className=\"bg-black/40 border border-white/5 rounded-2xl p-3.5 md:p-5 mb-4 shadow-inner relative overflow-hidden group\">\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <span className=\"text-[10px] md:text-xs uppercase text-muted-foreground/60 font-black tracking-widest italic\">{activeTab === 'deposit' ? 'Supply' : 'Withdraw'}</span>\n                            <div className=\"flex gap-1.5\">\n                                {activeTab === 'withdraw' && (\n                                    <button onClick={() => setAmount(toPlainString(maxSafe))} className=\"text-[9px] md:text-[10px] text-emerald-400 font-black italic border border-emerald-400/20 px-2 py-1 rounded-md hover:bg-emerald-400/10 transition-colors uppercase tracking-tighter bg-emerald-400/5\">Safe Max</button>\n                                )}\n                                <button className=\"text-[9px] md:text-[10px] bg-white/5 hover:bg-white/10 px-2 py-1 rounded-md transition-all font-black uppercase text-muted-foreground/60 hover:text-white border border-white/10\" onClick={setHalf}>Half</button>\n                                <button className=\"text-[9px] md:text-[10px] bg-white/5 hover:bg-white/10 px-2 py-1 rounded-md transition-all font-black uppercase text-muted-foreground/60 hover:text-white border border-white/10\" onClick={setMax}>Max</button>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"flex items-center gap-2 bg-white/5 px-2.5 py-1.5 rounded-xl border border-white/10 transition-transform group-focus-within:scale-95 duration-500\">\n                                <AssetIcon symbol={pool.symbol} className=\"w-5 h-5 md:w-6 md:h-6\" />\n                                <span className=\"font-black text-xs md:text-sm\">{pool.symbol}</span>\n                            </div>\n                            <input\n                                type=\"number\"\n                                placeholder=\"0.00\"\n                                className=\"bg-transparent text-right text-3xl md:text-4xl font-black font-mono tracking-tighter w-full outline-none placeholder:text-white/5 text-white\"\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                            />\n                        </div>\n                        <div className=\"flex justify-between items-center text-[10px] md:text-xs mt-4 pt-3 border-t border-white/[0.03]\">\n                            <div className=\"text-muted-foreground/40 font-bold uppercase italic\">\n                                {activeTab === 'deposit' ? 'Balance' : 'Available'}\n                                <span className=\"text-white/60 font-black ml-1.5 not-italic\">{formatSmallNumber(activeTab === 'deposit' ? walletBalance : maxWithdrawableAvailable)}</span>\n                            </div>\n                            <div className=\"text-muted-foreground/30 font-black italic\">≈ {formatMoney(amountNum * tokenPrice)}</div>\n                        </div>\n                    </div>\n\n                    {activeTab === 'withdraw' && isVenus && collateral.isCollateral && (\n                        <div className=\"flex items-start gap-2 p-2 md:p-3 rounded-xl bg-amber-500/10 border border-amber-500/20 shadow-lg\">\n                            <AlertTriangle className=\"w-3.5 h-3.5 md:w-4 md:h-4 text-amber-500 shrink-0 mt-0.5\" />\n                            <div className=\"text-[10px] md:text-[11px] text-amber-100 font-medium leading-relaxed\">\n                                This asset is currently enabled as <span className=\"font-bold text-amber-400\">Collateral</span>. You must turn off its collateral status in the <span className=\"font-bold text-amber-400\">Portfolio</span> before it can be fully withdrawn.\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"bg-[#121216] border border-white/5 rounded-2xl p-3 md:p-4 space-y-2 md:space-y-3 mb-4 mx-4 md:mx-6\">\n                    <div className=\"flex justify-between items-center text-[9px] md:text-[10px] font-bold uppercase tracking-wider text-muted-foreground/60\">\n                        <span>{activeTab === 'deposit' ? 'Asset Quality & Impact' : 'Transaction Impact'}</span>\n                    </div>\n                    <div className=\"flex justify-between items-center w-full\">\n                        <span className=\"text-[10px] md:text-xs text-muted-foreground font-medium\">{activeTab === 'deposit' ? 'Collateral Buffer' : 'Health Factor'}</span>\n                        {activeTab === 'deposit' ? (\n                            <div className=\"flex items-center gap-2\">\n                                <span className=\"text-xs md:text-sm font-bold text-[#CEFF00]\">{((pool.ltv || 0) * 100).toFixed(0)}% LTV</span>\n                                {(parseFloat(amount) || 0) > 0 && (<><ArrowRight className=\"w-2.5 h-2.5 md:w-3 md:h-3 text-muted-foreground/30\" /><span className=\"text-[10px] md:text-xs font-bold text-white/60\">HF: {newHF > 5 ? '> 5.0' : newHF.toFixed(2)}</span></>)}\n                            </div>\n                        ) : (\n                            <div className=\"flex items-center gap-2\"><span className=\"text-[10px] md:text-xs font-bold text-white/40\">{(activeHealth.healthFactor || 10) > 5 ? '5.0' : activeHealth.healthFactor.toFixed(2)}</span><ArrowRight className=\"w-2.5 h-2.5 md:w-3 md:h-3 text-muted-foreground/30\" /><span className={cn(\"text-xs md:text-sm font-bold\", newHF < 1.1 ? \"text-red-400\" : newHF < 1.5 ? \"text-amber-400\" : \"text-[#CEFF00]\")}>{newHF > 5 ? '> 5.0' : (newHF || 0).toFixed(2)}</span></div>\n                        )}\n                    </div>\n                    {((activeTab === 'withdraw' && withdrawUSD > 0) || (activeTab === 'deposit' && (parseFloat(amount) || 0) > 0)) && (\n                        <div className=\"relative h-1 w-full bg-white/5 rounded-full overflow-hidden\"><motion.div className={cn(\"h-full bg-gradient-to-r\", activeTab === 'deposit' ? \"from-emerald-600 to-[#CEFF00]\" : (newHF < 1.1 ? \"from-red-500 to-orange-500\" : \"from-[#CEFF00] to-emerald-400\"))} initial={{ width: 0 }} animate={{ width: activeTab === 'deposit' ? '100%' : `${Math.min(100, (1 / (newHF || 1)) * 100)}%` }} transition={{ duration: 0.5 }} /></div>\n                    )}\n                    <div className=\"flex justify-between w-full text-[10px] md:text-xs items-center pt-1 border-t border-white/5\"><span className=\"text-muted-foreground\">Earning APY</span><span className=\"text-emerald-400 font-mono font-bold\">{pool.apy.toFixed(2)}%</span></div>\n                </div>\n\n                {isRisky && activeTab === 'withdraw' && (\n                    <div className=\"p-2 md:p-3 rounded-xl bg-red-500/10 border border-red-500/20 flex gap-2 md:gap-3 items-start mb-4 mx-4 md:mx-6\"><ShieldAlert className=\"w-3.5 h-3.5 md:w-4 md:h-4 text-red-400 mt-0.5 flex-shrink-0\" /><p className=\"text-[10px] md:text-[11px] text-red-200\">Warning: This withdrawal will put your account at risk of liquidation. Repay some debt or leave more collateral to stay safe.</p></div>\n                )}\n            </div>\n\n            {/* Sticky Footer */}\n            <div className=\"p-4 md:p-6 pb-5 md:pb-6 border-t border-white/5 bg-[#09090b]/90 backdrop-blur-md shrink-0\">\n                <Button\n                    onClick={handleAction}\n                    disabled={isButtonDisabled}\n                    className={`w-full h-14 md:h-16 text-xl md:text-2xl font-black rounded-2xl md:rounded-3xl transition-all relative overflow-hidden group/btn ${step === 'success'\n                        ? 'bg-emerald-500 hover:bg-emerald-500 shadow-[0_0_30px_rgba(16,185,129,0.4)]'\n                        : activeTab === 'deposit'\n                            ? 'bg-emerald-500 hover:bg-emerald-400 text-black shadow-[0_10px_40px_rgba(16,185,129,0.2)]'\n                            : 'bg-white hover:bg-gray-200 text-black shadow-[0_10px_40px_rgba(255,255,255,0.1)]'\n                        }`}\n                >\n                    <div className=\"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/5 to-white/0 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-1000\" />\n                    <AnimatePresence mode=\"wait\">\n                        {step === 'idle' && (\n                            <motion.span\n                                key=\"idle\"\n                                initial={{ opacity: 0, scale: 0.9 }}\n                                animate={{ opacity: 1, scale: 1 }}\n                                exit={{ opacity: 0, scale: 1.1 }}\n                                className=\"uppercase italic tracking-tighter\"\n                            >\n                                {!isConnected ? 'Connect Wallet' : activeTab === 'deposit' ? 'Confirm Supply' : 'Confirm Withdraw'}\n                            </motion.span>\n                        )}\n                        {step === 'approving' && (<motion.div key=\"approving\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"flex items-center gap-3\"><Loader2 className=\"w-6 h-6 animate-spin\" /><span className=\"uppercase italic\">Permissioning...</span></motion.div>)}\n                        {step === 'mining' && (<motion.div key=\"mining\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"flex items-center gap-3\"><Loader2 className=\"w-6 h-6 animate-spin\" /><span className=\"uppercase italic\">Broadcasting...</span></motion.div>)}\n                        {step === 'success' && (<motion.div key=\"success\" initial={{ opacity: 0, scale: 0.5 }} animate={{ opacity: 1, scale: 1 }} className=\"flex items-center gap-3 text-white uppercase italic\"><div className=\"bg-white text-emerald-500 rounded-full p-1\"><Check className=\"w-5 h-5 stroke-[4]\" /></div><span>Complete</span></motion.div>)}\n                    </AnimatePresence>\n                </Button>\n            </div>\n        </div>\n    );\n}\n\nexport function EarnModal({ isOpen, onClose, pool }: EarnModalProps) {\n    if (!isOpen) return null;\n    return (\n        <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n            <DialogContent className=\"w-[95vw] sm:max-w-[420px] max-h-[90vh] overflow-y-auto bg-[#09090b] border-white/10 text-white p-0 gap-0 rounded-3xl scrollbar-hide\">\n                <EarnModalContent onClose={onClose} pool={pool} isEmbedded={false} />\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\EarnTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1288,1291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1288,1291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2918,2921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2918,2921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2974,2977],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2974,2977],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3389,3392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3389,3392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3515,3518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3515,3518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3651,3654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3651,3654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\EarnTable.tsx:137:21\n  135 |                 );\n  136 |                 if (foundPool) {\n> 137 |                     setSelectedPool(foundPool);\n      |                     ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  138 |                     lastUrlKey.current = currentUrlKey;\n  139 |                 }\n  140 |             } else if (!currentUrlKey) {","line":137,"column":21,"nodeType":null,"endLine":137,"endColumn":36},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":172,"column":33,"nodeType":"JSXOpeningElement","endLine":172,"endColumn":125},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":237,"column":57,"nodeType":"JSXOpeningElement","endLine":237,"endColumn":143},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":318,"column":57,"nodeType":"JSXOpeningElement","endLine":318,"endColumn":143}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useMemo, useState, useEffect, useRef } from 'react';\nimport { useSearchParams, useRouter, usePathname } from 'next/navigation';\nimport { useAccount } from 'wagmi';\nimport { useYields } from \"@/hooks/useYields\";\nimport { useVenusPortfolio } from '@/hooks/useVenusPortfolio';\nimport { useKinzaPortfolio } from '@/hooks/useKinzaPortfolio';\nimport { useRadiantPortfolio } from '@/hooks/useRadiantPortfolio';\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { ChevronRight, LayoutGrid, List, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\nimport { Card } from \"@/components/ui/card\";\nimport { MarketModal } from \"./MarketModal\";\nimport { formatMoney, formatTokenAmount } from \"@/lib/utils\";\nimport { ACTIVE_PROTOCOLS, getProtocolIcon, getProtocolLabel } from '@/lib/protocols';\n\nexport function EarnTable() {\n    const { address } = useAccount();\n    const { data: yields, isLoading: isYieldsLoading } = useYields();\n    const { positions: venusPositions, isLoading: isVenusLoading } = useVenusPortfolio();\n    const { positions: kinzaPositions, isLoading: isKinzaLoading } = useKinzaPortfolio();\n    const { positions: radiantPositions, isLoading: isRadiantLoading } = useRadiantPortfolio();\n\n    const [selectedPool, setSelectedPool] = useState<any>(null);\n    const [viewMode, setViewMode] = useState<'list' | 'card'>('list');\n    const [selectedProtocol, setSelectedProtocol] = useState<string | null>(null);\n    const [sortConfig, setSortConfig] = useState<{ column: 'apy' | 'default', direction: 'asc' | 'desc' | 'none' }>({\n        column: 'default',\n        direction: 'none'\n    });\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    const PROTOCOLS = useMemo(\n        () =>\n            ACTIVE_PROTOCOLS.map((protocol) => ({\n                id: protocol.id,\n                name: protocol.label,\n                img: protocol.icon,\n            })),\n        [],\n    );\n\n    const toggleApySort = () => {\n        setSortConfig(prev => {\n            if (prev.column !== 'apy') return { column: 'apy', direction: 'desc' };\n            if (prev.direction === 'desc') return { column: 'apy', direction: 'asc' };\n            if (prev.direction === 'asc') return { column: 'apy', direction: 'none' };\n            return { column: 'apy', direction: 'desc' };\n        });\n    };\n\n    const handleClose = () => {\n        setSelectedPool(null);\n        // Clear URL search parameters to prevent the deep-linking useEffect from re-opening it\n        if (searchParams.get('asset')) {\n            router.replace(pathname, { scroll: false });\n        }\n    };\n\n    const isLoading = isYieldsLoading || (!!address && (isVenusLoading || isKinzaLoading || isRadiantLoading));\n\n    // Map positions for O(1) lookup: key = `${protocol}-${symbol}`\n    const positionMap = useMemo(() => {\n        const map = new Map<string, any>();\n\n        const addPosition = (key: string, pos: any) => {\n            if (map.has(key)) {\n                const existing = map.get(key);\n                existing.supply += pos.supply;\n                existing.supplyUSD += pos.supplyUSD;\n                existing.borrow += pos.borrow;\n                existing.borrowUSD += pos.borrowUSD;\n            } else {\n                map.set(key, { ...pos });\n            }\n        };\n\n        venusPositions.forEach((pos: any) => {\n            addPosition(`venus-${pos.symbol}`.toUpperCase(), pos);\n        });\n        kinzaPositions.forEach((pos: any) => {\n            addPosition(`kinza-finance-${pos.symbol}`.toUpperCase(), pos);\n        });\n        radiantPositions.forEach((pos: any) => {\n            addPosition(`radiant-v2-${pos.symbol}`.toUpperCase(), pos);\n        });\n\n        return map;\n    }, [venusPositions, kinzaPositions, radiantPositions]);\n\n    const earningsData = useMemo(() => {\n        if (!yields) return [];\n\n        let data = yields.filter(pool => pool.apy > 0);\n\n        // Filter by protocol\n        if (selectedProtocol) {\n            data = data.filter(pool => pool.project === selectedProtocol);\n        }\n\n        // Sort\n        return data.sort((a, b) => {\n            if (sortConfig.column === 'apy' && sortConfig.direction !== 'none') {\n                return sortConfig.direction === 'desc' ? b.apy - a.apy : a.apy - b.apy;\n            }\n\n            // Default Sort: User Supply USD (desc) then TVL (desc)\n            const keyA = `${a.project}-${a.symbol}`.toUpperCase();\n            const keyB = `${b.project}-${b.symbol}`.toUpperCase();\n            const posA = positionMap.get(keyA);\n            const posB = positionMap.get(keyB);\n            const supplyA = posA?.supplyUSD || 0;\n            const supplyB = posB?.supplyUSD || 0;\n\n            if (supplyA !== supplyB) return supplyB - supplyA;\n            return (b.tvlUsd || 0) - (a.tvlUsd || 0);\n        });\n    }, [yields, selectedProtocol, sortConfig, positionMap]);\n\n    const lastUrlKey = useRef<string | null>(null);\n\n    // Handle Deep Linking (Auto-open modal)\n    useEffect(() => {\n        const assetQuery = searchParams.get('asset');\n        const protocolQuery = searchParams.get('protocol');\n        const currentUrlKey = assetQuery ? `${assetQuery}-${protocolQuery || 'any'}` : null;\n\n        if (earningsData.length > 0) {\n            if (currentUrlKey && currentUrlKey !== lastUrlKey.current) {\n                const foundPool = earningsData.find(pool =>\n                    pool.symbol.toUpperCase() === assetQuery!.toUpperCase() &&\n                    (!protocolQuery || pool.project.toLowerCase() === protocolQuery.toLowerCase())\n                );\n                if (foundPool) {\n                    setSelectedPool(foundPool);\n                    lastUrlKey.current = currentUrlKey;\n                }\n            } else if (!currentUrlKey) {\n                lastUrlKey.current = null;\n            }\n        }\n    }, [earningsData, searchParams]);\n\n    if (isLoading) {\n        return (\n            <div className=\"space-y-4\">\n                {[1, 2, 3, 4, 5].map(i => (\n                    <div key={i} className=\"h-20 bg-muted/10 rounded-xl animate-pulse\" />\n                ))}\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Toolbar */}\n            <div className=\"flex items-center justify-between mb-6\">\n                <button className=\"px-4 py-1.5 rounded-full bg-[#1A1A1E] text-white text-sm font-medium border border-emerald-500/20 text-emerald-400\">\n                    Earn\n                </button>\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-2\">\n                        {PROTOCOLS.map(proto => (\n                            <button\n                                key={proto.id}\n                                onClick={() => setSelectedProtocol(selectedProtocol === proto.id ? null : proto.id)}\n                                className={`w-8 h-8 rounded-full border-2 transition-all flex items-center justify-center overflow-hidden bg-black/40 ${selectedProtocol === proto.id ? 'border-emerald-500 scale-110 shadow-[0_0_12px_rgba(16,185,129,0.4)]' : 'border-white/5 opacity-50 hover:opacity-100 hover:border-white/20'}`}\n                                title={proto.name}\n                            >\n                                <img src={proto.img} className=\"w-full h-full object-cover rounded-full\" alt={proto.name} />\n                            </button>\n                        ))}\n                    </div>\n                    <div className=\"hidden md:flex items-center gap-2 bg-muted/20 p-1 rounded-lg\">\n                        <button\n                            onClick={() => setViewMode('card')}\n                            className={`p-1.5 rounded-md transition-all ${viewMode === 'card' ? 'bg-muted text-white shadow-sm' : 'text-muted-foreground hover:text-white'}`}\n                        >\n                            <LayoutGrid className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                            onClick={() => setViewMode('list')}\n                            className={`p-1.5 rounded-md transition-all ${viewMode === 'list' ? 'bg-muted text-white shadow-sm' : 'text-muted-foreground hover:text-white'}`}\n                        >\n                            <List className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            {/* List View */}\n            {viewMode === 'list' && (\n                <>\n                    {/* Table Header */}\n                    <div className=\"grid grid-cols-12 gap-2 md:gap-4 px-2 md:px-6 py-2 text-[10px] md:text-xs font-semibold text-muted-foreground uppercase tracking-wider\">\n                        <div className=\"col-span-5 md:col-span-4\">Vault</div>\n                        <div\n                            className=\"col-span-3 md:col-span-2 text-right cursor-pointer hover:text-white transition-colors flex items-center justify-end gap-1\"\n                            onClick={toggleApySort}\n                        >\n                            APY\n                            {sortConfig.column === 'apy' && sortConfig.direction === 'desc' && <ArrowDown className=\"w-3 h-3 text-emerald-500\" />}\n                            {sortConfig.column === 'apy' && sortConfig.direction === 'asc' && <ArrowUp className=\"w-3 h-3 text-emerald-500\" />}\n                            {(sortConfig.column !== 'apy' || sortConfig.direction === 'none') && <ArrowUpDown className=\"w-3 h-3 opacity-30\" />}\n                        </div>\n                        <div className=\"hidden md:block col-span-2 text-right\">Deposited</div>\n                        <div className=\"hidden md:block col-span-2 text-right\">Earnings</div>\n                        <div className=\"col-span-4 md:col-span-2 text-right pr-2 md:pr-0\">TVL</div>\n                    </div>\n\n                    {/* Table Body */}\n                    <div className=\"space-y-2\">\n                        {earningsData.map((pool) => {\n                            const protocolDisplay = getProtocolLabel(pool.project);\n                            const protocolImg = getProtocolIcon(pool.project);\n\n                            // Lookup position (Case-insensitive matching)\n                            const userPosition = positionMap.get(`${pool.project}-${pool.symbol}`.toUpperCase());\n                            const depositedAmount = userPosition ? userPosition.supply : 0;\n                            const depositedUSD = userPosition ? userPosition.supplyUSD : 0;\n\n                            return (\n                                <div\n                                    key={`${pool.pool}-${pool.project}`}\n                                    className=\"group relative bg-[#0f0f12] hover:bg-[#16161a] border border-white/5 hover:border-white/10 rounded-xl md:rounded-2xl transition-all duration-300 cursor-pointer\"\n                                    onClick={() => setSelectedPool(pool)}\n                                >\n                                    <div className=\"grid grid-cols-12 gap-2 md:gap-4 px-2 md:px-6 py-3 md:py-5 items-center\">\n                                        {/* Vault */}\n                                        <div className=\"col-span-5 md:col-span-4 flex items-center gap-2 md:gap-4\">\n                                            <div className=\"relative flex-shrink-0\">\n                                                <AssetIcon symbol={pool.symbol} className=\"w-6 h-6 md:w-10 md:h-10\" />\n                                                {protocolImg && (\n                                                    <div className=\"absolute -bottom-1 -right-1 w-3 h-3 md:w-5 md:h-5 rounded-full border border-[#0f0f12] bg-white overflow-hidden\">\n                                                        <img src={protocolImg} className=\"w-full h-full object-cover\" alt={protocolDisplay} />\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div className=\"flex flex-col min-w-0\">\n                                                <span className=\"font-bold text-white text-xs md:text-base truncate leading-tight\">{pool.symbol}</span>\n                                                <span className=\"text-[9px] md:text-xs text-muted-foreground truncate leading-tight\">{protocolDisplay}</span>\n                                            </div>\n                                        </div>\n\n                                        {/* APY */}\n                                        <div className=\"col-span-3 md:col-span-2 text-right\">\n                                            <div className=\"flex flex-col md:flex-row items-end md:items-center justify-end gap-0.5 md:gap-1.5 font-mono text-emerald-400 font-bold text-xs md:text-base\">\n                                                <span>{pool.apy.toFixed(2)}%</span>\n                                            </div>\n                                        </div>\n\n                                        {/* Deposited */}\n                                        <div className=\"hidden md:block col-span-2 text-right font-mono text-sm\">\n                                            {depositedAmount > 0 ? (\n                                                <div className=\"flex flex-col items-end\">\n                                                    <span className=\"text-white font-medium\">{formatTokenAmount(depositedAmount)} {pool.symbol}</span>\n                                                    <span className=\"text-xs text-muted-foreground\">{formatMoney(depositedUSD)}</span>\n                                                </div>\n                                            ) : (\n                                                <span className=\"text-muted-foreground\">-</span>\n                                            )}\n                                        </div>\n\n                                        {/* Earnings */}\n                                        <div className=\"hidden md:block col-span-2 text-right font-mono text-muted-foreground text-sm\">\n                                            -\n                                        </div>\n\n                                        {/* TVL */}\n                                        <div className=\"col-span-4 md:col-span-2 flex items-center justify-end pl-0 md:pl-4 gap-1\">\n                                            <div className=\"flex flex-col items-end flex-1 min-w-0\">\n                                                <span className=\"font-bold text-white text-[10px] md:text-sm max-w-full truncate\">{formatMoney(pool.tvlUsd)}</span>\n                                                <span className=\"text-[9px] md:text-xs text-muted-foreground\">\n                                                    {depositedUSD > 0 ? `Your: ${formatMoney(depositedUSD)}` : formatMoney(pool.tvlUsd)}\n                                                </span>\n                                            </div>\n\n                                            <div\n                                                className=\"ml-1 md:ml-4 flex-shrink-0 w-5 h-5 md:w-8 md:h-8 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors group-hover:border-emerald-500/50 group-hover:text-emerald-500\"\n                                            >\n                                                <ChevronRight className=\"w-3 h-3 md:w-4 md:h-4\" />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </>\n            )}\n\n            {/* Card View */}\n            {viewMode === 'card' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {earningsData.map((pool) => {\n                        const protocolDisplay = getProtocolLabel(pool.project);\n                        const protocolImg = getProtocolIcon(pool.project);\n\n                        // Lookup position (Case-insensitive matching)\n                        const userPosition = positionMap.get(`${pool.project}-${pool.symbol}`.toUpperCase());\n                        const depositedUSD = userPosition ? userPosition.supplyUSD : 0;\n\n                        return (\n                            <Card\n                                key={`${pool.pool}-${pool.project}`}\n                                className=\"bg-[#0f0f12] border-white/5 hover:border-emerald-500/30 transition-all cursor-pointer group overflow-hidden\"\n                                onClick={() => setSelectedPool(pool)}\n                            >\n                                <div className=\"p-6 space-y-4\">\n                                    <div className=\"flex items-start justify-between\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"relative\">\n                                                <AssetIcon symbol={pool.symbol} className=\"w-10 h-10\" />\n                                                {protocolImg && (\n                                                    <div className=\"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border border-[#0f0f12] bg-white overflow-hidden\">\n                                                        <img src={protocolImg} className=\"w-full h-full object-cover\" alt={protocolDisplay} />\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div>\n                                                <h3 className=\"font-bold text-lg leading-tight\">{pool.symbol}</h3>\n                                                <p className=\"text-xs text-muted-foreground\">{protocolDisplay}</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className=\"text-xs text-muted-foreground uppercase tracking-wider mb-0.5\">APY</div>\n                                            <div className=\"font-mono text-xl font-bold text-emerald-400\">\n                                                {pool.apy.toFixed(2)}%\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"grid grid-cols-2 gap-4 py-4 border-t border-white/5\">\n                                        <div>\n                                            <div className=\"text-[10px] text-muted-foreground uppercase tracking-wider mb-1\">My Deposit</div>\n                                            <div className=\"font-mono font-medium\">{formatMoney(depositedUSD)}</div>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className=\"text-[10px] text-muted-foreground uppercase tracking-wider mb-1\">TVL (USD)</div>\n                                            <div className=\"font-mono font-medium\">{formatMoney(pool.tvlUsd)}</div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between pt-2\">\n                                        <span className=\"text-xs text-emerald-500/80 bg-emerald-500/10 px-2 py-0.5 rounded-full border border-emerald-500/20\">\n                                            Low Risk\n                                        </span>\n                                        <div className=\"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-[#CEFF00] group-hover:text-black transition-colors\">\n                                            <ChevronRight className=\"w-4 h-4\" />\n                                        </div>\n                                    </div>\n                                </div>\n                            </Card>\n                        );\n                    })}\n                </div>\n            )}\n\n            {selectedPool && (() => {\n                const posKey = `${selectedPool.project}-${selectedPool.symbol}`.toUpperCase();\n                const pos = positionMap.get(posKey);\n                return (\n                    <MarketModal\n                        isOpen={!!selectedPool}\n                        onClose={handleClose}\n                        initialMode=\"earn\"\n                        pool={{\n                            ...selectedPool,\n                            userDeposited: pos?.supply || 0,\n                            userDepositedUSD: pos?.supplyUSD || 0,\n                            userBorrowed: pos?.borrow || 0,\n                            userBorrowedUSD: pos?.borrowUSD || 0,\n                        }}\n                    />\n                );\n            })()}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Hero.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openAccountModal' is defined but never used.","line":25,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openChainModal' is defined but never used.","line":26,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ArrowRight, Zap, Wallet } from \"lucide-react\"\r\nimport { ConnectButton } from '@rainbow-me/rainbowkit';\r\nimport Link from \"next/link\";\r\n\r\nexport function Hero() {\r\n    return (\r\n        <section className=\"container max-w-screen-2xl mx-auto px-8 md:px-16 grid items-center gap-6 pb-8 pt-6 md:py-10 lg:py-32\">\r\n            <div className=\"flex max-w-[980px] flex-col items-start gap-4\">\r\n                <h1 className=\"text-3xl font-extrabold leading-tight tracking-tighter md:text-5xl lg:text-6xl lg:leading-[1.1]\">\r\n                    Maximize Your Arbitrum Yields <br className=\"hidden sm:inline\" />\r\n                    with <span className=\"text-primary\">Automated Strategies</span>.\r\n                </h1>\r\n                <p className=\"max-w-[750px] text-lg text-muted-foreground sm:text-xl\">\r\n                    One-click looping and unwinding on Venus Protocol. Safely leverage your assets with real-time health monitoring and break-even analysis.\r\n                </p>\r\n            </div>\r\n\r\n            <ConnectButton.Custom>\r\n                {({\r\n                    account,\r\n                    chain,\r\n                    openAccountModal,\r\n                    openChainModal,\r\n                    openConnectModal,\r\n                    authenticationStatus,\r\n                    mounted,\r\n                }) => {\r\n                    const ready = mounted && authenticationStatus !== 'loading';\r\n                    const connected =\r\n                        ready &&\r\n                        account &&\r\n                        chain &&\r\n                        (!authenticationStatus ||\r\n                            authenticationStatus === 'authenticated');\r\n\r\n                    return (\r\n                        <div\r\n                            className=\"flex flex-col gap-4 sm:flex-row\"\r\n                            {...(!ready && {\r\n                                'aria-hidden': true,\r\n                                'style': {\r\n                                    opacity: 0,\r\n                                    pointerEvents: 'none',\r\n                                    userSelect: 'none',\r\n                                },\r\n                            })}\r\n                        >\r\n                            {!connected ? (\r\n                                <Button size=\"lg\" className=\"gap-2 font-bold text-lg px-8 h-14\" onClick={openConnectModal}>\r\n                                    Connect Wallet <Wallet className=\"h-5 w-5\" />\r\n                                </Button>\r\n                            ) : (\r\n                                <>\r\n                                    <Link href=\"/dashboard\">\r\n                                        <Button size=\"lg\" className=\"gap-2 font-bold text-lg px-8 h-14\">\r\n                                            Launch App <Zap className=\"h-5 w-5\" />\r\n                                        </Button>\r\n                                    </Link>\r\n                                    <Link href=\"/strategy\">\r\n                                        <Button variant=\"outline\" size=\"lg\" className=\"gap-2 h-14\">\r\n                                            Manage Strategies <ArrowRight className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </Link>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                }}\r\n            </ConnectButton.Custom>\r\n        </section>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\InfoModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":11,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Zap"},"fix":{"range":[222,227],"text":""},"desc":"Remove unused variable \"Zap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":11,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":51,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Info"},"fix":{"range":[227,233],"text":""},"desc":"Remove unused variable \"Info\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from \"@/components/ui/dialog\";\r\nimport { HandCoins, Wallet, ShieldCheck, Zap, Info, ChevronRight, HelpCircle } from \"lucide-react\";\r\n\r\ninterface InfoModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function InfoModal({ isOpen, onClose }: InfoModalProps) {\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onClose}>\r\n            <DialogContent className=\"max-w-md bg-[#09090b] border-white/10 text-white p-0 overflow-hidden shadow-2xl\">\r\n                <div className=\"p-6 md:p-8 space-y-6\">\r\n                    <DialogHeader>\r\n                        <div className=\"flex items-center gap-3 mb-2\">\r\n                            <div className=\"p-2 bg-[#CEFF00]/10 rounded-xl\">\r\n                                <HelpCircle className=\"w-6 h-6 text-[#CEFF00]\" />\r\n                            </div>\r\n                            <DialogTitle className=\"text-2xl font-black tracking-tight\">How it works</DialogTitle>\r\n                        </div>\r\n                        <DialogDescription className=\"text-muted-foreground text-left text-sm leading-relaxed\">\r\n                            ArbiLoop Lend is a smart yield intelligence suite that aggregates the best lending opportunities on Arbitrum.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        {/* Earn Section */}\r\n                        <div className=\"group bg-white/[0.03] border border-white/5 rounded-2xl p-4 transition-all hover:bg-white/[0.05] hover:border-emerald-500/20\">\r\n                            <div className=\"flex items-start gap-4\">\r\n                                <div className=\"p-2.5 bg-emerald-500/10 rounded-xl mt-1\">\r\n                                    <HandCoins className=\"w-5 h-5 text-emerald-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-white mb-1 flex items-center gap-2\">\r\n                                        Earning Yield\r\n                                        <ChevronRight className=\"w-3 h-3 text-muted-foreground group-hover:text-emerald-400 transition-colors\" />\r\n                                    </h4>\r\n                                    <p className=\"text-xs text-muted-foreground leading-relaxed\">\r\n                                        Deposit your idle assets into audited protocols like Venus, Kinza, and Radiant. Your assets earn interest from borrowers and protocol rewards.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Borrow Section */}\r\n                        <div className=\"group bg-white/[0.03] border border-white/5 rounded-2xl p-4 transition-all hover:bg-white/[0.05] hover:border-blue-500/20\">\r\n                            <div className=\"flex items-start gap-4\">\r\n                                <div className=\"p-2.5 bg-blue-500/10 rounded-xl mt-1\">\r\n                                    <Wallet className=\"w-5 h-5 text-blue-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-white mb-1 flex items-center gap-2\">\r\n                                        Borrowing Assets\r\n                                        <ChevronRight className=\"w-3 h-3 text-muted-foreground group-hover:text-blue-400 transition-colors\" />\r\n                                    </h4>\r\n                                    <p className=\"text-xs text-muted-foreground leading-relaxed\">\r\n                                        Use your deposited assets as collateral to borrow other tokens. Ensure your Health Factor stays high to avoid liquidation.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Safety Section */}\r\n                        <div className=\"group bg-white/[0.03] border border-white/5 rounded-2xl p-4 transition-all hover:bg-white/[0.05] hover:border-[#CEFF00]/20\">\r\n                            <div className=\"flex items-start gap-4\">\r\n                                <div className=\"p-2.5 bg-[#CEFF00]/10 rounded-xl mt-1\">\r\n                                    <ShieldCheck className=\"w-5 h-5 text-[#CEFF00]\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-white mb-1 flex items-center gap-2\">\r\n                                        Safety First\r\n                                        <ChevronRight className=\"w-3 h-3 text-muted-foreground group-hover:text-[#CEFF00] transition-colors\" />\r\n                                    </h4>\r\n                                    <p className=\"text-xs text-muted-foreground leading-relaxed\">\r\n                                        We monitor protocol health in real-time. ArbiLoop helps you manage risk by providing a global health score and individual protocol alerts.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-2\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"w-full py-3 rounded-xl bg-[#CEFF00] text-black font-bold text-sm hover:opacity-90 transition-opacity shadow-[0_0_20px_rgba(206,255,0,0.2)]\"\r\n                        >\r\n                            Got it, thanks!\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Decorative bottom gradient */}\r\n                <div className=\"h-1.5 w-full bg-gradient-to-r from-emerald-500 via-[#CEFF00] to-blue-500\" />\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\LandingCTA.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[159,170],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":6,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Zap"},"fix":{"range":[169,174],"text":""},"desc":"Remove unused variable \"Zap\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openAccountModal' is defined but never used.","line":15,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ConnectButton } from '@rainbow-me/rainbowkit';\nimport { Button } from \"@/components/ui/button\";\nimport Link from 'next/link';\nimport { ArrowRight, Zap, Wallet } from 'lucide-react';\n\nexport function LandingCTA() {\n    return (\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n            <ConnectButton.Custom>\n                {({\n                    account,\n                    chain,\n                    openAccountModal,\n                    openChainModal,\n                    openConnectModal,\n                    authenticationStatus,\n                    mounted,\n                }) => {\n                    const ready = mounted && authenticationStatus !== 'loading';\n                    const connected =\n                        ready &&\n                        account &&\n                        chain &&\n                        (!authenticationStatus ||\n                            authenticationStatus === 'authenticated');\n\n                    return (\n                        <div\n                            {...(!ready && {\n                                'aria-hidden': true,\n                                'style': {\n                                    opacity: 0,\n                                    pointerEvents: 'none',\n                                    userSelect: 'none',\n                                },\n                            })}\n                        >\n                            {(() => {\n                                if (!connected) {\n                                    return (\n                                        <Button\n                                            onClick={openConnectModal}\n                                            className=\"h-12 md:h-14 px-6 md:px-8 text-base md:text-lg font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full shadow-[0_0_20px_rgba(206,255,0,0.3)] transition-all hover:scale-105 w-full sm:w-auto flex items-center gap-2\"\n                                        >\n                                            Connect Wallet <Wallet className=\"h-4 w-4 md:h-5 md:w-5\" />\n                                        </Button>\n                                    );\n                                }\n\n                                if (chain.unsupported) {\n                                    return (\n                                        <Button\n                                            onClick={openChainModal}\n                                            variant=\"destructive\"\n                                            className=\"h-12 md:h-14 px-6 md:px-8 text-base md:text-lg font-bold rounded-full w-full sm:w-auto\"\n                                        >\n                                            Wrong Network\n                                        </Button>\n                                    );\n                                }\n\n                                return (\n                                    <div className=\"flex flex-col sm:flex-row gap-4\">\n                                        <Link href=\"/dashboard\">\n                                            <Button className=\"h-12 md:h-14 px-6 md:px-8 text-base md:text-lg font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full shadow-[0_0_20px_rgba(206,255,0,0.3)] transition-all hover:scale-105 w-full sm:w-auto\">\n                                                Launch App\n                                            </Button>\n                                        </Link>\n                                        <Link href=\"/strategy\">\n                                            <Button variant=\"outline\" className=\"h-12 md:h-14 px-6 md:px-8 text-base md:text-lg font-bold border-white/10 hover:bg-white/5 rounded-full text-white w-full sm:w-auto\">\n                                                View Strategies\n                                            </Button>\n                                        </Link>\n                                    </div>\n                                );\n                            })()}\n                        </div>\n                    );\n                }}\n            </ConnectButton.Custom>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\LendHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\LendInternalNavbar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Repeat' is defined but never used.","line":7,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":43,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Repeat"},"fix":{"range":[171,179],"text":""},"desc":"Remove unused variable \"Repeat\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n\nimport { usePathname } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { cn } from \"@/lib/utils\";\nimport { HandCoins, Wallet, Layers, Repeat } from 'lucide-react';\n\nconst TABS = [\n    { id: 'earn', label: 'Earn', href: '/lend/earn', icon: HandCoins },\n    { id: 'borrow', label: 'Borrow', href: '/lend/borrow', icon: Wallet },\n    { id: 'strategy', label: 'Strategy', href: '/lend/strategy', icon: Layers },\n];\n\nexport function LendInternalNavbar() {\n    const pathname = usePathname();\n\n    return (\n        <div className=\"flex justify-center items-center w-full h-16 mb-2\">\n            <div className=\"grid grid-cols-3 gap-1 p-1 bg-white/5 rounded-full border border-white/10 backdrop-blur-sm relative w-full max-w-2xl md:w-auto md:flex md:gap-0\">\n                {TABS.map((tab) => {\n                    const isActive = pathname === tab.href;\n                    return (\n                        <a\n                            key={tab.id}\n                            href={tab.href}\n                            className={cn(\n                                \"relative px-1 md:px-6 py-2 rounded-full text-[10px] md:text-sm font-bold transition-colors flex flex-col md:flex-row items-center justify-center gap-1 md:gap-2 z-10 text-center leading-none\",\n                                isActive ? \"text-black\" : \"text-muted-foreground hover:text-white\"\n                            )}\n                        >\n                            {isActive && (\n                                <motion.div\n                                    layoutId=\"active-lend-pill\"\n                                    className=\"absolute inset-0 bg-[#CEFF00] rounded-full -z-10 shadow-[0_0_20px_rgba(206,255,0,0.3)]\"\n                                    transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\n                                />\n                            )}\n                            <tab.icon className=\"w-3 h-3 md:w-4 md:h-4\" />\n                            <span className=\"truncate w-full\">{tab.label}</span>\n                        </a>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\LiquidationAlerts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\LoopSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\MainApp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\MarketModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[549,552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[549,552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\MarketModal.tsx:26:13\n  24 |     useEffect(() => {\n  25 |         if (isOpen) {\n> 26 |             setMode(initialMode);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  27 |         }\n  28 |     }, [isOpen, initialMode]);\n  29 |","line":26,"column":13,"nodeType":null,"endLine":26,"endColumn":20},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":56,"column":37,"nodeType":"JSXOpeningElement","endLine":60,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogTitle } from \"@/components/ui/dialog\";\nimport { X, Loader2 } from \"lucide-react\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { EarnModalContent } from \"./EarnModal\";\nimport { BorrowModalContent } from \"./BorrowModal\";\n\ninterface MarketModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    initialMode: \"earn\" | \"borrow\";\n    pool: any;\n}\n\nexport function MarketModal({ isOpen, onClose, initialMode, pool }: MarketModalProps) {\n    const [mode, setMode] = useState<\"earn\" | \"borrow\">(initialMode);\n    const [isSwitching, setIsSwitching] = useState(false);\n\n    // Sync mode if initialMode changes while open (unlikely but good for safety)\n    useEffect(() => {\n        if (isOpen) {\n            setMode(initialMode);\n        }\n    }, [isOpen, initialMode]);\n\n    const handleModeSwitch = (newMode: \"earn\" | \"borrow\") => {\n        if (newMode === mode) return;\n        setIsSwitching(true);\n        setMode(newMode);\n        // Artificial delay for smooth transition and re-fetching simulation\n        setTimeout(() => setIsSwitching(false), 300);\n    };\n\n    const protocolDisplay = pool.project === 'venus' ? 'Venus' : pool.project === 'kinza-finance' ? 'Kinza' : 'Radiant';\n\n    return (\n        <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n            <DialogContent className=\"w-[95vw] sm:max-w-[420px] h-[90vh] md:h-auto md:max-h-[90vh] bg-[#09090b] border-white/10 text-white p-0 gap-0 rounded-3xl overflow-hidden flex flex-col\">\n                <div className=\"sr-only\">\n                    <DialogTitle>{pool.symbol} Market - {protocolDisplay}</DialogTitle>\n                </div>\n                {/* Unified Header */}\n                <div className=\"p-4 md:p-6 pb-3 md:pb-4 border-b border-white/5 bg-[#09090b]/80 backdrop-blur-md sticky top-0 z-30 shrink-0\">\n                    <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"flex items-center gap-2.5 md:gap-3\">\n                            <div className=\"relative\">\n                                <AssetIcon symbol={pool.symbol} className=\"w-9 h-9 md:w-11 md:h-11 shadow-2xl\" />\n                                <div className={cn(\n                                    \"absolute -bottom-1 -right-1 w-4 h-4 md:w-5 md:h-5 rounded-full border border-white/20 flex items-center justify-center p-0.5 z-10 shadow-lg\",\n                                    pool.project === 'venus' ? \"bg-[#F0B90B]\" : pool.project === 'kinza-finance' ? \"bg-[#3B82F6]\" : \"bg-[#A855F7]\"\n                                )}>\n                                    <img\n                                        src={pool.project === 'venus' ? '/venus.png' : pool.project === 'kinza-finance' ? '/kinza.png' : '/radiant.jpeg'}\n                                        className=\"w-full h-full object-contain rounded-full\"\n                                        alt={protocolDisplay}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <h2 className=\"text-xl md:text-2xl font-black tracking-tight leading-tight\">{pool.symbol}</h2>\n                                <div className=\"flex items-center gap-1.5 text-[9px] md:text-xs text-muted-foreground/60 font-bold uppercase tracking-widest\">\n                                    <span>{protocolDisplay}</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-1.5 md:gap-3\">\n                            {/* Mode Toggle */}\n                            <div className=\"flex items-center bg-black/40 p-1 rounded-full border border-white/5 shadow-inner\">\n                                <button\n                                    onClick={() => handleModeSwitch(\"earn\")}\n                                    className={cn(\n                                        \"px-4 py-1.5 rounded-full text-[10px] md:text-xs font-black transition-all lowercase italic\",\n                                        mode === \"earn\"\n                                            ? \"bg-emerald-500 text-black shadow-[0_0_15px_rgba(16,185,129,0.4)]\"\n                                            : \"text-muted-foreground hover:text-white\"\n                                    )}\n                                >\n                                    Supply\n                                </button>\n                                <button\n                                    onClick={() => handleModeSwitch(\"borrow\")}\n                                    className={cn(\n                                        \"px-4 py-1.5 rounded-full text-[10px] md:text-xs font-black transition-all lowercase italic\",\n                                        mode === \"borrow\"\n                                            ? \"bg-blue-600 text-white shadow-[0_0_15px_rgba(37,99,235,0.4)]\"\n                                            : \"text-muted-foreground hover:text-white\"\n                                    )}\n                                >\n                                    Borrow\n                                </button>\n                            </div>\n\n                            <button onClick={onClose} className=\"w-8 h-8 md:w-10 md:h-10 flex items-center justify-center bg-white/5 hover:bg-white/10 rounded-full transition-all text-muted-foreground hover:text-white group\">\n                                <X size={18} className=\"group-hover:rotate-90 transition-transform duration-300\" />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"relative flex-1 flex flex-col min-h-0 overflow-hidden\">\n                    <AnimatePresence mode=\"wait\">\n                        {isSwitching ? (\n                            <motion.div\n                                key=\"loading\"\n                                initial={{ opacity: 0 }}\n                                animate={{ opacity: 1 }}\n                                exit={{ opacity: 0 }}\n                                className=\"flex-1 flex flex-col items-center justify-center gap-3\"\n                            >\n                                <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n                                <span className=\"text-xs text-muted-foreground animate-pulse font-medium\">Updating Market Data...</span>\n                            </motion.div>\n                        ) : (\n                            <motion.div\n                                key={mode}\n                                initial={{ opacity: 0, y: 10 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                transition={{ duration: 0.2 }}\n                                className=\"flex-1 flex flex-col min-h-0\"\n                            >\n                                {mode === \"earn\" ? (\n                                    <EarnModalContent pool={pool} onClose={onClose} isEmbedded={true} />\n                                ) : (\n                                    <BorrowModalContent pool={pool} onClose={onClose} isEmbedded={true} />\n                                )}\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Markets.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":136,"column":49,"nodeType":"JSXOpeningElement","endLine":136,"endColumn":160},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":147,"column":49,"nodeType":"JSXOpeningElement","endLine":147,"endColumn":160},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":158,"column":49,"nodeType":"JSXOpeningElement","endLine":158,"endColumn":164},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":244,"column":86,"nodeType":"JSXOpeningElement","endLine":244,"endColumn":158},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":244,"column":86,"nodeType":"JSXOpeningElement","endLine":244,"endColumn":158},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":245,"column":86,"nodeType":"JSXOpeningElement","endLine":245,"endColumn":158},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":245,"column":86,"nodeType":"JSXOpeningElement","endLine":245,"endColumn":158},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":246,"column":88,"nodeType":"JSXOpeningElement","endLine":246,"endColumn":162},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":246,"column":88,"nodeType":"JSXOpeningElement","endLine":246,"endColumn":162}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useMemo } from 'react';\nimport { useYields } from \"@/hooks/useYields\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport Link from 'next/link';\nimport { getProtocolIcon, getProtocolLabel } from '@/lib/protocols';\nimport { targetChainName } from '@/lib/network';\n\nexport function Markets() {\n    const { data: yields, isLoading } = useYields();\n    const [sortBy, setSortBy] = useState<'tvl' | 'apy'>('tvl');\n    const protocolConfig = useMemo(() => ({\n        venus: {\n            label: getProtocolLabel('venus'),\n            icon: getProtocolIcon('venus') || '/venus.png',\n        },\n        kinza: {\n            label: getProtocolLabel('kinza-finance'),\n            icon: getProtocolIcon('kinza-finance') || '/kinza.png',\n        },\n        radiant: {\n            label: getProtocolLabel('radiant-v2'),\n            icon: getProtocolIcon('radiant-v2') || '/radiant.jpeg',\n        },\n    }), []);\n\n    // Process data into a map: Symbol -> { protocols: ..., totalTVL: ..., maxAPY: ... }\n    const marketData = useMemo(() => {\n        if (!yields) return [];\n\n        const map: Record<string, {\n            symbol: string;\n            venus?: { s: number, b: number, tvl: number };\n            kinza?: { s: number, b: number, tvl: number };\n            radiant?: { s: number, b: number, tvl: number };\n            totalSupplied: number;\n            totalBorrowed: number;\n            maxAPY: number;\n            tokenAddress?: string;\n        }> = {};\n\n        yields.forEach(pool => {\n            const symbol = pool.symbol;\n            if (!map[symbol]) {\n                const tokenAddress = (pool.underlyingTokens && pool.underlyingTokens.length > 0) ? pool.underlyingTokens[0] : undefined;\n                map[symbol] = { symbol, tokenAddress, totalSupplied: 0, totalBorrowed: 0, maxAPY: 0 };\n            }\n\n            const data = { s: pool.apy, b: pool.apyBaseBorrow || 0, tvl: pool.tvlUsd };\n            const entry = map[symbol];\n\n            // Update Protocol Data\n            if (pool.project === 'venus') entry.venus = data;\n            if (pool.project === 'kinza-finance') entry.kinza = data;\n            if (pool.project === 'radiant-v2') entry.radiant = data;\n\n            // Update Aggregates\n            // Use totalSupplyUsd if available, else tvlUsd. For borrowed, use totalBorrowUsd.\n            const supply = pool.totalSupplyUsd || pool.tvlUsd;\n            const borrow = pool.totalBorrowUsd || 0;\n\n            entry.totalSupplied += supply;\n            entry.totalBorrowed += borrow;\n\n            if (pool.apy > entry.maxAPY) entry.maxAPY = pool.apy;\n        });\n\n        // Convert to array and sort\n        const arr = Object.values(map);\n        return arr.sort((a, b) => {\n            if (sortBy === 'tvl') return b.totalSupplied - a.totalSupplied;\n            if (sortBy === 'apy') return b.maxAPY - a.maxAPY;\n            return 0;\n        });\n\n    }, [yields, sortBy]);\n\n    if (isLoading) {\n        return (\n            <Card className=\"col-span-full border border-border bg-card\">\n                <CardHeader>\n                    <CardTitle>Global Markets</CardTitle>\n                    <CardDescription>Scanning top lending protocols on {targetChainName}...</CardDescription>\n                </CardHeader>\n                <CardContent>\n                    <div className=\"h-40 flex items-center justify-center animate-pulse text-primary/50\">\n                        Loading live yields...\n                    </div>\n                </CardContent>\n            </Card>\n        );\n    }\n\n    const formatMoney = (num: number) => {\n        if (num >= 1000000000) return `$${(num / 1000000000).toFixed(2)}B`;\n        if (num >= 1000000) return `$${(num / 1000000).toFixed(2)}M`;\n        if (num >= 1000) return `$${(num / 1000).toFixed(1)}K`;\n        return `$${num.toFixed(0)}`;\n    };\n\n    return (\n        <Card className=\"col-span-full border border-border bg-card\">\n            <CardHeader className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\n                <div>\n                    <CardTitle className=\"text-xl md:text-2xl font-bold\">Market Opportunities</CardTitle>\n                    <CardDescription className=\"text-sm md:text-base mt-1\">Real-time lending & borrowing rates across the {targetChainName} ecosystem.</CardDescription>\n                </div>\n                <div className=\"flex items-center gap-2 bg-muted/30 p-1 rounded-xl w-full md:w-auto\">\n                    <button\n                        onClick={() => setSortBy('tvl')}\n                        className={`flex-1 md:flex-none px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${sortBy === 'tvl' ? 'bg-primary text-primary-foreground shadow-lg shadow-primary/20' : 'text-muted-foreground hover:text-foreground'}`}\n                    >\n                        Highest TVL\n                    </button>\n                    <button\n                        onClick={() => setSortBy('apy')}\n                        className={`flex-1 md:flex-none px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${sortBy === 'apy' ? 'bg-primary text-primary-foreground shadow-lg shadow-primary/20' : 'text-muted-foreground hover:text-foreground'}`}\n                    >\n                        Highest APY\n                    </button>\n                </div>\n            </CardHeader>\n            <CardContent>\n                <div className=\"relative w-full overflow-auto\">\n                    <table className=\"w-full caption-bottom text-sm text-left hidden md:table\">\n                        <thead className=\"[&_tr]:border-b\">\n                            <tr className=\"border-border text-muted-foreground uppercase tracking-wider text-[10px]\">\n                                <th className=\"h-12 px-4 align-middle font-medium min-w-[220px]\">Token Name</th>\n                                <th className=\"h-12 px-4 align-middle font-medium text-center\">\n                                    <div className=\"flex flex-col items-center justify-center gap-1\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <div className=\"w-4 h-4 rounded-full overflow-hidden bg-white\">\n                                                <img src={protocolConfig.venus.icon} className=\"w-full h-full object-cover\" alt={protocolConfig.venus.label} />\n                                            </div>\n                                            {protocolConfig.venus.label}\n                                        </div>\n                                        <span className=\"text-[9px] opacity-70\">Earn / Pay</span>\n                                    </div>\n                                </th>\n                                <th className=\"h-12 px-4 align-middle font-medium text-center\">\n                                    <div className=\"flex flex-col items-center justify-center gap-1\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <div className=\"w-4 h-4 rounded-full overflow-hidden bg-white\">\n                                                <img src={protocolConfig.kinza.icon} className=\"w-full h-full object-cover\" alt={protocolConfig.kinza.label} />\n                                            </div>\n                                            {protocolConfig.kinza.label}\n                                        </div>\n                                        <span className=\"text-[9px] opacity-70\">Earn / Pay</span>\n                                    </div>\n                                </th>\n                                <th className=\"h-12 px-4 align-middle font-medium text-center\">\n                                    <div className=\"flex flex-col items-center justify-center gap-1\">\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <div className=\"w-4 h-4 rounded-full overflow-hidden bg-white\">\n                                                <img src={protocolConfig.radiant.icon} className=\"w-full h-full object-cover\" alt={protocolConfig.radiant.label} />\n                                            </div>\n                                            {protocolConfig.radiant.label}\n                                        </div>\n                                        <span className=\"text-[9px] opacity-70\">Earn / Pay</span>\n                                    </div>\n                                </th>\n                                <th className=\"h-12 px-4 align-middle font-medium text-right min-w-[160px]\">Quick Trade</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"[&_tr:last-child]:border-0\">\n                            {marketData.map(asset => {\n                                const availableProviders = [asset.venus, asset.kinza, asset.radiant].filter(Boolean).length;\n                                const renderCell = (data?: { s: number, b: number }, isBest?: boolean) => {\n                                    if (!data) return <span className=\"text-muted-foreground/20\">-</span>;\n                                    const showBest = isBest && data.s >= 0.01 && availableProviders > 1; // Only show if APY >= 0.01% AND multiple providers exist\n                                    return (\n                                        <div className=\"flex flex-col items-center relative\">\n                                            {showBest && (\n                                                <div className=\"absolute -top-6 left-1/2 -translate-x-1/2 bg-yellow-500 text-black text-[9px] font-black px-2 py-0.5 rounded-full whitespace-nowrap shadow-[0_0_10px_rgba(234,179,8,0.3)]\">\n                                                    BEST\n                                                </div>\n                                            )}\n                                            <span className={`font-bold font-mono text-xs ${showBest ? 'text-yellow-400 scale-110 transition-transform' : 'text-emerald-400'}`}>\n                                                +{data.s.toFixed(2)}%\n                                            </span>\n                                            <span className=\"text-red-400/80 font-mono text-[10px]\">\n                                                {data.b > 0 ? `-${data.b.toFixed(2)}%` : '0.00%'}\n                                            </span>\n                                        </div>\n                                    );\n                                };\n\n                                return (\n                                    <tr key={asset.symbol} className={`border-b border-border transition-colors hover:bg-muted/50 group ${asset.maxAPY === marketData[0].maxAPY && sortBy === 'apy' ? 'bg-yellow-500/5' : ''}`}>\n                                        <td className=\"p-4 align-middle font-bold flex items-center gap-3\">\n                                            <AssetIcon symbol={asset.symbol} tokenAddress={asset.tokenAddress} size={40} />\n                                            <div className=\"flex flex-col\">\n                                                <span className=\"text-foreground text-base\">{asset.symbol}</span>\n                                                <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 text-[10px] text-muted-foreground mt-1\">\n                                                    <span>{targetChainName}</span>\n                                                    <span className=\"w-1 h-1 rounded-full bg-border\"></span>\n                                                    <span className=\"text-emerald-500/80\">Deposited: {formatMoney(asset.totalSupplied)}</span>\n                                                    <span className=\"w-1 h-1 rounded-full bg-border\"></span>\n                                                    <span className=\"text-red-500/60\">Loaned: {formatMoney(asset.totalBorrowed)}</span>\n                                                </div>\n                                            </div>\n                                        </td>\n                                        <td className=\"p-4 align-middle text-center border-l border-border bg-muted/20 group-hover:bg-transparent transition-colors\">\n                                            {renderCell(asset.venus, asset.maxAPY === asset.venus?.s)}\n                                        </td>\n                                        <td className=\"p-4 align-middle text-center border-l border-border bg-muted/20 group-hover:bg-transparent transition-colors\">\n                                            {renderCell(asset.kinza, asset.maxAPY === asset.kinza?.s)}\n                                        </td>\n                                        <td className=\"p-4 align-middle text-center border-l border-border bg-muted/20 group-hover:bg-transparent transition-colors\">\n                                            {renderCell(asset.radiant, asset.maxAPY === asset.radiant?.s)}\n                                        </td>\n                                        <td className=\"p-4 align-middle text-right border-l border-border\">\n                                            <div className=\"flex items-center justify-end gap-2\">\n                                                <Link href={`/lend/earn?pool=${asset.symbol}`}>\n                                                    <Button size=\"sm\" className=\"h-8 bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 hover:bg-emerald-500 hover:text-white hover:border-emerald-500 transition-all text-xs font-bold\">\n                                                        Deposit\n                                                    </Button>\n                                                </Link>\n                                                <Link href={`/lend/borrow?pool=${asset.symbol}`}>\n                                                    <Button size=\"sm\" className=\"h-8 bg-destructive/10 text-destructive border border-destructive/20 hover:bg-destructive hover:text-white hover:border-destructive transition-all text-xs font-bold\">\n                                                        Borrow\n                                                    </Button>\n                                                </Link>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n\n                    {/* Mobile Card View */}\n                    <div className=\"md:hidden space-y-3\">\n                        {marketData.map(asset => {\n                            const availableProviders = [asset.venus, asset.kinza, asset.radiant].filter(Boolean).length;\n                            const renderMobileCell = (label: string, data?: { s: number, b: number }, isBest?: boolean) => {\n                                if (!data) return null;\n                                return (\n                                    <div className=\"flex flex-col items-center bg-muted/20 p-2 rounded-lg flex-1\">\n                                        <div className=\"flex items-center gap-1 mb-1\">\n                                            {label === protocolConfig.venus.label && <img src={protocolConfig.venus.icon} className=\"w-3 h-3 rounded-full\" />}\n                                            {label === protocolConfig.kinza.label && <img src={protocolConfig.kinza.icon} className=\"w-3 h-3 rounded-full\" />}\n                                            {label === protocolConfig.radiant.label && <img src={protocolConfig.radiant.icon} className=\"w-3 h-3 rounded-full\" />}\n                                            <span className=\"text-[10px] text-muted-foreground\">{label}</span>\n                                        </div>\n                                        <span className={`font-mono text-xs font-bold ${isBest && data.s >= 0.01 && availableProviders > 1 ? 'text-yellow-400' : 'text-emerald-400'}`}>\n                                            +{data.s.toFixed(2)}%\n                                        </span>\n                                    </div>\n                                );\n                            };\n\n                            return (\n                                <div key={asset.symbol} className=\"bg-card border border-border rounded-xl p-4 space-y-4\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <AssetIcon symbol={asset.symbol} tokenAddress={asset.tokenAddress} size={36} />\n                                            <div>\n                                                <div className=\"font-bold text-lg\">{asset.symbol}</div>\n                                                <div className=\"text-xs text-muted-foreground\">{targetChainName}</div>\n                                            </div>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className=\"text-xs text-muted-foreground\">Total Supplied</div>\n                                            <div className=\"font-mono font-bold text-emerald-500\">{formatMoney(asset.totalSupplied)}</div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex gap-2\">\n                                        {renderMobileCell(protocolConfig.venus.label, asset.venus, asset.maxAPY === asset.venus?.s)}\n                                        {renderMobileCell(protocolConfig.kinza.label, asset.kinza, asset.maxAPY === asset.kinza?.s)}\n                                        {renderMobileCell(protocolConfig.radiant.label, asset.radiant, asset.maxAPY === asset.radiant?.s)}\n                                    </div>\n\n                                    <div className=\"grid grid-cols-2 gap-3\">\n                                        <Link href={`/lend/earn?pool=${asset.symbol}`} className=\"w-full\">\n                                            <Button size=\"sm\" className=\"w-full bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 hover:bg-emerald-500 hover:text-white font-bold\">\n                                                Deposit\n                                            </Button>\n                                        </Link>\n                                        <Link href={`/lend/borrow?pool=${asset.symbol}`} className=\"w-full\">\n                                            <Button size=\"sm\" className=\"w-full bg-destructive/10 text-destructive border border-destructive/20 hover:bg-destructive hover:text-white font-bold\">\n                                                Borrow\n                                            </Button>\n                                        </Link>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                    {marketData.length === 0 && <div className=\"p-8 text-center text-muted-foreground\">No matching assets found.</div>}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\MobileBottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\MultiStepLoop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Navbar.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":141,"column":65,"nodeType":"JSXOpeningElement","endLine":145,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ConnectButton } from '@rainbow-me/rainbowkit';\nimport { Button } from \"@/components/ui/button\";\nimport { Wallet, Settings } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\n\nexport function Navbar() {\n    const pathname = usePathname();\n\n\n    const navLinks = [\n        { name: 'Dashboard', href: '/dashboard' },\n        { name: 'Lend', href: '/lend' },\n        { name: 'Portfolio', href: '/portfolio' },\n\n    ];\n\n    return (\n        <nav className=\"fixed top-0 z-50 w-full border-b border-border bg-background/80 backdrop-blur-xl shadow-lg shadow-black/5\">\n            <div className=\"container flex h-14 max-w-screen-2xl items-center justify-between px-4 md:px-16\">\n                <Link href=\"/\" className=\"flex items-center gap-2 md:gap-3 cursor-pointer hover:opacity-80 transition-opacity\">\n                    <div className=\"relative h-6 w-6 md:h-8 md:w-8\">\n                        <Image\n                            src=\"/ArbiLoop.png\"\n                            alt=\"ArbiLoop Logo\"\n                            fill\n                            className=\"object-contain\"\n                        />\n                    </div>\n                    <span className=\"font-outfit font-bold text-lg md:text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary to-emerald-400 drop-shadow-sm\">ArbiLoop</span>\n                </Link>\n\n                {/* Desktop Navigation */}\n                <div className=\"hidden md:flex items-center gap-8\">\n                    {/* Navigation Links */}\n                    <div className=\"flex gap-6\">\n                        {navLinks.map((link) => (\n                            <Link\n                                key={link.name}\n                                href={link.href}\n                                className={`text-sm font-medium transition-colors hover:text-primary ${(link.href === '/' ? pathname === '/' : pathname.startsWith(link.href))\n                                    ? 'text-primary'\n                                    : 'text-muted-foreground'\n                                    }`}\n                            >\n                                {link.name}\n                            </Link>\n                        ))}\n                    </div>\n\n\n\n                    <Link href=\"/settings\">\n                        <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"w-8 h-8 rounded-full bg-[#1A1A1E] hover:bg-[#2A2A2E] text-white border border-white/5\"\n                        >\n                            <Settings className=\"w-4 h-4\" />\n                        </Button>\n                    </Link>\n\n                    <ConnectButton.Custom>\n                        {({\n                            account,\n                            chain,\n                            openAccountModal,\n                            openChainModal,\n                            openConnectModal,\n                            authenticationStatus,\n                            mounted,\n                        }) => {\n                            const ready = mounted && authenticationStatus !== 'loading';\n                            const connected =\n                                ready &&\n                                account &&\n                                chain &&\n                                (!authenticationStatus ||\n                                    authenticationStatus === 'authenticated');\n\n                            return (\n                                <div\n                                    {...(!ready && {\n                                        'aria-hidden': true,\n                                        'style': {\n                                            opacity: 0,\n                                            pointerEvents: 'none',\n                                            userSelect: 'none',\n                                        },\n                                    })}\n                                >\n                                    {(() => {\n                                        if (!connected) {\n                                            return (\n                                                <Button\n                                                    onClick={openConnectModal}\n                                                    className=\"h-8 px-4 font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full shadow-lg hover:shadow-[0_0_15px_rgba(206,255,0,0.4)] transition-all flex items-center gap-2 text-sm\"\n                                                >\n                                                    <Wallet className=\"w-3 h-3 md:w-4 md:h-4 mr-2\" />\n                                                    Connect Wallet\n                                                </Button>\n                                            );\n                                        }\n\n                                        if (chain.unsupported) {\n                                            return (\n                                                <Button\n                                                    onClick={openChainModal}\n                                                    variant=\"destructive\"\n                                                    className=\"h-8 px-3 text-sm font-bold rounded-full shadow-lg transition-all\"\n                                                >\n                                                    Wrong Network\n                                                </Button>\n                                            );\n                                        }\n\n                                        return (\n                                            <div style={{ display: 'flex', gap: 12 }}>\n                                                <Button\n                                                    onClick={openChainModal}\n                                                    variant=\"outline\"\n                                                    className=\"h-8 px-3 text-sm rounded-full border-white/10 hover:bg-white/5\"\n                                                    style={{ display: 'flex', alignItems: 'center' }}\n                                                >\n                                                    {chain.hasIcon && (\n                                                        <div\n                                                            style={{\n                                                                background: chain.iconBackground,\n                                                                width: 16,\n                                                                height: 16,\n                                                                borderRadius: 999,\n                                                                overflow: 'hidden',\n                                                                marginRight: 4,\n                                                            }}\n                                                        >\n                                                            {chain.iconUrl && (\n                                                                <img\n                                                                    alt={chain.name ?? 'Chain icon'}\n                                                                    src={chain.iconUrl}\n                                                                    style={{ width: 16, height: 16 }}\n                                                                />\n                                                            )}\n                                                        </div>\n                                                    )}\n                                                    {chain.name}\n                                                </Button>\n\n                                                <Button\n                                                    onClick={openAccountModal}\n                                                    className=\"h-8 px-3 text-sm rounded-full bg-secondary text-foreground hover:bg-secondary/80 font-mono\"\n                                                >\n                                                    {account.displayName}\n                                                </Button>\n                                            </div>\n                                        );\n                                    })()}\n                                </div>\n                            );\n                        }}\n                    </ConnectButton.Custom>\n                </div>\n\n                {/* Mobile Connect Button (Using Simplified State) */}\n                <div className=\"md:hidden flex items-center gap-2\">\n                    <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-[#28A0F0]/10 border border-[#28A0F0]/20 text-[#28A0F0]\">\n                        <div className=\"relative w-5 h-5\">\n                            <Image src=\"https://cryptologos.cc/logos/arbitrum-arb-logo.png\" alt=\"Arbitrum\" fill className=\"object-contain\" unoptimized />\n                        </div>\n                    </div>\n                    <ConnectButton.Custom>\n                        {({\n                            account,\n                            chain,\n                            openConnectModal,\n                            openAccountModal,\n                            authenticationStatus,\n                            mounted,\n                        }) => {\n                            const ready = mounted && authenticationStatus !== 'loading';\n                            const connected = ready && account && chain && (!authenticationStatus || authenticationStatus === 'authenticated');\n\n                            if (!connected) {\n                                return (\n                                    <Button\n                                        size=\"sm\"\n                                        onClick={openConnectModal}\n                                        className=\"h-8 px-4 font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full text-xs\"\n                                    >\n                                        Connect\n                                    </Button>\n                                )\n                            }\n\n                            // If connected, show Avatar or Name compacted\n                            return (\n                                <Button\n                                    size=\"sm\"\n                                    onClick={openAccountModal}\n                                    className=\"h-8 px-3 rounded-full bg-secondary text-foreground hover:bg-secondary/80 font-mono text-xs\"\n                                >\n                                    {account.displayName}\n                                </Button>\n                            );\n                        }}\n                    </ConnectButton.Custom>\n                </div>\n            </div>\n        </nav>\n    );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Portfolio.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useReadContract' is defined but never used.","line":6,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useReadContract"},"fix":{"range":[201,218],"text":""},"desc":"Remove unused variable \"useReadContract\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":15,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Heart"},"fix":{"range":[838,845],"text":""},"desc":"Remove unused variable \"Heart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useWaitForTransactionReceipt' is defined but never used.","line":16,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":56,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useWaitForTransactionReceipt"},"fix":{"range":[913,943],"text":""},"desc":"Remove unused variable \"useWaitForTransactionReceipt\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2548,2551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2548,2551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5578,5581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5578,5581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'overallStatus' is assigned a value but never used.","line":160,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hash' is assigned a value but never used.","line":173,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hash' is assigned a value but never used.","line":185,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":185,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9646,9649],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9646,9649],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10066,10069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10066,10069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":591,"column":57,"nodeType":"JSXOpeningElement","endLine":591,"endColumn":136},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":659,"column":53,"nodeType":"JSXOpeningElement","endLine":659,"endColumn":132}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useRouter } from 'next/navigation';\nimport { useAccount, useReadContract } from 'wagmi';\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip as RechartsTooltip } from 'recharts';\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { useAggregatedHealth, ProtocolHealth } from \"@/hooks/useAggregatedHealth\";\nimport { useVenusPortfolio } from \"@/hooks/useVenusPortfolio\";\nimport { useKinzaPortfolio } from \"@/hooks/useKinzaPortfolio\";\nimport { useRadiantPortfolio } from \"@/hooks/useRadiantPortfolio\";\nimport { TrendingUp, AlertTriangle, ShieldCheck, ChevronDown, ChevronUp, Heart, Activity, Loader2 } from \"lucide-react\";\nimport { useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\nimport { VENUS_COMPTROLLER, COMPTROLLER_ABI } from '@/lib/pool-config';\nimport { cn } from \"@/lib/utils\";\nimport { motion } from \"framer-motion\";\n\n// --- Health Factor Badge ---\nfunction HealthBadge({ health }: { health: ProtocolHealth }) {\n    if (!health.hasPositions) {\n        return (\n            <span className=\"px-2.5 py-1 rounded-full text-[10px] font-bold bg-muted/50 text-muted-foreground\">\n                Inactive\n            </span>\n        );\n    }\n\n    const config = {\n        safe: { bg: 'bg-emerald-500/15', text: 'text-emerald-400', border: 'border-emerald-500/30', label: 'Safe' },\n        warning: { bg: 'bg-amber-500/15', text: 'text-amber-400', border: 'border-amber-500/30', label: 'Warning' },\n        danger: { bg: 'bg-red-500/15', text: 'text-red-400', border: 'border-red-500/30', label: 'Risk' },\n        inactive: { bg: 'bg-muted/50', text: 'text-muted-foreground', border: 'border-muted', label: 'Inactive' },\n    }[health.status];\n\n    return (\n        <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold border ${config.bg} ${config.text} ${config.border} inline-flex items-center gap-1`}>\n            <span className={`w-1.5 h-1.5 rounded-full ${health.status === 'safe' ? 'bg-emerald-400' : health.status === 'warning' ? 'bg-amber-400' : 'bg-red-400'}`} />\n            {config.label}\n            {health.healthFactor > 0 && (\n                <span className=\"ml-0.5 opacity-70\">{health.healthFactor.toFixed(2)}</span>\n            )}\n        </span>\n    );\n}\n\n// --- Custom Pie Chart Tooltip ---\nfunction CustomTooltip({ active, payload }: any) {\n    if (active && payload && payload.length) {\n        const data = payload[0].payload;\n        return (\n            <div className=\"bg-card/95 backdrop-blur-sm border border-border rounded-xl px-4 py-3 shadow-2xl\">\n                <div className=\"flex items-center gap-2 mb-1.5\">\n                    <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: data.color }} />\n                    <span className=\"font-bold text-sm text-foreground\">{data.name}</span>\n                </div>\n                <div className=\"text-xs space-y-0.5 text-muted-foreground\">\n                    <div>Supply: <span className=\"text-emerald-400 font-mono\">${data.supply?.toFixed(2) || '0.00'}</span></div>\n                    <div>Borrow: <span className=\"text-red-400 font-mono\">${data.borrow?.toFixed(2) || '0.00'}</span></div>\n                    <div>Net: <span className=\"text-foreground font-mono\">${(data.value - (data.borrow || 0)).toFixed(2)}</span></div>\n                    <div className=\"pt-1 border-t border-border mt-1\">\n                        Share: <span className=\"font-bold text-foreground\">{data.percent?.toFixed(1)}%</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    return null;\n}\n\n// --- Center Label for Pie ---\nfunction CenterHealthLabel({ score }: { score: number }) {\n    const color = score >= 7 ? '#34d399' : score >= 4 ? '#fbbf24' : '#f87171';\n    return (\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\n            <span className=\"text-3xl font-black tracking-tight\" style={{ color }}>\n                {score.toFixed(1)}\n            </span>\n            <span className=\"text-[10px] text-muted-foreground font-medium tracking-wide uppercase\">\n                Health Score\n            </span>\n        </div>\n    );\n}\n\nexport function Portfolio() {\n    const { address } = useAccount();\n    const router = useRouter();\n    const [expandedProtocol, setExpandedProtocol] = useState<string | null>(null);\n\n    // Smart Wallet (Using EOA for now as Contracts are removed)\n    const walletAddress = address;\n\n    // Portfolio Data\n    const { totalSupplyUSD: venusSupply, totalBorrowUSD: venusBorrow, positions: venusPositions } = useVenusPortfolio();\n    const { totalSupplyUSD: kinzaSupply, totalBorrowUSD: kinzaBorrow, positions: kinzaPositions } = useKinzaPortfolio();\n    const { totalSupplyUSD: radiantSupply, totalBorrowUSD: radiantBorrow, positions: radiantPositions } = useRadiantPortfolio();\n\n    // Health Data\n    const healthData = useAggregatedHealth(walletAddress as `0x${string}` | undefined);\n    const { venus: venusHealth, kinza: kinzaHealth, radiant: radiantHealth, overallScore } = healthData;\n\n    // Aggregations\n    const totalSupplied = venusSupply + kinzaSupply + radiantSupply;\n    const totalDebt = venusBorrow + kinzaBorrow + radiantBorrow;\n    const totalNetWorth = totalSupplied - totalDebt;\n\n    // Helper to calculate Net APY\n    const calculateNetAPY = (positions: any[], netWorth: number) => {\n        if (netWorth <= 0) return 0;\n        let totalAnnualIncome = 0;\n        let totalAnnualCost = 0;\n\n        positions.forEach(pos => {\n            if (pos.supplyUSD > 0) {\n                totalAnnualIncome += pos.supplyUSD * (pos.apy / 100);\n            }\n            if (pos.borrowUSD > 0) {\n                totalAnnualCost += pos.borrowUSD * (pos.borrowApy / 100);\n            }\n        });\n\n        const netAnnual = totalAnnualIncome - totalAnnualCost;\n        return (netAnnual / netWorth) * 100;\n    };\n\n    const allPositions = [...(venusPositions || []), ...(kinzaPositions || []), ...(radiantPositions || [])];\n    const globalNetAPY = calculateNetAPY(allPositions, totalNetWorth);\n    const venusNetAPY = calculateNetAPY(venusPositions || [], venusSupply - venusBorrow);\n    const kinzaNetAPY = calculateNetAPY(kinzaPositions || [], kinzaSupply - kinzaBorrow);\n    const radiantNetAPY = calculateNetAPY(radiantPositions || [], radiantSupply - radiantBorrow);\n\n    // Allocation data with extra info for tooltip\n    const allocationData = [\n        { name: 'Venus', value: venusSupply, supply: venusSupply, borrow: venusBorrow, color: '#F0B90B', percent: 0 },\n        { name: 'Kinza', value: kinzaSupply, supply: kinzaSupply, borrow: kinzaBorrow, color: '#3B82F6', percent: 0 },\n        { name: 'Radiant', value: radiantSupply, supply: radiantSupply, borrow: radiantBorrow, color: '#A855F7', percent: 0 },\n    ].filter(d => d.value > 0);\n\n    // Calculate percentages\n    const allocTotal = allocationData.reduce((s, d) => s + d.value, 0);\n    allocationData.forEach(d => { d.percent = allocTotal > 0 ? (d.value / allocTotal) * 100 : 0; });\n\n    const toggleExpand = (protocol: string) => {\n        setExpandedProtocol(prev => prev === protocol ? null : protocol);\n    };\n\n    // Health status summary\n    const getOverallStatus = () => {\n        if (totalNetWorth < 0.01) return { text: 'Inactive', color: 'text-muted-foreground', icon: Activity };\n        const activeProtocols = [venusHealth, kinzaHealth, radiantHealth].filter(h => h.hasPositions);\n        const anyDanger = activeProtocols.some(h => h.status === 'danger');\n        const anyWarning = activeProtocols.some(h => h.status === 'warning');\n        if (anyDanger) return { text: 'At Risk', color: 'text-red-500 animate-pulse', icon: AlertTriangle };\n        if (anyWarning) return { text: 'Caution', color: 'text-amber-400', icon: AlertTriangle };\n        return { text: 'Healthy', color: 'text-emerald-400', icon: ShieldCheck };\n    };\n    const overallStatus = getOverallStatus();\n\n    const { toast } = useToast();\n    const { writeContractAsync } = useWriteContract();\n    const [togglingAssets, setTogglingAssets] = useState<Record<string, boolean>>({});\n\n    const handleCollateralToggle = async (vTokenAddress: string, symbol: string, currentStatus: boolean) => {\n        if (!address) return;\n\n        setTogglingAssets(prev => ({ ...prev, [vTokenAddress]: true }));\n        try {\n            if (currentStatus) {\n                // Exit Market\n                const hash = await writeContractAsync({\n                    address: VENUS_COMPTROLLER as `0x${string}`,\n                    abi: COMPTROLLER_ABI,\n                    functionName: 'exitMarket',\n                    args: [vTokenAddress as `0x${string}`],\n                });\n                toast({\n                    title: \"Transaction Sent\",\n                    description: `Disabling ${symbol} as collateral...`,\n                });\n            } else {\n                // Enter Market\n                const hash = await writeContractAsync({\n                    address: VENUS_COMPTROLLER as `0x${string}`,\n                    abi: COMPTROLLER_ABI,\n                    functionName: 'enterMarkets',\n                    args: [[vTokenAddress as `0x${string}`]],\n                });\n                toast({\n                    title: \"Transaction Sent\",\n                    description: `Enabling ${symbol} as collateral...`,\n                });\n            }\n        } catch (error: any) {\n            console.error(\"Collateral toggle error:\", error);\n            toast({\n                title: \"Error\",\n                description: error.shortMessage || \"Failed to toggle collateral\",\n                variant: \"destructive\",\n            });\n        } finally {\n            setTogglingAssets(prev => ({ ...prev, [vTokenAddress]: false }));\n        }\n    };\n\n    const renderPositionsTable = (positions: any[], protocolId: string) => {\n        const handleRedirect = (asset: string, protocol: string, type: 'earn' | 'borrow') => {\n            const mappedProtocol = protocol === 'kinza' ? 'kinza-finance' : protocol === 'radiant' ? 'radiant-v2' : protocol;\n            router.push(`/lend/${type}?asset=${asset}&protocol=${mappedProtocol}`);\n        };\n\n        if (!positions || positions.length === 0) {\n            return <div className=\"p-4 text-center text-muted-foreground text-xs\">No active positions found.</div>;\n        }\n\n        return (\n            <div className=\"bg-[#09090b]/60 p-0 rounded-b-xl border-t border-white/10 animate-in slide-in-from-top-2 overflow-hidden shadow-inner\">\n                {/* Desktop View */}\n                <table className=\"w-full text-xs hidden md:table\">\n                    <thead>\n                        <tr className=\"text-muted-foreground uppercase tracking-wider text-[10px] text-left bg-white/5 font-black border-b border-white/5\">\n                            <th className=\"py-3 px-4 md:px-8\">Asset</th>\n                            <th className=\"py-3 px-4 text-right\">APY</th>\n                            <th className=\"py-3 px-4 text-center hidden md:table-cell\">Supplied</th>\n                            {protocolId === 'venus' && <th className=\"py-3 px-1 md:px-4 text-center\">Collateral</th>}\n                            <th className=\"py-3 px-4 text-right hidden md:table-cell\">Borrowed</th>\n                            <th className=\"py-3 px-4 text-right hidden md:table-cell\">Value (USD)</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-white/5\">\n                        {positions.map((pos, idx) => {\n                            const netUSD = pos.supplyUSD - pos.borrowUSD;\n                            return (\n                                <tr\n                                    key={idx}\n                                    className=\"hover:bg-white/5 transition-colors cursor-pointer\"\n                                    onClick={() => handleRedirect(pos.symbol, protocolId, pos.supply > 0 ? 'earn' : 'borrow')}\n                                >\n                                    <td className=\"py-3 px-4 md:px-8 font-bold\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <AssetIcon symbol={pos.symbol} size={24} />\n                                            <span className=\"text-sm tracking-tight\">{pos.symbol}</span>\n                                        </div>\n                                    </td>\n                                    <td className=\"py-3 px-4 text-right font-mono leading-tight\">\n                                        {pos.apy > 0 && (\n                                            <div className=\"text-emerald-400 font-bold\">+{pos.apy.toFixed(2)}%</div>\n                                        )}\n                                        {pos.borrowApy > 0 && (\n                                            <div className=\"text-red-400 font-bold\">-{pos.borrowApy.toFixed(2)}%</div>\n                                        )}\n                                        {!(pos.apy > 0) && !(pos.borrowApy > 0) && (\n                                            <span className=\"text-muted-foreground/30\">—</span>\n                                        )}\n                                    </td>\n                                    <td className=\"py-3 px-4 text-center hidden md:table-cell\">\n                                        <div className=\"text-emerald-500 font-bold\">{pos.supply > 0 ? pos.supply.toFixed(4) : '-'}</div>\n                                        {pos.supplyUSD > 0 && <div className=\"text-[10px] text-muted-foreground/60 font-mono\">${pos.supplyUSD.toFixed(2)}</div>}\n                                    </td>\n                                    {protocolId === 'venus' && (\n                                        <td className=\"py-3 px-1 md:px-4 text-center\" onClick={(e) => e.stopPropagation()}>\n                                            <div className=\"flex justify-center items-center\">\n                                                {pos.supply > 0 ? (\n                                                    togglingAssets[pos.vTokenAddress] ? (\n                                                        <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\n                                                    ) : (\n                                                        <Switch\n                                                            checked={pos.isCollateral}\n                                                            onCheckedChange={() => handleCollateralToggle(pos.vTokenAddress, pos.symbol, pos.isCollateral)}\n                                                            disabled={togglingAssets[pos.vTokenAddress]}\n                                                        />\n                                                    )\n                                                ) : (\n                                                    <span className=\"text-muted-foreground/30 text-[10px]\">—</span>\n                                                )}\n                                            </div>\n                                        </td>\n                                    )}\n                                    <td className=\"py-3 px-4 text-right hidden md:table-cell\">\n                                        <div className=\"text-red-400 font-bold\">{pos.borrow > 0 ? pos.borrow.toFixed(4) : '-'}</div>\n                                        {pos.borrowUSD > 0 && <div className=\"text-[10px] text-muted-foreground/60 font-mono\">${pos.borrowUSD.toFixed(2)}</div>}\n                                    </td>\n                                    <td className=\"py-3 px-4 text-right font-mono text-muted-foreground hidden md:table-cell\">\n                                        <span className={cn(\"font-bold\", netUSD > 0 ? \"text-emerald-500\" : netUSD < 0 ? \"text-red-500\" : \"\")}>\n                                            ${netUSD.toFixed(2)}\n                                        </span>\n                                    </td>\n                                </tr>\n                            );\n                        })}\n                    </tbody>\n                </table>\n\n                {/* Mobile List View */}\n                <div className=\"md:hidden flex flex-col divide-y divide-white/5\">\n                    {positions.map((pos, idx) => {\n                        const netUSD = pos.supplyUSD - pos.borrowUSD;\n                        return (\n                            <div\n                                key={idx}\n                                className=\"p-4 bg-black/20 hover:bg-black/30 transition-colors cursor-pointer border-b border-white/5 last:border-0\"\n                                onClick={() => handleRedirect(pos.symbol, protocolId, pos.supply > 0 ? 'earn' : 'borrow')}\n                            >\n                                <div className=\"flex items-center justify-between mb-4\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <AssetIcon symbol={pos.symbol} size={28} />\n                                        <div>\n                                            <div className=\"font-black text-sm text-white tracking-tight\">{pos.symbol}</div>\n                                            <div className=\"text-[10px] text-muted-foreground/60 uppercase font-black tracking-widest italic\">{protocolId} Asset</div>\n                                        </div>\n                                    </div>\n                                    <div className=\"text-right\">\n                                        <div className={cn(\"text-xs font-black font-mono\", netUSD > 0 ? \"text-emerald-400\" : netUSD < 0 ? \"text-red-400\" : \"text-muted-foreground\")}>\n                                            ${netUSD.toFixed(2)}\n                                        </div>\n                                        <div className=\"text-[9px] uppercase text-muted-foreground/40 font-black tracking-tighter\">Net Value</div>\n                                    </div>\n                                </div>\n\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div className=\"bg-white/[0.03] border border-white/5 rounded-xl p-2.5\">\n                                        <div className=\"flex justify-between items-center mb-1\">\n                                            <span className=\"text-[9px] uppercase text-emerald-500/50 font-black tracking-widest\">Supply</span>\n                                            {pos.apy > 0 && <span className=\"text-[10px] font-black text-emerald-400\">+{pos.apy.toFixed(2)}%</span>}\n                                        </div>\n                                        <div className=\"text-xs font-black text-white font-mono\">\n                                            {pos.supply > 0 ? pos.supply.toFixed(4) : '—'}\n                                        </div>\n                                        {pos.supplyUSD > 0 && <div className=\"text-[9px] text-muted-foreground/40 font-bold\">${pos.supplyUSD.toFixed(2)}</div>}\n                                    </div>\n\n                                    <div className=\"bg-white/[0.03] border border-white/5 rounded-xl p-2.5\">\n                                        <div className=\"flex justify-between items-center mb-1\">\n                                            <span className=\"text-[9px] uppercase text-red-500/50 font-black tracking-widest\">Borrow</span>\n                                            {pos.borrowApy > 0 && <span className=\"text-[10px] font-black text-red-400\">-{pos.borrowApy.toFixed(2)}%</span>}\n                                        </div>\n                                        <div className=\"text-xs font-black text-white font-mono\">\n                                            {pos.borrow > 0 ? pos.borrow.toFixed(4) : '—'}\n                                        </div>\n                                        {pos.borrowUSD > 0 && <div className=\"text-[9px] text-muted-foreground/40 font-bold\">${pos.borrowUSD.toFixed(2)}</div>}\n                                    </div>\n                                </div>\n\n                                {protocolId === 'venus' && pos.supply > 0 && (\n                                    <div className=\"mt-3 flex items-center justify-between bg-white/[0.02] border border-white/5 rounded-xl px-3 py-2\" onClick={(e) => e.stopPropagation()}>\n                                        <div className=\"flex flex-col\">\n                                            <span className=\"text-[9px] uppercase text-muted-foreground/60 font-black tracking-widest\">Collateral Mode</span>\n                                            <span className=\"text-[10px] text-blue-400/80 font-bold italic\">Required for Borrowing</span>\n                                        </div>\n                                        {togglingAssets[pos.vTokenAddress] ? (\n                                            <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\n                                        ) : (\n                                            <Switch\n                                                checked={pos.isCollateral}\n                                                onCheckedChange={() => handleCollateralToggle(pos.vTokenAddress, pos.symbol, pos.isCollateral)}\n                                                disabled={togglingAssets[pos.vTokenAddress]}\n                                            />\n                                        )}\n                                    </div>\n                                )}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    };\n\n    const protocols = [\n        { id: 'venus', name: 'Venus', img: '/venus.png', supply: venusSupply, borrow: venusBorrow, health: venusHealth, positions: venusPositions, utilization: venusHealth.borrowPowerUSD > 0 ? (venusHealth.debtUSD / venusHealth.borrowPowerUSD) * 100 : 0, apy: venusNetAPY },\n        { id: 'kinza', name: 'Kinza', img: '/kinza.png', supply: kinzaSupply, borrow: kinzaBorrow, health: kinzaHealth, positions: kinzaPositions, utilization: kinzaHealth.borrowPowerUSD > 0 ? (kinzaHealth.debtUSD / kinzaHealth.borrowPowerUSD) * 100 : 0, apy: kinzaNetAPY },\n        { id: 'radiant', name: 'Radiant', img: '/radiant.jpeg', supply: radiantSupply, borrow: radiantBorrow, health: radiantHealth, positions: radiantPositions, utilization: radiantHealth.borrowPowerUSD > 0 ? (radiantHealth.debtUSD / radiantHealth.borrowPowerUSD) * 100 : 0, apy: radiantNetAPY },\n    ];\n\n    return (\n        <div className=\"container pt-0 md:pt-8 pb-24 space-y-8 max-w-screen-2xl mx-auto px-0 md:px-16\">\n            <div className=\"flex items-center justify-between px-4 md:px-0\">\n                <div>\n                    <h1 className=\"text-3xl font-bold tracking-tight mb-2 font-outfit bg-clip-text text-transparent bg-gradient-to-r from-primary to-emerald-400\">\n                        My Portfolio\n                    </h1>\n                    <div className=\"text-sm text-muted-foreground\">Detailed breakdown of your DeFi positions across Arbitrum.</div>\n                </div>\n                {walletAddress && (\n                    <div className=\"text-xs font-mono bg-muted px-3 py-1 rounded-full text-muted-foreground\">\n                        Wallet: {String(walletAddress).substring(0, 6)}...{String(walletAddress).substring(38)}\n                    </div>\n                )}\n            </div>\n\n            {/* Main Stats Grid */}\n            <div className=\"grid grid-cols-2 gap-4 md:grid-cols-2 lg:grid-cols-4 lg:gap-6 px-4 md:px-0\">\n                {/* Net Worth */}\n                <div className=\"group relative overflow-hidden rounded-[2rem] bg-[#0A0A0B] border border-white/10 p-5 md:p-8 transition-all hover:bg-white/[0.04] shadow-2xl\">\n                    <div className=\"flex flex-col h-full justify-between\">\n                        <div className=\"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 mb-5 md:mb-8\">\n                            <div className=\"w-9 h-9 md:w-11 md:h-11 rounded-full bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 shrink-0\">\n                                <span className=\"text-lg md:text-xl font-black text-emerald-500\">$</span>\n                            </div>\n                            <div className=\"flex flex-col min-w-0\">\n                                <span className=\"text-[10px] md:text-xs font-black uppercase tracking-[0.1em] md:tracking-[0.2em] text-muted-foreground/40 leading-none\">Net Worth</span>\n                            </div>\n                        </div>\n                        <div>\n                            <div className=\"text-2xl md:text-5xl font-bold text-white leading-none tracking-tight mb-2 md:mb-3\">\n                                ${(totalNetWorth || 0).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                            </div>\n                            <div className=\"flex items-center gap-2 mt-1\">\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\" />\n                                {healthData.isLoading && address ? (\n                                    <span className=\"text-[8px] md:text-[10px] font-bold text-muted-foreground/50 uppercase tracking-widest leading-none\">Loading...</span>\n                                ) : (\n                                    <div className=\"flex items-baseline gap-1.5\">\n                                        <span className=\"text-sm font-black text-emerald-400 leading-none\">\n                                            {globalNetAPY > 0 ? '+' : ''}{globalNetAPY.toFixed(2)}%\n                                        </span>\n                                        <span className=\"text-[8px] md:text-[10px] font-bold text-muted-foreground/50 uppercase tracking-widest leading-none\">\n                                            Net APY\n                                        </span>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Total Supplied */}\n                <div className=\"group relative overflow-hidden rounded-[2rem] bg-[#0A0A0B] border border-white/10 p-5 md:p-8 transition-all hover:bg-white/[0.04] shadow-2xl\">\n                    <div className=\"flex flex-col h-full justify-between\">\n                        <div className=\"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 mb-5 md:mb-8\">\n                            <div className=\"w-9 h-9 md:w-11 md:h-11 rounded-full bg-emerald-400/10 flex items-center justify-center border border-emerald-400/20 shrink-0\">\n                                <TrendingUp className=\"w-4 h-4 md:w-5 md:h-5 text-emerald-400\" />\n                            </div>\n                            <div className=\"flex flex-col min-w-0\">\n                                <span className=\"text-[10px] md:text-xs font-black uppercase tracking-[0.1em] md:tracking-[0.2em] text-muted-foreground/40 leading-none\">Total Supplied</span>\n                            </div>\n                        </div>\n                        <div>\n                            <div className=\"text-2xl md:text-5xl font-bold text-emerald-400 leading-none tracking-tight mb-2 md:mb-3\">\n                                ${!address ? '0.00' : healthData.isLoading ? '...' : totalSupplied.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.5)]\" />\n                                <span className=\"text-[8px] md:text-[10px] font-bold text-muted-foreground/50 uppercase tracking-widest leading-none\">Collateral & Liquidity</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Total Borrowed */}\n                <div className=\"group relative overflow-hidden rounded-[2rem] bg-[#0A0A0B] border border-white/10 p-5 md:p-8 transition-all hover:bg-white/[0.04] shadow-2xl\">\n                    <div className=\"flex flex-col h-full justify-between\">\n                        <div className=\"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 mb-5 md:mb-8\">\n                            <div className=\"w-9 h-9 md:w-11 md:h-11 rounded-full bg-red-500/10 flex items-center justify-center border border-red-500/20 shrink-0\">\n                                <AlertTriangle className=\"w-4 h-4 md:w-5 md:h-5 text-red-500\" />\n                            </div>\n                            <div className=\"flex flex-col min-w-0\">\n                                <span className=\"text-[10px] md:text-xs font-black uppercase tracking-[0.1em] md:tracking-[0.2em] text-muted-foreground/40 leading-none\">Total Borrowed</span>\n                            </div>\n                        </div>\n                        <div>\n                            <div className=\"text-2xl md:text-5xl font-bold text-red-500 leading-none tracking-tight mb-2 md:mb-3\">\n                                ${!address ? '0.00' : healthData.isLoading ? '...' : totalDebt.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\" />\n                                <span className=\"text-[8px] md:text-[10px] font-bold text-muted-foreground/50 uppercase tracking-widest leading-none\">Global Borrowed Amount</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Projected Earnings */}\n                <div className=\"group relative overflow-hidden rounded-[2rem] bg-[#0A0A0B] border border-white/10 p-5 md:p-8 transition-all hover:bg-white/[0.04] shadow-2xl\">\n                    <div className=\"absolute top-0 right-0 p-2 md:p-4 opacity-5 group-hover:opacity-100 transition-opacity\">\n                        <div className=\"w-5 h-5 md:w-8 md:h-8 rounded-full bg-white/10 flex items-center justify-center border border-white/5\">\n                            <TrendingUp className=\"w-3 h-3 md:w-4 md:h-4 text-white\" />\n                        </div>\n                    </div>\n                    <div className=\"flex flex-col h-full justify-between\">\n                        <div className=\"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 mb-5 md:mb-8\">\n                            <div className=\"w-9 h-9 md:w-11 md:h-11 rounded-full bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 shrink-0\">\n                                <span className=\"text-lg md:text-xl font-black text-emerald-500\">$</span>\n                            </div>\n                            <div className=\"flex flex-col min-w-0\">\n                                <span className=\"text-[10px] md:text-xs font-black uppercase tracking-[0.1em] md:tracking-[0.2em] text-muted-foreground/40 leading-none\">Est. Earnings</span>\n                            </div>\n                        </div>\n                        <div>\n                            <div className=\"text-2xl md:text-5xl font-bold text-emerald-400 leading-none tracking-tight mb-2 md:mb-3\">\n                                ${!address ? '0.00' : healthData.isLoading ? '...' : (totalNetWorth * (globalNetAPY / 100)).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\" />\n                                <span className=\"text-[8px] md:text-[10px] font-bold text-muted-foreground/50 uppercase tracking-widest leading-none\">Projected Annual Yield</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Protocol Allocation Chart */}\n                <Card className=\"lg:col-span-1 mx-4 md:mx-0 border border-border bg-card\">\n                    <CardHeader className=\"pb-2\">\n                        <CardTitle className=\"text-lg md:text-2xl\">Protocol Allocation</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"pb-6\">\n                        {allocationData.length > 0 ? (\n                            <>\n                                <div className=\"h-[240px] w-full relative outline-none focus:outline-none\">\n                                    <CenterHealthLabel score={overallScore} />\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                        <PieChart>\n                                            <Pie\n                                                className=\"outline-none focus:outline-none\"\n                                                data={allocationData}\n                                                innerRadius={65}\n                                                outerRadius={90}\n                                                paddingAngle={4}\n                                                dataKey=\"value\"\n                                                cornerRadius={8}\n                                                stroke=\"none\"\n                                            >\n                                                {allocationData.map((entry, index) => (\n                                                    <Cell key={`cell-${index}`} fill={entry.color} />\n                                                ))}\n                                            </Pie>\n                                            <RechartsTooltip\n                                                content={<CustomTooltip />}\n                                                wrapperStyle={{ zIndex: 40 }}\n                                            />\n                                        </PieChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                {/* Legend */}\n                                <div className=\"flex justify-center gap-4 mt-4\">\n                                    {allocationData.map((entry, index) => (\n                                        <div key={index} className=\"flex items-center gap-1.5 text-xs\">\n                                            <div className=\"w-2.5 h-2.5 rounded-full\" style={{ backgroundColor: entry.color }} />\n                                            <span className=\"text-muted-foreground\">{entry.name}</span>\n                                        </div>\n                                    ))}\n                                </div>\n                            </>\n                        ) : (\n                            <div className=\"flex h-full flex-col items-center justify-center text-muted-foreground gap-2\">\n                                <div className=\"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center\">\n                                    <TrendingUp className=\"opacity-50\" />\n                                </div>\n                                <span className=\"text-sm font-medium\">No active positions</span>\n                                <span className=\"text-xs opacity-50 text-center px-4\">Assets supplied to Venus, Kinza, or Radiant will appear here.</span>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                {/* Protocol Breakdown Table */}\n                <Card className=\"lg:col-span-2 mx-1 md:mx-0 border border-border bg-card\">\n                    <CardHeader className=\"p-3 md:p-6 pb-2 md:pb-4\">\n                        <CardTitle>Protocol Breakdown</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"p-2 md:p-6\">\n                        {/* Desktop Table */}\n                        <div className=\"rounded-md border border-border overflow-hidden hidden md:block\">\n                            <table className=\"w-full text-sm text-left\">\n                                <thead className=\"bg-muted text-muted-foreground\">\n                                    <tr>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest\">Protocol</th>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest text-right\">Liquidity / Collateral</th>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest text-right\">Debt</th>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest text-right\">Net APY</th>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest text-center\">Utilization</th>\n                                        <th className=\"p-4 font-black uppercase text-[10px] tracking-widest text-center\">Health</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"divide-y divide-border\">\n                                    {protocols.map((proto) => (\n                                        <React.Fragment key={proto.id}>\n                                            <tr\n                                                className={cn(\n                                                    \"transition-all cursor-pointer\",\n                                                    expandedProtocol === proto.id ? \"bg-white/[0.03]\" : \"hover:bg-muted/50\"\n                                                )}\n                                                onClick={() => toggleExpand(proto.id)}\n                                            >\n                                                <td className=\"p-4 font-bold flex items-center gap-3\">\n                                                    <div className=\"w-8 h-8 rounded-full overflow-hidden bg-white shadow-sm border border-white/10\">\n                                                        <img src={proto.img} className=\"w-full h-full object-cover\" alt={proto.name} />\n                                                    </div>\n                                                    <div className=\"flex flex-col\">\n                                                        <span className=\"text-sm font-black tracking-tight\">{proto.name}</span>\n                                                        <span className=\"text-[9px] text-muted-foreground uppercase font-black tracking-widest leading-none mt-1\">\n                                                            {expandedProtocol === proto.id ? 'Hide Details' : 'Show Details'}\n                                                        </span>\n                                                    </div>\n                                                    {expandedProtocol === proto.id ? <ChevronUp size={16} className=\"text-primary ml-auto\" /> : <ChevronDown size={16} className=\"text-muted-foreground ml-auto\" />}\n                                                </td>\n                                                <td className=\"p-4 text-right font-mono\">${proto.supply.toFixed(2)}</td>\n                                                <td className=\"p-4 text-right font-mono text-red-400\">${proto.borrow.toFixed(2)}</td>\n                                                <td className=\"p-4 text-right font-mono text-emerald-400 font-bold\">{proto.apy.toFixed(2)}%</td>\n                                                <td className=\"p-4 min-w-[140px]\">\n                                                    <div className=\"flex flex-col gap-1.5 px-2\">\n                                                        <div className=\"flex justify-between items-center text-[10px] font-mono\">\n                                                            <span className=\"text-muted-foreground\">Credit Used</span>\n                                                            <span className={cn(\n                                                                \"font-bold\",\n                                                                proto.utilization > 90 ? \"text-red-400\" : proto.utilization > 70 ? \"text-amber-400\" : \"text-emerald-400\"\n                                                            )}>\n                                                                {proto.utilization.toFixed(1)}%\n                                                            </span>\n                                                        </div>\n                                                        <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden border border-white/5\">\n                                                            <motion.div\n                                                                className={cn(\n                                                                    \"h-full rounded-full transition-all duration-500\",\n                                                                    proto.utilization > 90 ? \"bg-red-500\" : proto.utilization > 70 ? \"bg-amber-500\" : \"bg-emerald-500\"\n                                                                )}\n                                                                initial={{ width: 0 }}\n                                                                animate={{ width: `${Math.min(100, proto.utilization)}%` }}\n                                                            />\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td className=\"p-4 text-center\">\n                                                    <HealthBadge health={proto.health} />\n                                                </td>\n                                            </tr>\n                                            {expandedProtocol === proto.id && (\n                                                <tr>\n                                                    <td colSpan={6} className=\"p-0 border-b-2 border-primary/20 bg-primary/[0.01]\">\n                                                        {renderPositionsTable(proto.positions, proto.id)}\n                                                    </td>\n                                                </tr>\n                                            )}\n                                        </React.Fragment>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n\n                        {/* Mobile Card View */}\n                        <div className=\"md:hidden space-y-4\">\n                            {protocols.map((proto) => (\n                                <div\n                                    key={proto.id}\n                                    className={cn(\n                                        \"rounded-xl border transition-all overflow-hidden\",\n                                        expandedProtocol === proto.id ? \"border-primary/40 bg-white/[0.04] shadow-lg shadow-black/40\" : \"border-border bg-card\"\n                                    )}\n                                >\n                                    <div className=\"p-4 flex flex-col gap-4 cursor-pointer\" onClick={() => toggleExpand(proto.id)}>\n                                        {/* Top Row: Identity & Action */}\n                                        <div className=\"flex items-center justify-between\">\n                                            <div className=\"flex items-center gap-3\">\n                                                <div className=\"w-10 h-10 rounded-full overflow-hidden bg-white border border-white/10 shadow-sm\">\n                                                    <img src={proto.img} className=\"w-full h-full object-cover\" alt={proto.name} />\n                                                </div>\n                                                <div>\n                                                    <div className=\"font-black text-lg tracking-tight leading-none mb-1.5\">{proto.name}</div>\n                                                    <div className=\"flex items-center gap-3 text-[10px] uppercase font-black tracking-widest leading-none\">\n                                                        <div className=\"flex flex-col gap-0.5\">\n                                                            <span className=\"text-muted-foreground/50 text-[8px]\">Net Worth</span>\n                                                            <span className=\"text-white text-xs\">${(proto.supply - proto.borrow).toFixed(2)}</span>\n                                                        </div>\n                                                        <div className=\"w-px h-6 bg-white/10\" />\n                                                        <div className=\"flex flex-col gap-0.5\">\n                                                            <span className=\"text-emerald-500/50 text-[8px]\">Net APY</span>\n                                                            <span className=\"text-emerald-400 text-xs\">{proto.apy.toFixed(2)}%</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center gap-2\">\n                                                <HealthBadge health={proto.health} />\n                                                {expandedProtocol === proto.id ? <ChevronUp size={20} className=\"text-muted-foreground\" /> : <ChevronDown size={20} className=\"text-muted-foreground\" />}\n                                            </div>\n                                        </div>\n\n                                        {/* Middle Section: Supply & Debt Grid */}\n                                        <div className=\"grid grid-cols-2 gap-3\">\n                                            <div className=\"bg-white/[0.03] border border-white/5 rounded-xl p-3 flex flex-col gap-1\">\n                                                <span className=\"text-[10px] uppercase text-emerald-500/50 font-black tracking-widest\">Supply</span>\n                                                <span className=\"text-sm font-black text-white font-mono\">${proto.supply.toFixed(2)}</span>\n                                            </div>\n                                            <div className=\"bg-white/[0.03] border border-white/5 rounded-xl p-3 flex flex-col gap-1\">\n                                                <span className=\"text-[10px] uppercase text-red-500/50 font-black tracking-widest\">Debt</span>\n                                                <span className=\"text-sm font-black text-red-400 font-mono\">${proto.borrow.toFixed(2)}</span>\n                                            </div>\n                                        </div>\n\n                                        {/* Bottom Section: Utilization Progress */}\n                                        <div className=\"bg-white/[0.02] rounded-xl p-3 border border-white/5\">\n                                            <div className=\"flex justify-between items-center text-[10px] mb-2 font-black\">\n                                                <span className=\"text-muted-foreground/60 uppercase tracking-widest\">Utilization</span>\n                                                <span className={cn(\n                                                    \"font-black tabular-nums tracking-tighter\",\n                                                    proto.utilization > 90 ? \"text-red-400\" : proto.utilization > 70 ? \"text-amber-400\" : \"text-emerald-400\"\n                                                )}>\n                                                    {proto.utilization.toFixed(1)}%\n                                                </span>\n                                            </div>\n                                            <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\n                                                <motion.div\n                                                    className={cn(\n                                                        \"h-full rounded-full\",\n                                                        proto.utilization > 90 ? \"bg-red-500\" : proto.utilization > 70 ? \"bg-amber-500\" : \"bg-emerald-500\"\n                                                    )}\n                                                    initial={{ width: 0 }}\n                                                    animate={{ width: `${Math.min(100, proto.utilization)}%` }}\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                    {expandedProtocol === proto.id && (\n                                        <div className=\"border-t border-white/10 shadow-inner\">\n                                            {renderPositionsTable(proto.positions, proto.id)}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </CardContent>\n                </Card>\n            </div>\n        </div>\n    );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\RiskMonitor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RadialBarChart' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RadialBarChart"},"fix":{"range":[118,133],"text":""},"desc":"Remove unused variable \"RadialBarChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RadialBar' is defined but never used.","line":5,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RadialBar"},"fix":{"range":[132,143],"text":""},"desc":"Remove unused variable \"RadialBar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PolarAngleAxis' is defined but never used.","line":5,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":51,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PolarAngleAxis"},"fix":{"range":[143,159],"text":""},"desc":"Remove unused variable \"PolarAngleAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResponsiveContainer' is defined but never used.","line":5,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":72,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ResponsiveContainer"},"fix":{"range":[109,201],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'liquidationThreshold' is defined but never used.","line":20,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'propCurrentPrice' is assigned a value but never used.","line":22,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":49,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cx' is assigned a value but never used.","line":53,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cy' is assigned a value but never used.","line":54,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'iR' is assigned a value but never used.","line":55,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'oR' is assigned a value but never used.","line":56,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'value' is assigned a value but never used.","line":57,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'startAngle' is assigned a value but never used.","line":62,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'endAngle' is assigned a value but never used.","line":63,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { RadialBarChart, RadialBar, PolarAngleAxis, ResponsiveContainer } from 'recharts';\r\nimport { AlertTriangle, ShieldCheck, Zap } from 'lucide-react';\r\n\r\ninterface RiskMonitorProps {\r\n    healthFactor?: number;\r\n    liquidationThreshold?: number;\r\n    liquidationPrice?: number;\r\n    currentPrice?: number;\r\n    pairName?: string;\r\n    projectedDrop?: number;\r\n    dropLabel?: string;\r\n}\r\n\r\nexport function RiskMonitor({\r\n    healthFactor: propHealthFactor,\r\n    liquidationThreshold,\r\n    liquidationPrice: propLiqPrice = 485.50,\r\n    currentPrice: propCurrentPrice = 612.30,\r\n    pairName = 'ETH/USD',\r\n    projectedDrop: propDrop = -20.7,\r\n    dropLabel = 'Projected Drop'\r\n}: RiskMonitorProps) {\r\n    // Simulated health factor oscillating slightly (fallback)\r\n    const [simulatedHealth, setSimulatedHealth] = useState(1.45);\r\n\r\n    // Use props if available, otherwise simulation\r\n    const healthFactor = propHealthFactor ?? simulatedHealth;\r\n\r\n    // Safety thresholds\r\n    const isSafe = healthFactor > 1.5;\r\n    const isModerate = healthFactor > 1.1 && healthFactor <= 1.5;\r\n\r\n    // Animate health factor for demo effect if no props\r\n    useEffect(() => {\r\n        if (propHealthFactor !== undefined) return;\r\n        const interval = setInterval(() => {\r\n            setSimulatedHealth(prev => {\r\n                const noise = (Math.random() - 0.5) * 0.05;\r\n                return Math.max(1.0, Math.min(2.0, prev + noise));\r\n            });\r\n        }, 2000);\r\n        return () => clearInterval(interval);\r\n    }, [propHealthFactor]);\r\n\r\n    const data = [\r\n        { name: 'Health', value: healthFactor, fill: isSafe ? '#10b981' : isModerate ? '#f59e0b' : '#ef4444' },\r\n    ];\r\n\r\n    const cx = 150;\r\n    const cy = 150;\r\n    const iR = 80;\r\n    const oR = 100;\r\n    const value = healthFactor;\r\n\r\n    // Calculate angle for needle\r\n    // 1.0 = 180deg (Left), 2.0 = 0deg (Right)\r\n    // Scale: 0 to 3\r\n    const startAngle = 180;\r\n    const endAngle = 0;\r\n\r\n    return (\r\n        <Card className=\"relative overflow-hidden border-none bg-black/40 backdrop-blur-xl h-full flex flex-col justify-between\">\r\n            <div className={`absolute top-0 right-0 p-4 opacity-20 blur-3xl w-32 h-32 rounded-full ${isSafe ? 'bg-emerald-500' : isModerate ? 'bg-amber-500' : 'bg-red-500'}`}></div>\r\n\r\n            <div className=\"p-6 relative z-10 flex flex-col h-full\">\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                    <div>\r\n                        <h3 className=\"text-lg font-bold font-outfit text-white\">Risk Monitor</h3>\r\n                        <p className=\"text-xs text-muted-foreground\">Real-time Health Factor tracking</p>\r\n                    </div>\r\n                    <div className={`px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 ${isSafe ? 'bg-emerald-500/20 text-emerald-500' : isModerate ? 'bg-amber-500/20 text-amber-500' : 'bg-red-500/20 text-red-500'}`}>\r\n                        {isSafe ? <ShieldCheck size={12} /> : isModerate ? <AlertTriangle size={12} /> : <Zap size={12} />}\r\n                        <span>{isSafe ? 'Protected' : isModerate ? 'Attention' : 'Critical'}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Simplified Gauge Visualization using CSS/SVG for cleaner look than Recharts sometimes */}\r\n                <div className=\"flex-1 flex items-center justify-center relative my-4\">\r\n                    {/* Background Arc */}\r\n                    <svg viewBox=\"0 0 200 120\" className=\"w-full h-32\">\r\n                        <path d=\"M 40 100 A 60 60 0 0 1 160 100\" fill=\"none\" stroke=\"#333\" strokeWidth=\"12\" strokeLinecap=\"round\" />\r\n                        {/* Value Arc */}\r\n                        <path\r\n                            d=\"M 40 100 A 60 60 0 0 1 160 100\"\r\n                            fill=\"none\"\r\n                            stroke={isSafe ? '#10b981' : isModerate ? '#f59e0b' : '#ef4444'}\r\n                            strokeWidth=\"12\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeDasharray=\"188.5\"\r\n                            strokeDashoffset={188.5 - (Math.min(healthFactor, 3) / 3) * 188.5 * 1.5} // Rough calibration\r\n                            className=\"transition-all duration-1000 ease-out\"\r\n                        />\r\n                    </svg>\r\n                    <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-center\">\r\n                        <div className=\"text-3xl font-bold font-mono text-white tracking-tighter\">\r\n                            {healthFactor >= 999 ? '∞' : healthFactor.toFixed(2)}\r\n                        </div>\r\n                        <div className={`text-[10px] font-bold uppercase tracking-widest ${isSafe ? 'text-emerald-500' : isModerate ? 'text-amber-500' : 'text-red-500'}`}>\r\n                            {isSafe ? 'Safe' : isModerate ? 'Moderate' : 'Critical'}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"grid grid-cols-2 gap-3 mt-4\">\r\n                    <div className=\"bg-white/5 p-3 rounded-lg border border-white/5\">\r\n                        <div className=\"text-[10px] text-muted-foreground uppercase mb-1\">Liq. Price (Est.)</div>\r\n                        <div className=\"text-lg font-bold text-white\">\r\n                            ${propLiqPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                        </div>\r\n                        <div className=\"text-[10px] text-muted-foreground\">{pairName}</div>\r\n                    </div>\r\n                    <div className=\"bg-white/5 p-3 rounded-lg border border-white/5 relative overflow-hidden\">\r\n                        {Math.abs(propDrop) < 5 && <div className=\"absolute inset-0 bg-red-500/5 animate-pulse\"></div>}\r\n                        <div className=\"text-[10px] text-muted-foreground uppercase mb-1 relative z-10\">{dropLabel}</div>\r\n                        <div className={`text-lg font-bold relative z-10 ${Math.abs(propDrop) > 5 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                            {propDrop > 0 ? '+' : ''}{propDrop.toFixed(2)}%\r\n                        </div>\r\n                        <div className=\"text-[10px] text-muted-foreground relative z-10\">to Liquidate</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1521,1524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1521,1524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":332,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18966,19082],"text":"\n                                    Your Agent&apos;s trigger points for notifications.\n                                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18966,19082],"text":"\n                                    Your Agent&lsquo;s trigger points for notifications.\n                                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18966,19082],"text":"\n                                    Your Agent&#39;s trigger points for notifications.\n                                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18966,19082],"text":"\n                                    Your Agent&rsquo;s trigger points for notifications.\n                                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAccount, useSignMessage } from 'wagmi';\nimport { ConnectButton } from '@rainbow-me/rainbowkit';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Bell, ShieldCheck, Copy, Check, Wallet, Clock, AlertTriangle } from 'lucide-react';\nimport { useToast } from '@/components/ui/use-toast';\nimport { supabase } from '@/lib/supabase';\nimport { Badge } from '@/components/ui/badge';\nimport { Skeleton } from '@/components/ui/skeleton';\n\n// Polling interval options\nconst POLLING_OPTIONS = [\n    { value: 60, label: \"1 hour\" },\n    { value: 120, label: \"2 hours\" },\n    { value: 360, label: \"6 hours\" },\n    { value: 720, label: \"12 hours\" },\n    { value: 960, label: \"16 hours\" },\n    { value: 1440, label: \"24 hours\" },\n];\n\nexport default function Settings() {\n    const { address, isConnected } = useAccount();\n    const { signMessageAsync } = useSignMessage();\n    const { toast } = useToast();\n\n    const [telegramId, setTelegramId] = useState('');\n    const [signature, setSignature] = useState('');\n    const [isCopied, setIsCopied] = useState(false);\n    const [step, setStep] = useState(1);\n\n    // Supabase State\n    const [isLinked, setIsLinked] = useState<boolean | null>(null); // null = loading, false = disconnected, true = connected\n    const [linkedUser, setLinkedUser] = useState<any>(null);\n    const [isFetchingSettings, setIsFetchingSettings] = useState(false);\n\n    // Settings state (Fetched from Supabase)\n    const [pollingInterval, setPollingInterval] = useState(60);\n    const [alertThreshold, setAlertThreshold] = useState(1.1);\n\n    // Fetch user settings from Supabase when address changes\n    useEffect(() => {\n        const fetchUserSettings = async () => {\n            if (!address) {\n                setIsLinked(false);\n                return;\n            }\n\n            setIsFetchingSettings(true);\n            try {\n                const { data, error } = await supabase\n                    .from('users')\n                    .select('*')\n                    .eq('wallet_address', address.toLowerCase())\n                    .single();\n\n                if (error || !data) {\n                    setIsLinked(false);\n                    setLinkedUser(null);\n                } else {\n                    setIsLinked(true);\n                    setLinkedUser(data);\n                    setPollingInterval(data.polling_interval || 60);\n                    setAlertThreshold(data.alert_threshold || 1.1);\n                    console.log('User settings fetched:', data);\n                }\n            } catch (err) {\n                console.error('Error fetching user settings:', err);\n                setIsLinked(false);\n            } finally {\n                setIsFetchingSettings(false);\n            }\n        };\n\n        if (isConnected) {\n            fetchUserSettings();\n        }\n    }, [address, isConnected]);\n\n    const handleSign = async () => {\n        if (!telegramId) {\n            toast({\n                title: \"Error\",\n                description: \"Please enter your Telegram User ID first.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        try {\n            const message = `ArbiLoop Auth: ${telegramId}`;\n            const sig = await signMessageAsync({ message });\n            setSignature(sig);\n            setStep(3);\n            toast({\n                title: \"Signed Successfully\",\n                description: \"Signature generated. Copy it and send to the bot.\",\n            });\n        } catch (error) {\n            console.error(\"Signing failed:\", error);\n            toast({\n                title: \"Signing Failed\",\n                description: \"User rejected the signature request.\",\n                variant: \"destructive\"\n            });\n        }\n    };\n\n    const copySignature = () => {\n        if (!signature) return;\n        navigator.clipboard.writeText(`/verify ${signature}`);\n        setIsCopied(true);\n        setTimeout(() => setIsCopied(false), 2000);\n        toast({\n            title: \"Copied!\",\n            description: \"Command copied to clipboard. Paste it in Telegram.\",\n        });\n    };\n\n    // Helper to mask sensitive Telegram data\n    const maskUserId = (id: string | number) => {\n        const s = String(id);\n        if (s.length <= 4) return s;\n        return `${s.slice(0, 2)}**${s.slice(-2)}`;\n    };\n\n    const maskUsername = (name: string) => {\n        if (!name) return 'User';\n        if (name.length <= 4) return name;\n        return `${name.slice(0, 2)}***${name.slice(-2)}`;\n    };\n\n    return (\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            {!isConnected && (\n                <div className=\"flex z-10 flex-col items-center justify-center p-12 text-center glass-card rounded-2xl relative overflow-hidden\">\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-background/80 via-transparent to-transparent pointer-events-none\" />\n                    <ShieldCheck className=\"w-16 h-16 text-primary/80 mb-6 drop-shadow-[0_0_15px_rgba(206,255,0,0.3)]\" />\n                    <h3 className=\"text-2xl font-bold font-outfit mb-3\">Connect Wallet</h3>\n                    <p className=\"text-muted-foreground mb-8 max-w-md mx-auto\">\n                        Please connect your wallet securely to view your personalized dashboard and configure alerts.\n                    </p>\n                    <ConnectButton.Custom>\n                        {({ openConnectModal, mounted }) => {\n                            if (!mounted) return null;\n                            return (\n                                <Button\n                                    onClick={openConnectModal}\n                                    className=\"h-12 px-8 text-lg font-bold bg-[#CEFF00] text-black hover:bg-[#b8e600] rounded-full shadow-[0_0_20px_rgba(206,255,0,0.3)] transition-all hover:scale-105 flex items-center gap-2\"\n                                >\n                                    Connect Wallet <Wallet className=\"h-5 w-5\" />\n                                </Button>\n                            );\n                        }}\n                    </ConnectButton.Custom>\n                </div>\n            )}\n\n            {isConnected && (\n                <>\n                    <h1 className=\"text-3xl font-bold font-outfit bg-clip-text text-transparent bg-gradient-to-r from-primary to-emerald-400\">\n                        Settings & Alerts\n                    </h1>\n\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                        {/* Telegram Linking Card */}\n                        <Card className=\"glass-card\">\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center justify-between gap-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Bell className=\"text-primary\" />\n                                        Telegram Link\n                                    </div>\n                                    {isLinked === true && (\n                                        <Badge variant=\"outline\" className=\"bg-emerald-500/10 text-emerald-400 border-emerald-500/20\">\n                                            Linked to @{maskUsername(linkedUser?.username)}\n                                        </Badge>\n                                    )}\n                                    {isLinked === false && (\n                                        <Badge variant=\"outline\" className=\"bg-amber-500/10 text-amber-500 border-amber-500/20\">\n                                            Not Connected\n                                        </Badge>\n                                    )}\n                                </CardTitle>\n                                <CardDescription>\n                                    {isLinked\n                                        ? \"Your wallet is securely linked to Telegram for instant alerts.\"\n                                        : \"Link your Telegram account to receive instant liquidation alerts.\"}\n                                </CardDescription>\n                            </CardHeader>\n                            <CardContent className=\"space-y-4\">\n                                {isFetchingSettings ? (\n                                    <div className=\"space-y-4\">\n                                        <Skeleton className=\"h-20 w-full\" />\n                                        <Skeleton className=\"h-10 w-full\" />\n                                    </div>\n                                ) : isLinked ? (\n                                    <div className=\"p-4 rounded-lg bg-primary/5 border border-primary/20 space-y-3\">\n                                        <div className=\"flex justify-between items-center text-sm\">\n                                            <span className=\"text-muted-foreground\">Connected User ID</span>\n                                            <span className=\"font-mono text-foreground font-bold\">{maskUserId(linkedUser?.chat_id)}</span>\n                                        </div>\n                                        <div className=\"flex justify-between items-center text-sm\">\n                                            <span className=\"text-muted-foreground\">Alerts Status</span>\n                                            <span className={linkedUser?.alerts_enabled ? \"text-emerald-400 font-bold\" : \"text-amber-500 font-bold\"}>\n                                                {linkedUser?.alerts_enabled ? \"Active\" : \"Paused\"}\n                                            </span>\n                                        </div>\n                                        <Button\n                                            variant=\"secondary\"\n                                            className=\"w-full h-9 bg-[#0088cc] hover:bg-[#0077b5] text-white border-none flex items-center gap-2\"\n                                            onClick={() => window.open('https://t.me/ArbiLoopBot', '_blank')}\n                                        >\n                                            <svg className=\"w-4 h-4 fill-current\" viewBox=\"0 0 24 24\">\n                                                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z\" />\n                                            </svg>\n                                            Open Telegram Bot\n                                        </Button>\n                                        <Button\n                                            variant=\"outline\"\n                                            className=\"w-full text-xs h-8 border-dashed hover:bg-primary/10\"\n                                            onClick={() => {\n                                                setIsLinked(false);\n                                                setStep(1);\n                                                setTelegramId('');\n                                                setSignature('');\n                                            }}\n                                        >\n                                            Link different account\n                                        </Button>\n                                        <p className=\"text-[10px] text-muted-foreground text-center pt-2\">\n                                            To permanently disconnect, send <code className=\"bg-secondary px-1 rounded\">/disconnect</code> to the bot.\n                                        </p>\n                                    </div>\n                                ) : (\n                                    <>\n                                        {/* Step 1: Enter ID */}\n                                        <div className={`transition-opacity duration-300 ${step === 1 ? 'opacity-100' : 'opacity-50 pointer-events-none'}`}>\n                                            <label className=\"text-sm font-medium mb-1 block\">1. Enter Telegram User ID</label>\n                                            <div className=\"flex gap-2\">\n                                                <Input\n                                                    placeholder=\"e.g. 123456789\"\n                                                    value={telegramId}\n                                                    onChange={(e) => setTelegramId(e.target.value)}\n                                                    className=\"font-mono\"\n                                                />\n                                                <Button\n                                                    variant=\"outline\"\n                                                    onClick={() => window.open('https://t.me/ArbiLoopBot', '_blank')}\n                                                    className=\"shrink-0\"\n                                                >\n                                                    Get ID\n                                                </Button>\n                                            </div>\n                                            <p className=\"text-xs text-muted-foreground mt-1 text-[10px]\">\n                                                Use <code className=\"bg-secondary px-1 rounded\">/id</code> in the bot chat.\n                                            </p>\n                                        </div>\n\n                                        {/* Step 2: Sign Message */}\n                                        <div className={`transition-opacity duration-300 ${step >= 1 ? 'opacity-100' : 'opacity-50'}`}>\n                                            <label className=\"text-sm font-medium mb-1 block text-[12px]\">2. Ownership Verify</label>\n                                            <Button\n                                                onClick={handleSign}\n                                                className=\"w-full h-9 bg-primary/10 text-primary hover:bg-primary/20 border border-primary/30 text-xs font-bold\"\n                                                disabled={!telegramId}\n                                            >\n                                                Sign Auth Message\n                                            </Button>\n                                        </div>\n\n                                        {/* Step 3: Copy & Verify */}\n                                        {signature && (\n                                            <div className=\"p-3 rounded-lg bg-secondary/30 border border-border animate-in zoom-in-95\">\n                                                <label className=\"text-[10px] font-bold uppercase tracking-wider mb-2 block text-emerald-400\">3. Final Step</label>\n                                                <div className=\"flex items-center gap-2 p-2 bg-background/50 rounded border border-border\">\n                                                    <code className=\"text-[10px] flex-1 break-all truncate font-mono text-muted-foreground\">\n                                                        /verify {signature.substring(0, 15)}...\n                                                    </code>\n                                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-6 w-6\" onClick={copySignature}>\n                                                        {isCopied ? <Check size={14} className=\"text-emerald-500\" /> : <Copy size={14} />}\n                                                    </Button>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </>\n                                )}\n                            </CardContent>\n                        </Card>\n\n                        {/* Polling Interval Card (Read-Only) */}\n                        <Card className=\"glass-card\">\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <Clock className=\"text-blue-400\" />\n                                    Polling Frequency\n                                </CardTitle>\n                                <CardDescription>\n                                    How often your Agent checks your positions.\n                                </CardDescription>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"space-y-4\">\n                                    <div className=\"flex items-center justify-between p-4 rounded-lg bg-secondary/20 border border-primary/20\">\n                                        <span className=\"text-sm font-medium\">Active Interval</span>\n                                        <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-400 border-blue-500/20 text-sm py-1 px-3\">\n                                            Every {POLLING_OPTIONS.find(o => o.value === pollingInterval)?.label || `${pollingInterval} mins`}\n                                        </Badge>\n                                    </div>\n                                    <div className=\"p-3 rounded bg-secondary/20 border border-border flex items-start gap-2\">\n                                        <ShieldCheck size={14} className=\"text-primary shrink-0 mt-0.5\" />\n                                        <p className=\"text-[10px] leading-tight text-muted-foreground\">\n                                            Managed via Telegram. Use <code className=\"bg-secondary px-1 rounded\">/setinterval</code> to change.\n                                        </p>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        {/* Alert Threshold Card (Read-Only) */}\n                        <Card className=\"glass-card\">\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <AlertTriangle className=\"text-orange-500\" />\n                                    Risk Thresholds\n                                </CardTitle>\n                                <CardDescription>\n                                    Your Agent's trigger points for notifications.\n                                </CardDescription>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"space-y-6\">\n\n                                    {/* Health Factor Threshold */}\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between text-sm\">\n                                            <span className=\"text-muted-foreground\">Liquidation Alert at HF &lt;</span>\n                                            <span className=\"font-mono font-bold text-orange-500\">{alertThreshold.toFixed(1)}</span>\n                                        </div>\n                                        <div className=\"h-2 w-full bg-secondary/30 rounded-full overflow-hidden\">\n                                            <div\n                                                className=\"h-full bg-gradient-to-r from-red-500 to-orange-500\"\n                                                style={{ width: `${((alertThreshold - 1.0) / 1.0) * 100}%` }}\n                                            />\n                                        </div>\n                                        <div className=\"flex justify-between text-[10px] text-muted-foreground\">\n                                            <span>1.0 (High Risk)</span>\n                                            <span>2.0 (Safe)</span>\n                                        </div>\n                                    </div>\n\n                                    {/* Monitoring Toggles Status */}\n                                    <div className=\"grid grid-cols-2 gap-3\">\n                                        <div className=\"p-3 rounded bg-secondary/10 border border-border flex flex-col gap-2\">\n                                            <span className=\"text-xs text-muted-foreground\">Liquidation Alerts</span>\n                                            <div className=\"flex items-center gap-2\">\n                                                {linkedUser?.alerts_enabled\n                                                    ? <><Check className=\"w-4 h-4 text-emerald-500\" /><span className=\"text-sm font-bold text-emerald-500\">Active</span></>\n                                                    : <><span className=\"text-sm font-bold text-muted-foreground\">Disabled</span></>\n                                                }\n                                            </div>\n                                        </div>\n                                        <div className=\"p-3 rounded bg-secondary/10 border border-border flex flex-col gap-2\">\n                                            <span className=\"text-xs text-muted-foreground\">Daily Briefing</span>\n                                            <div className=\"flex items-center gap-2\">\n                                                {linkedUser?.daily_updates_enabled\n                                                    ? <><Check className=\"w-4 h-4 text-emerald-500\" /><span className=\"text-sm font-bold text-emerald-500\">Active</span></>\n                                                    : <><span className=\"text-sm font-bold text-muted-foreground\">Disabled</span></>\n                                                }\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"p-3 rounded bg-secondary/20 border border-border flex items-start gap-2\">\n                                        <AlertTriangle size={14} className=\"text-orange-500 shrink-0 mt-0.5\" />\n                                        <p className=\"text-[10px] leading-tight text-muted-foreground\">\n                                            Use <code className=\"bg-secondary px-1 rounded\">/setalert</code> or <code className=\"bg-secondary px-1 rounded\">/togglealerts</code> in Telegram to configure.\n                                        </p>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        {/* Info Card */}\n                        <Card className=\"glass-card border-primary/20\">\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <ShieldCheck className=\"text-emerald-500\" />\n                                    How It Works\n                                </CardTitle>\n                            </CardHeader>\n                            <CardContent className=\"space-y-3 text-sm text-muted-foreground\">\n                                <p>\n                                    <strong className=\"text-foreground\">24/7 AI Guardian:</strong> Your Agent monitors the blockchain while you sleep, ensuring you never miss a critical liquidation risk.\n                                </p>\n                                <p>\n                                    <strong className=\"text-foreground\">Sleep Peacefully:</strong> Get daily briefings and instant alerts so you can relax knowing your portfolio is watched.\n                                </p>\n                                <p>\n                                    <strong className=\"text-foreground\">Secure & Anonymous:</strong> This dashboard is read-only for your privacy. All critical actions (configuration, alerts) are handled securely via your private Telegram chat.\n                                </p>\n                                <div className=\"mt-4 p-3 rounded-lg bg-primary/10 border border-primary/20\">\n                                    <p className=\"text-xs\">\n                                        🔒 <strong>Security:</strong> We never ask for private keys. All on-chain transactions must be signed by your wallet.\n                                    </p>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </div>\n                </>\n            )}\n        </div>\n    );\n}\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\StrategyBuilder.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'writeContract' is assigned a value but never used.","line":57,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_s' is defined but never used.","line":61,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":49},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\StrategyBuilder.tsx:82:26\n  80 |         const protocolParam = searchParams.get('protocol');\n  81 |\n> 82 |         if (supplyParam) setSupplyAsset(supplyParam.toUpperCase());\n     |                          ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  83 |         if (borrowParam) setBorrowAsset(borrowParam.toUpperCase());\n  84 |         if (protocolParam) {\n  85 |             const p = protocolParam.toLowerCase();","line":82,"column":26,"nodeType":null,"endLine":82,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'safetyScoreLabel' is assigned a value but never used.","line":166,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hfColor' is assigned a value but never used.","line":167,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":167,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'assetAddr' is assigned a value but never used.","line":174,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":174,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'vTokenAddr' is assigned a value but never used.","line":175,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":175,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borrowAssetAddr' is assigned a value but never used.","line":176,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'vBorrowTokenAddr' is assigned a value but never used.","line":177,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":177,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'routerAddr' is assigned a value but never used.","line":178,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":178,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'comptrollerAddr' is assigned a value but never used.","line":179,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'amountWei' is assigned a value but never used.","line":182,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borrowAmountWei' is assigned a value but never used.","line":186,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":186,"endColumn":34},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":293,"column":37,"nodeType":"JSXOpeningElement","endLine":293,"endColumn":198}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useAccount, useWriteContract, useWaitForTransactionReceipt } from 'wagmi';\r\nimport { useConnectModal } from '@rainbow-me/rainbowkit';\r\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\r\nimport { useYields } from \"@/hooks/useYields\";\r\nimport { useTokenPrices } from \"@/hooks/useTokenPrices\";\r\nimport { ArrowRight, RefreshCw, AlertTriangle, TrendingUp, Layers, Check, ChevronDown, Banknote } from 'lucide-react';\r\nimport { RiskMonitor } from './RiskMonitor';\r\nimport { useToast } from \"@/components/ui/use-toast\";\r\n\r\n// Custom Dropdown Component for Theme Consistency\r\nfunction AssetSelect({ value, options, onChange }: { value: string, options: string[], onChange: (val: string) => void }) {\r\n    const [open, setOpen] = useState(false);\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <button\r\n                onClick={() => setOpen(!open)}\r\n                className=\"w-full h-12 pl-3 pr-3 rounded-lg border border-input bg-card flex items-center justify-between hover:bg-accent hover:text-accent-foreground transition-colors\"\r\n            >\r\n                <div className=\"flex items-center gap-2\">\r\n                    <AssetIcon symbol={value} size={24} />\r\n                    <span className=\"font-bold\">{value}</span>\r\n                </div>\r\n                <ChevronDown size={16} className={`text-muted-foreground transition-transform ${open ? 'rotate-180' : ''}`} />\r\n            </button>\r\n\r\n            {open && (\r\n                <>\r\n                    <div className=\"fixed inset-0 z-40\" onClick={() => setOpen(false)}></div>\r\n                    <div className=\"absolute top-full left-0 w-full mt-1 bg-popover border border-border rounded-lg shadow-xl z-50 max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100\">\r\n                        {options.map((opt) => (\r\n                            <div\r\n                                key={opt}\r\n                                className={`flex items-center gap-2 px-3 py-2.5 cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors ${value === opt ? 'bg-accent/50' : ''}`}\r\n                                onClick={() => { onChange(opt); setOpen(false); }}\r\n                            >\r\n                                <AssetIcon symbol={opt} size={20} />\r\n                                <span className={`flex-1 ${value === opt ? 'font-bold' : ''}`}>{opt}</span>\r\n                                {value === opt && <Check size={14} className=\"text-primary\" />}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function StrategyBuilder() {\r\n    const { address } = useAccount();\r\n    const { writeContract, data: hash, isPending: isWritePending } = useWriteContract();\r\n    const { isLoading: isConfirming, isSuccess: isConfirmed } = useWaitForTransactionReceipt({ hash });\r\n    const { data: yields } = useYields();\r\n    const { data: priceData } = useTokenPrices();\r\n    const getPrice = priceData?.getPrice || ((_s: string) => 0);\r\n    const { toast } = useToast();\r\n    const { openConnectModal } = useConnectModal();\r\n    const searchParams = useSearchParams();\r\n\r\n    // -- State --\r\n    const [selectedProtocol, setSelectedProtocol] = useState<'venus' | 'kinza' | 'radiant'>('venus');\r\n    const [refinanceToProtocol, setRefinanceToProtocol] = useState<'venus' | 'kinza' | 'radiant'>('kinza');\r\n\r\n    const [supplyAsset, setSupplyAsset] = useState('BNB');\r\n    const [borrowAsset, setBorrowAsset] = useState('USDT'); // Asset to borrow (and swap back to Supply Asset)\r\n    const [amount, setAmount] = useState<string>('');\r\n    const [leverage, setLeverage] = useState(1.5);\r\n    const [mode, setMode] = useState<'loop' | 'unwind' | 'refinance'>('loop');\r\n\r\n    // -- Read URL params for preselection --\r\n    useEffect(() => {\r\n        const supplyParam = searchParams.get('supply');\r\n        const borrowParam = searchParams.get('borrow');\r\n        const protocolParam = searchParams.get('protocol');\r\n\r\n        if (supplyParam) setSupplyAsset(supplyParam.toUpperCase());\r\n        if (borrowParam) setBorrowAsset(borrowParam.toUpperCase());\r\n        if (protocolParam) {\r\n            const p = protocolParam.toLowerCase();\r\n            if (p === 'venus' || p === 'kinza' || p === 'radiant') {\r\n                setSelectedProtocol(p);\r\n            }\r\n        }\r\n    }, [searchParams]);\r\n\r\n    // -- Effects for Toast --\r\n    useEffect(() => {\r\n        if (isConfirmed) {\r\n            toast({\r\n                title: \"Transaction Confirmed!\",\r\n                description: \"Your strategy has been successfully executed on-chain.\",\r\n                variant: \"default\", // success\r\n            });\r\n        }\r\n    }, [isConfirmed, toast]);\r\n\r\n    // Derived Data\r\n    const protocolAssets = useMemo(() => {\r\n        if (!yields) return [];\r\n        return yields.filter(p => p.project === selectedProtocol);\r\n    }, [yields, selectedProtocol]);\r\n\r\n    const targetProtocolAssets = useMemo(() => { // For Refinance\r\n        if (!yields) return [];\r\n        return yields.filter(p => p.project === refinanceToProtocol);\r\n    }, [yields, refinanceToProtocol]);\r\n\r\n    const supplyPool = protocolAssets.find(p => p.symbol === supplyAsset);\r\n    const borrowPool = protocolAssets.find(p => p.symbol === borrowAsset);\r\n    const targetSupplyPool = targetProtocolAssets.find(p => p.symbol === supplyAsset); // Refinance Target\r\n\r\n    // Calculation Logic (USD Based)\r\n    const principalAmount = parseFloat(amount) || 0;\r\n    const priceSupply = getPrice(supplyAsset) || 0;\r\n    const priceBorrow = getPrice(borrowAsset) || 0;\r\n\r\n    // 1. Calculate Principal Value in USD\r\n    const principalValueUSD = principalAmount * priceSupply;\r\n\r\n    // 2. Calculate Total Exposure Value in USD based on Leverage\r\n    // Leverage 3x means Total Exposure = 3 * Principal\r\n    const totalExposureValueUSD = principalValueUSD * leverage;\r\n\r\n    // 3. Calculate Flash Loan (Borrow) Value in USD\r\n    // Borrow = Total Exposure - Principal\r\n    const flashLoanValueUSD = totalExposureValueUSD - principalValueUSD;\r\n\r\n    // 4. Convert Values back to Token Amounts\r\n    // How much Collateral (Supply Asset) will we have total?\r\n    // Total Collateral Tokens = Total Exposure USD / Supply Price\r\n    const totalCollateralTokens = priceSupply > 0 ? totalExposureValueUSD / priceSupply : 0;\r\n\r\n    // How much Debt (Borrow Asset) will we check out?\r\n    // Total Debt Tokens = Flash Loan USD / Borrow Price\r\n    const totalDebtTokens = priceBorrow > 0 ? flashLoanValueUSD / priceBorrow : 0;\r\n\r\n    // APY Rates\r\n    const supplyAPY = supplyPool?.apy || 0;\r\n    const borrowAPY = borrowPool?.apyBaseBorrow || 0;\r\n\r\n    // Refinance Calculations\r\n    const currentRate = borrowPool?.apyBaseBorrow || 0;\r\n    const newRate = targetSupplyPool?.apyBaseBorrow || 0;\r\n    const rateDiff = currentRate - newRate;\r\n    const savingsPerYear = flashLoanValueUSD * (rateDiff / 100); // Savings on the debt value\r\n\r\n    // Net APY Logic\r\n    // (Supply APY * Total Exposure USD) - (Borrow APY * Total Debt USD) / Principal USD\r\n    const netAPY = principalValueUSD > 0\r\n        ? ((supplyAPY * totalExposureValueUSD) - (borrowAPY * flashLoanValueUSD)) / principalValueUSD\r\n        : 0;\r\n\r\n    // Safety Score (Health Factor)\r\n    // HF = (Total Collateral Value USD * Liquidation Threshold) / Total Debt Value USD\r\n    const liquidationThreshold = supplyPool?.ltv || 0.8;\r\n    const healthFactor = flashLoanValueUSD > 0\r\n        ? (totalExposureValueUSD * liquidationThreshold) / flashLoanValueUSD\r\n        : 999;\r\n\r\n    const safetyScoreLabel = healthFactor >= 999 ? 'Perfect' : healthFactor > 2 ? 'Excellent' : healthFactor > 1.5 ? 'Good' : healthFactor > 1.1 ? 'Risky' : 'Danger';\r\n    const hfColor = healthFactor >= 999 ? 'text-blue-400' : healthFactor < 1.1 ? 'text-red-500' : healthFactor < 1.5 ? 'text-yellow-500' : 'text-emerald-500';\r\n\r\n    // -- Actions --\r\n    const handleExecute = () => {\r\n        if (!address) return;\r\n\r\n        // Mock Addresses\r\n        const assetAddr = '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c';\r\n        const vTokenAddr = '0xA07c5b74C9B40447a954e1466938b865b6BBe19B';\r\n        const borrowAssetAddr = '0x55d398326f99059fF775485246999027B3197955';\r\n        const vBorrowTokenAddr = '0xfD5840Cd36d94D7229439859C0112a4185BC0255';\r\n        const routerAddr = '0x10ED43C718714eb63d5aA57B78B54704E256024E';\r\n        const comptrollerAddr = '0xfD36E2c2a6789Db23113685031d7F16329158384';\r\n\r\n        // Parse Principal Amount to Wei\r\n        const amountWei = BigInt(Math.floor(principalAmount * 1e18));\r\n\r\n        if (mode === 'loop') {\r\n            // Using totalDebtTokens as the borrow amount\r\n            const borrowAmountWei = BigInt(Math.floor(totalDebtTokens * 1e18));\r\n\r\n            // Assume User has a wallet via Factory. We call the WALLET address, not the Factory.\r\n            // But for this frontend, we might need to know the User's Wallet Address.\r\n            // For MVP: We will simulate the call via the Factory or assume a fixed wallet if we had `getWallet` hook.\r\n            // Since we don't have the user's DS wallet address in a hook yet, let's assume we call the Factory to \"execute via wallet\" \r\n            // OR we just alert \"Smart Wallet not found\" if real. \r\n            // For hackathon demo: We will trigger the `ExecutionFactory` create if needed, or directly call `ExecutionWallet` if we knew the address.\r\n\r\n            // DEMO FIX: We will just log the intended call payload.\r\n            // AND we will try to write to a \"Demo Wallet\" if we had one.\r\n            // Let's assume the user IS the owner of `ExecutionWallet` at address X.\r\n            // Updated implementation attempts to find wallet or create it.\r\n\r\n            console.log(\"Executing Loop via Smart Wallet...\");\r\n            alert(`Simulating transaction: Loop ${amount} ${supplyAsset} with ${leverage}x leverage on ${selectedProtocol}`);\r\n        } else if (mode === 'refinance') {\r\n            alert(`Simulating Refinance: Moving position from ${selectedProtocol} to ${refinanceToProtocol}. Estimated savings: $${savingsPerYear.toFixed(2)}/yr`);\r\n        } else {\r\n            alert(\"Simulating Unwind: Emergency exit triggered.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card id=\"strategy-builder\" className=\"w-full max-w-2xl mx-auto shadow-2xl relative overflow-hidden h-full border-border bg-card transition-all duration-500 scroll-mt-32\">\r\n            {/* Header / Protocol Selector */}\r\n            <div className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${mode === 'loop' ? 'from-transparent via-primary to-transparent' : mode === 'refinance' ? 'from-transparent via-blue-500 to-transparent' : 'from-transparent via-red-500 to-transparent'} opacity-50 transition-colors duration-500`}></div>\r\n\r\n            {/* Simulation Badge */}\r\n            <div className=\"absolute top-2 right-2 z-10\">\r\n                <div className=\"bg-yellow-500/10 border border-yellow-500/20 text-yellow-500 text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1\">\r\n                    <AlertTriangle size={10} /> SIMULATION MODE\r\n                </div>\r\n            </div>\r\n\r\n            <CardHeader className=\"pb-4\">\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {/* Strategy Mode Toggles */}\r\n                    <div className=\"flex bg-muted p-1 rounded-full w-fit mx-auto overflow-x-auto max-w-full\">\r\n                        <button\r\n                            onClick={() => setMode('loop')}\r\n                            className={`px-4 md:px-6 py-2 text-xs font-bold uppercase tracking-wider rounded-full transition-all flex items-center gap-2 whitespace-nowrap ${mode === 'loop'\r\n                                ? 'bg-background text-primary shadow-sm'\r\n                                : 'text-muted-foreground hover:text-foreground'\r\n                                }`}\r\n                        >\r\n                            <TrendingUp size={14} /> Boost (Loop)\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setMode('refinance')}\r\n                            className={`px-4 md:px-6 py-2 text-xs font-bold uppercase tracking-wider rounded-full transition-all flex items-center gap-2 whitespace-nowrap ${mode === 'refinance'\r\n                                ? 'bg-background text-blue-500 shadow-sm'\r\n                                : 'text-muted-foreground hover:text-foreground'\r\n                                }`}\r\n                        >\r\n                            <RefreshCw size={14} /> Pay Off (Move)\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setMode('unwind')}\r\n                            className={`px-4 md:px-6 py-2 text-xs font-bold uppercase tracking-wider rounded-full transition-all flex items-center gap-2 whitespace-nowrap ${mode === 'unwind'\r\n                                ? 'bg-background text-red-500 shadow-sm'\r\n                                : 'text-muted-foreground hover:text-foreground'\r\n                                }`}\r\n                        >\r\n                            <AlertTriangle size={14} /> Panic Exit\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"flex md:flex-row md:items-center justify-between gap-4\">\r\n                        <div>\r\n                            <CardTitle className=\"text-xl flex items-center gap-2\">\r\n                                <Layers className={`w-5 h-5 ${mode === 'loop' ? 'text-primary' : mode === 'refinance' ? 'text-blue-500' : 'text-red-500'}`} />\r\n                                {mode === 'loop' ? 'Yield Booster' : mode === 'refinance' ? 'Debt Pay Off' : 'Emergency Exit'}\r\n                            </CardTitle>\r\n                            <CardDescription>\r\n                                {mode === 'loop' ? 'Amplify your APY efficiently.' : mode === 'refinance' ? 'Move loans to cheaper protocols.' : 'Unwind positions instantly.'}\r\n                            </CardDescription>\r\n                        </div>\r\n\r\n                        {/* Protocol Selector Tabs */}\r\n                        <div className=\"flex bg-muted p-1 rounded-lg\">\r\n                            {(['venus', 'kinza', 'radiant'] as const).map((proto) => (\r\n                                <button\r\n                                    key={proto}\r\n                                    onClick={() => setSelectedProtocol(proto)}\r\n                                    className={`px-3 py-1.5 text-xs font-bold uppercase tracking-wider rounded-md transition-all ${selectedProtocol === proto\r\n                                        ? 'bg-background text-foreground shadow-sm'\r\n                                        : 'text-muted-foreground hover:text-foreground'\r\n                                        }`}\r\n                                >\r\n                                    {proto}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"space-y-8\">\r\n                {mode === 'refinance' ? (\r\n                    /* REFINANCE MODE UI */\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 items-center\">\r\n                            {/* FROM */}\r\n                            <div className=\"p-4 border border-border rounded-xl bg-muted/20\">\r\n                                <div className=\"text-xs font-bold uppercase text-muted-foreground mb-2\">Move From</div>\r\n                                <div className=\"text-xl font-bold capitalize flex items-center gap-2\">\r\n                                    <img src={`/assets/icons/${selectedProtocol}.png`} alt=\"\" className=\"w-6 h-6 rounded-full bg-gray-200\" onError={(e) => e.currentTarget.style.display = 'none'} />\r\n                                    {selectedProtocol}\r\n                                </div>\r\n                                <div className=\"mt-2 text-sm text-red-400\">Current Rate: {currentRate.toFixed(2)}%</div>\r\n                            </div>\r\n\r\n                            {/* TO */}\r\n                            <div className=\"p-4 border border-blue-500/30 rounded-xl bg-blue-500/5 relative\">\r\n                                <div className=\"absolute top-1/2 -left-3 transform -translate-y-1/2 bg-background border border-border rounded-full p-1 z-10 md:block hidden\">\r\n                                    <ArrowRight size={16} />\r\n                                </div>\r\n                                <div className=\"text-xs font-bold uppercase text-blue-500 mb-2\">Move To</div>\r\n                                <div className=\"flex gap-2 mb-2\">\r\n                                    {(['venus', 'kinza', 'radiant'] as const).filter(p => p !== selectedProtocol).map((proto) => (\r\n                                        <button\r\n                                            key={proto}\r\n                                            onClick={() => setRefinanceToProtocol(proto)}\r\n                                            className={`px-3 py-1 text-xs font-bold uppercase rounded-md border transition-all ${refinanceToProtocol === proto\r\n                                                ? 'bg-blue-500 text-white border-blue-500'\r\n                                                : 'bg-background border-border hover:border-blue-500'\r\n                                                }`}\r\n                                        >\r\n                                            {proto}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                                <div className=\"text-sm text-emerald-500\">New Rate: {newRate.toFixed(2)}%</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Input Amount */}\r\n                        <div className=\"space-y-4\">\r\n                            <label className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">\r\n                                Loan Amount to Move\r\n                            </label>\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type=\"number\"\r\n                                    placeholder=\"0.00\"\r\n                                    className=\"w-full h-12 px-4 rounded-lg border border-input bg-background/50 focus:ring-1 focus:ring-blue-500/50 outline-none font-mono text-right no-spin-button\"\r\n                                    value={amount}\r\n                                    onChange={(e) => setAmount(e.target.value)}\r\n                                />\r\n                                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground pointer-events-none\">Amt</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Calculator */}\r\n                        {amount && (\r\n                            <div className=\"p-4 rounded-xl bg-gradient-to-br from-emerald-500/10 to-transparent border border-emerald-500/20\">\r\n                                <div className=\"flex items-center gap-3 mb-2\">\r\n                                    <Banknote className=\"text-emerald-500\" size={20} />\r\n                                    <span className=\"font-bold text-emerald-500\">Is It Worth It?</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-sm text-muted-foreground\">Est. Annual Savings</span>\r\n                                    <span className=\"text-xl font-bold text-emerald-500\">+${savingsPerYear.toFixed(2)}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-xs mt-2 opacity-80\">\r\n                                    <span>Gas Cost: ~$0.50</span>\r\n                                    <span>Break-even: {(0.50 / (savingsPerYear / 365)).toFixed(1)} days</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : mode === 'loop' ? (\r\n                    /* LOOP MODE UI (Existing) */\r\n                    <>\r\n                        {/* Supply/Borrow Inputs - Same as before but with \"Safety Score\" labels */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            {/* Left: Supply Config */}\r\n                            <div className=\"space-y-4\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2\">\r\n                                    <span className=\"w-2 h-2 rounded-full bg-emerald-500\"></span>\r\n                                    You Supply (Collateral)\r\n                                </label>\r\n\r\n                                <div className=\"flex gap-2\">\r\n                                    <div className=\"relative w-1/3 min-w-[140px] z-20\">\r\n                                        <AssetSelect\r\n                                            value={supplyAsset}\r\n                                            options={Array.from(new Set(protocolAssets.map(p => p.symbol)))}\r\n                                            onChange={setSupplyAsset}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"relative flex-1 z-10\">\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            placeholder=\"0.00\"\r\n                                            className=\"w-full h-12 px-4 rounded-lg border border-input bg-background/50 focus:ring-1 focus:ring-primary/50 outline-none font-mono text-right no-spin-button\"\r\n                                            value={amount}\r\n                                            onChange={(e) => setAmount(e.target.value)}\r\n                                        />\r\n                                        <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground pointer-events-none\">Amt</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between text-xs px-1 mt-1\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"text-muted-foreground\">Supply APY:</span>\r\n                                        <span className=\"text-emerald-500 font-mono font-bold\">{supplyAPY.toFixed(2)}%</span>\r\n                                    </div>\r\n                                    <div className=\"text-muted-foreground text-[10px] text-right\">\r\n                                        ≈ ${(parseFloat(amount) * (getPrice(supplyAsset) || 0)).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Right: Borrow Config */}\r\n                            <div className=\"space-y-4\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground flex items-center gap-2\">\r\n                                    <span className=\"w-2 h-2 rounded-full bg-red-500\"></span>\r\n                                    You Borrow (Asset)\r\n                                </label>\r\n                                <div className=\"relative z-20\">\r\n                                    <AssetSelect\r\n                                        value={borrowAsset}\r\n                                        options={Array.from(new Set(protocolAssets.map(p => p.symbol)))}\r\n                                        onChange={setBorrowAsset}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex justify-between text-xs px-1 mt-1\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"text-muted-foreground\">Borrow Cost:</span>\r\n                                        <span className=\"text-red-500 font-mono font-bold\">{borrowAPY.toFixed(2)}%</span>\r\n                                    </div>\r\n                                    <div className=\"text-muted-foreground text-[10px] text-right\">\r\n                                        ≈ ${flashLoanValueUSD.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Leverage Slider */}\r\n                        <div className=\"space-y-3 bg-muted/20 p-4 rounded-xl border border-border\">\r\n                            <div className=\"flex justify-between items-center mb-2\">\r\n                                <label className=\"text-sm font-medium\">Boost Multiplier</label>\r\n                                <span className=\"text-xl font-bold text-primary font-mono\">{leverage.toFixed(2)}x</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"1.0\"\r\n                                max={(1 / (1 - (supplyPool?.ltv || 0.6))).toFixed(2)}\r\n                                step=\"0.05\"\r\n                                className=\"w-full accent-primary h-2 bg-secondary rounded-lg appearance-none cursor-pointer\"\r\n                                value={leverage}\r\n                                onChange={(e) => setLeverage(Math.min(parseFloat(e.target.value), 1 / (1 - (supplyPool?.ltv || 0.6))))}\r\n                            />\r\n                            <div className=\"flex justify-between text-[10px] text-muted-foreground uppercase tracking-widest font-bold\">\r\n                                <span>Conservative</span>\r\n                                <span className=\"text-red-500/80\">Aggressive</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Stats Grid - \"Is It Worth It?\" */}\r\n                        {amount && (\r\n                            <div className=\"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-bottom-2\">\r\n                                <div className=\"p-4 rounded-xl bg-gradient-to-br from-primary/10 to-transparent border border-primary/20 flex flex-col items-center justify-center\">\r\n                                    <div className=\"text-[10px] uppercase tracking-wider text-muted-foreground mb-1\">Projected Return (Net APY)</div>\r\n                                    <div className=\"text-2xl font-bold text-primary drop-shadow-md\">\r\n                                        {netAPY.toFixed(2)}%\r\n                                    </div>\r\n                                    <div className=\"text-xs text-muted-foreground mt-1\">\r\n                                        Base APY: {supplyAPY.toFixed(2)}%\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <RiskMonitor\r\n                                    healthFactor={healthFactor}\r\n                                    liquidationThreshold={liquidationThreshold}\r\n                                    liquidationPrice={(() => {\r\n                                        const priceSupply = getPrice(supplyAsset) || 0;\r\n                                        const priceBorrow = getPrice(borrowAsset) || 0;\r\n                                        if (priceSupply === 0 || priceBorrow === 0) return 0;\r\n\r\n                                        // Determine if \"Long\" (Supply Volatile) or \"Short\" (Borrow Volatile)\r\n                                        // Simple Heuristic: If Supply is Stable (USDT/USDC/DAI/FDUSD) and Borrow is NOT, we are Shorting Borrow Asset.\r\n                                        // If Both Stable or Both Volatile, default to monitoring Supply Drop.\r\n                                        const isSupplyStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(supplyAsset);\r\n                                        const isBorrowStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(borrowAsset);\r\n\r\n                                        if (isSupplyStable && !isBorrowStable) {\r\n                                            // Short Scenario: Risk is Borrow Price Rising.\r\n                                            // Liq Condition: CollateralValue * LTV = DebtValue\r\n                                            // DebtValue = BorrowAmount * LiqPrice_Borrow\r\n                                            // LiqPrice_Borrow = (CollateralValue * LTV) / BorrowAmount\r\n\r\n                                            // Collateral Value is fixed (since Supply is Stable).\r\n                                            return totalDebtTokens > 0 ? (totalExposureValueUSD * liquidationThreshold) / totalDebtTokens : 0;\r\n                                        } else {\r\n                                            // Long Scenario (Standard): Risk is Supply Price Dropping.\r\n                                            // Liq Condition: CollateralAmount * LiqPrice_Supply * LTV = DebtValue\r\n                                            // LiqPrice_Supply = DebtValue / (CollateralAmount * LTV)\r\n                                            // Debt Value is fixed (since Borrow is Stable/Pegged relative to risk).\r\n                                            return totalCollateralTokens > 0 ? flashLoanValueUSD / (totalCollateralTokens * liquidationThreshold) : 0;\r\n                                        }\r\n                                    })()}\r\n                                    currentPrice={(() => {\r\n                                        const isSupplyStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(supplyAsset);\r\n                                        const isBorrowStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(borrowAsset);\r\n                                        if (isSupplyStable && !isBorrowStable) return getPrice(borrowAsset) || 0;\r\n                                        return getPrice(supplyAsset) || 0;\r\n                                    })()}\r\n                                    pairName={(() => {\r\n                                        const isSupplyStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(supplyAsset);\r\n                                        const isBorrowStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(borrowAsset);\r\n                                        if (isSupplyStable && !isBorrowStable) return `${borrowAsset}/USD (Max)`;\r\n                                        return `${supplyAsset}/USD (Min)`;\r\n                                    })()}\r\n                                    dropLabel={(() => {\r\n                                        const isSupplyStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(supplyAsset);\r\n                                        const isBorrowStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(borrowAsset);\r\n                                        if (isSupplyStable && !isBorrowStable) return 'Max Price Rise';\r\n                                        return 'Max Price Drop';\r\n                                    })()}\r\n                                    projectedDrop={(() => {\r\n                                        const priceSupply = getPrice(supplyAsset) || 0;\r\n                                        const priceBorrow = getPrice(borrowAsset) || 0;\r\n                                        if (priceSupply === 0 || priceBorrow === 0) return 0;\r\n\r\n                                        const isSupplyStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(supplyAsset);\r\n                                        const isBorrowStable = ['USDT', 'USDC', 'DAI', 'FDUSD'].includes(borrowAsset);\r\n\r\n                                        if (isSupplyStable && !isBorrowStable) {\r\n                                            // Short Scenario: Calculate % Rise to Liquidation\r\n                                            const currentP = priceBorrow;\r\n                                            const liqPrice = totalDebtTokens > 0 ? (totalExposureValueUSD * liquidationThreshold) / totalDebtTokens : 0;\r\n                                            return ((liqPrice - currentP) / currentP) * 100;\r\n                                        } else {\r\n                                            // Long Scenario: Calculate % Drop to Liquidation\r\n                                            const currentP = priceSupply;\r\n                                            const liqPrice = totalCollateralTokens > 0 ? flashLoanValueUSD / (totalCollateralTokens * liquidationThreshold) : 0;\r\n                                            return ((liqPrice - currentP) / currentP) * 100;\r\n                                        }\r\n                                    })()}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    /* UNWIND MODE UI */\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <div className=\"p-4 rounded-lg bg-red-500/5 border border-red-500/10 text-sm text-red-500/80 flex items-center gap-2\">\r\n                            <AlertTriangle size={16} />\r\n                            <span><strong>Emergency Exit:</strong> Flash-repay debt and withdraw collateral instantly.</span>\r\n                        </div>\r\n                        {/* Selector: Debt to Repay */}\r\n                        <div className=\"space-y-4\">\r\n                            <label className=\"text-xs font-bold uppercase tracking-wider text-muted-foreground\">\r\n                                Asset to Expose\r\n                            </label>\r\n                            <div className=\"relative\">\r\n                                <AssetSelect\r\n                                    value={borrowAsset}\r\n                                    options={Array.from(new Set(protocolAssets.map(p => p.symbol)))}\r\n                                    onChange={setBorrowAsset}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n\r\n            <CardFooter className=\"pt-4 pb-6\">\r\n                {!address ? (\r\n                    <Button\r\n                        className=\"w-full h-12 text-lg font-bold\"\r\n                        onClick={openConnectModal}\r\n                    >\r\n                        Connect Wallet to Simulate\r\n                    </Button>\r\n                ) : (\r\n                    <Button\r\n                        className={`w-full h-12 text-lg font-bold shadow-lg transition-all transform hover:scale-[1.02] ${mode === 'loop'\r\n                            ? 'bg-primary text-primary-foreground hover:bg-primary/90'\r\n                            : mode === 'refinance'\r\n                                ? 'bg-blue-600 text-white hover:bg-blue-700'\r\n                                : 'bg-red-500 text-white hover:bg-red-600'\r\n                            }`}\r\n                        onClick={handleExecute}\r\n                        disabled={!amount || isWritePending || isConfirming || parseFloat(amount) <= 0}\r\n                    >\r\n                        {(isWritePending || isConfirming) ? 'Processing on Blockchain...' : (\r\n                            <span className=\"flex items-center gap-2\">\r\n                                {mode === 'loop' ? (\r\n                                    <>Simulate Yield Boost <TrendingUp size={20} /></>\r\n                                ) : mode === 'refinance' ? (\r\n                                    <>Simulate Move <ArrowRight size={20} /></>\r\n                                ) : (\r\n                                    <>Simulate Exit <AlertTriangle size={20} /></>\r\n                                )}\r\n                            </span>\r\n                        )}\r\n                    </Button>\r\n                )}\r\n            </CardFooter>\r\n        </Card >\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\StrategyInfoModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\StrategyModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\StrategyTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\TopLoops.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Button"},"fix":{"range":[150,199],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[208,219],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used.","line":7,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ShieldCheck"},"fix":{"range":[235,248],"text":""},"desc":"Remove unused variable \"ShieldCheck\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":31,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loops' is assigned a value but never used.","line":32,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getByProtocol' is assigned a value but never used.","line":32,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":73}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { AssetIcon } from \"@/components/ui/asset-icon\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight, Loader2, Shield, ShieldCheck } from 'lucide-react';\nimport { Badge } from \"@/components/ui/badge\";\nimport { useSmartLoops, SmartLoop } from '@/hooks/useSmartLoops';\n\ntype FilterType = 'all' | 'stable';\n\nimport { StrategyModal } from './StrategyModal';\nimport { StrategyInfoModal } from './StrategyInfoModal';\nimport { Info } from 'lucide-react';\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\n\ninterface TopLoopsProps {\n    compact?: boolean;\n    maxItems?: number;\n    showFilters?: boolean;\n}\n\nexport function TopLoops({ compact = false, maxItems = 5, showFilters = true }: TopLoopsProps) {\n    const router = useRouter();\n    const { loops, isLoading, getTopLoops, getStableLoops, getByProtocol } = useSmartLoops();\n    const [filter, setFilter] = useState<FilterType>('all');\n    const [selectedLoop, setSelectedLoop] = useState<SmartLoop | null>(null);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [isInfoOpen, setIsInfoOpen] = useState(false);\n\n    // Apply filters\n    let filteredLoops: SmartLoop[] = [];\n    switch (filter) {\n        case 'stable':\n            filteredLoops = getStableLoops();\n            break;\n\n        default:\n            filteredLoops = getTopLoops(maxItems);\n    }\n\n    // Sort: USDT/ETH first, others after\n    const usdtEthLoop = filteredLoops.find(l => l.supplyAsset === 'USDT' && l.borrowAsset === 'ETH');\n    const otherLoops = filteredLoops.filter(l => !(l.supplyAsset === 'USDT' && l.borrowAsset === 'ETH'));\n\n    const displayLoops = usdtEthLoop\n        ? [usdtEthLoop, ...otherLoops].slice(0, maxItems)\n        : filteredLoops.slice(0, maxItems);\n\n    const handleMultiply = (loop: SmartLoop) => {\n        setSelectedLoop(loop);\n        setIsModalOpen(true);\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"w-full flex items-center justify-center py-12\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n                <span className=\"ml-3 text-muted-foreground\">Calculating optimal strategies...</span>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"w-full\">\n            {/* Header */}\n            <div className={`flex items-center justify-between ${compact ? 'mb-4' : 'mb-6 md:mb-8'}`}>\n                <div className=\"flex items-center gap-3\">\n                    <h2 className={`font-bold text-white font-outfit ${compact ? 'text-xl' : 'text-2xl md:text-3xl'}`}>\n                        {compact ? 'Suggested Strategies' : 'Top Strategies'}\n                    </h2>\n                    {!compact && (\n                        <button\n                            onClick={() => setIsInfoOpen(true)}\n                            className=\"p-1.5 rounded-full hover:bg-white/10 transition-colors text-muted-foreground hover:text-[#CEFF00]\"\n                            title=\"How strategies work\"\n                        >\n                            <Info size={18} />\n                        </button>\n                    )}\n                </div>\n\n                {showFilters && (\n                    <>\n                        {/* Desktop View */}\n                        <div className=\"hidden md:flex gap-1 p-1 bg-white/5 rounded-lg border border-white/10 flex-wrap\">\n                            {[\n                                { key: 'all', label: 'All', icon: null },\n                                { key: 'stable', label: 'Stable', icon: Shield },\n\n                            ].map(f => (\n                                <button\n                                    key={f.key}\n                                    onClick={() => setFilter(f.key as FilterType)}\n                                    className={`px-3 py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-1.5 ${filter === f.key\n                                        ? 'bg-[#CEFF00] text-black shadow-lg'\n                                        : 'text-muted-foreground hover:text-white'\n                                        }`}\n                                >\n                                    {f.icon && <f.icon size={14} className={filter === f.key ? \"text-black\" : \"text-current\"} />}\n                                    {f.label}\n                                </button>\n                            ))}\n                        </div>\n\n                        {/* Mobile View */}\n                        <div className=\"md:hidden\">\n                            <Select value={filter} onValueChange={(val) => setFilter(val as FilterType)}>\n                                <SelectTrigger className=\"w-[140px] h-8 rounded-full bg-white/5 border-white/10 text-white text-xs font-bold ring-offset-0 focus:ring-0 px-4\">\n                                    <SelectValue placeholder=\"Filter\" />\n                                </SelectTrigger>\n                                <SelectContent className=\"bg-[#121216] border-white/10 text-white\">\n                                    <SelectItem value=\"all\" className=\"text-xs font-bold focus:bg-white/10 focus:text-white\">All Strategies</SelectItem>\n                                    <SelectItem value=\"stable\" className=\"text-xs font-bold focus:bg-white/10 focus:text-white\">Stable</SelectItem>\n\n                                </SelectContent>\n                            </Select>\n                        </div>\n                    </>\n                )}\n            </div>\n\n            {/* Grid */}\n            <div className={`grid gap-4 ${compact\n                ? 'grid-cols-2 md:grid-cols-3 lg:grid-cols-5'\n                : 'md:grid-cols-2 lg:grid-cols-4 gap-6'\n                }`}>\n                {displayLoops.map((loop) => {\n                    const isActive = loop.supplyAsset === 'USDT' && loop.borrowAsset === 'ETH';\n\n                    return (\n                        <div\n                            key={loop.id}\n                            onClick={() => isActive && handleMultiply(loop)}\n                            className={`group relative bg-[#0f0f12] border rounded-2xl transition-all duration-300 overflow-hidden ${isActive\n                                ? 'border-[#CEFF00]/50 shadow-2xl shadow-[#CEFF00]/10 cursor-pointer hover:-translate-y-1'\n                                : 'border-white/5 opacity-50 cursor-not-allowed grayscale-[0.5]'\n                                } ${compact ? 'p-3' : 'p-4 md:p-6'}`}\n                        >\n                            {!compact && (\n                                <div className={`absolute top-3 right-3 text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded border ${isActive\n                                    ? 'text-[#CEFF00] bg-[#CEFF00]/10 border-[#CEFF00]/20'\n                                    : 'text-muted-foreground bg-white/5 border-white/5'\n                                    }`}>\n                                    {isActive ? 'Active' : 'Inactive'} <span className=\"text-white/20 mx-1\">|</span> {loop.protocolDisplay}\n                                </div>\n                            )}\n\n                            {compact ? (\n                                // Compact Layout - Single Row / Denser\n                                <div className=\"flex items-center justify-between gap-3\">\n                                    <div className=\"flex items-center gap-3\">\n                                        {/* Overlapping Icons */}\n                                        <div className=\"flex items-center\">\n                                            <div className=\"relative z-10\">\n                                                <AssetIcon\n                                                    symbol={loop.supplyAsset}\n                                                    size={24}\n                                                    className=\"border-2 border-[#121216] rounded-full bg-[#121216]\"\n                                                />\n                                            </div>\n                                            <div className=\"relative -ml-3 z-0\">\n                                                <AssetIcon\n                                                    symbol={loop.borrowAsset}\n                                                    size={24}\n                                                    className=\"border-2 border-[#121216] rounded-full grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all\"\n                                                />\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex flex-col\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <h3 className=\"font-bold text-white text-sm leading-none group-hover:text-[#CEFF00] transition-colors\">\n                                                    {loop.pair}\n                                                </h3>\n                                                <Badge variant=\"secondary\" className=\"text-[9px] h-4 px-1 rounded bg-white/5 text-muted-foreground border-none\">\n                                                    {loop.protocolDisplay}\n                                                </Badge>\n                                            </div>\n                                            <div className=\"text-[10px] text-muted-foreground mt-0.5\">\n                                                Max {loop.maxLeverage}x\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"text-right\">\n                                        <div className=\"font-bold font-mono text-[#CEFF00] text-lg leading-none\">\n                                            +{loop.leveragedApy}%\n                                        </div>\n                                        <div className={`text-[9px] mt-0.5 ${loop.risk === 'Low' ? 'text-emerald-400' : loop.risk === 'Medium' ? 'text-amber-400' : 'text-red-400'}`}>\n                                            {loop.risk} Risk\n                                        </div>\n                                    </div>\n                                </div>\n                            ) : (\n                                // Standard Layout\n                                <>\n                                    {/* Pair Icons */}\n                                    <div className=\"flex items-center mb-3\">\n                                        <div className=\"relative z-10\">\n                                            <AssetIcon\n                                                symbol={loop.supplyAsset}\n                                                size={40}\n                                                className=\"border-2 border-[#121216] rounded-full bg-[#121216]\"\n                                            />\n                                        </div>\n                                        <div className=\"relative -ml-2 z-0\">\n                                            <AssetIcon\n                                                symbol={loop.borrowAsset}\n                                                size={40}\n                                                className=\"border-2 border-[#121216] rounded-full grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all\"\n                                            />\n                                        </div>\n                                    </div>\n\n                                    {/* Pair Name */}\n                                    <h3 className=\"font-bold text-white group-hover:text-[#CEFF00] transition-colors text-lg mb-1\">\n                                        {loop.pair} Strategy\n                                    </h3>\n\n                                    {/* Badges */}\n                                    <div className=\"flex gap-1 flex-wrap mb-3\">\n                                        <Badge\n                                            variant=\"secondary\"\n                                            className={`text-[9px] border-none ${loop.risk === 'Low'\n                                                ? 'bg-emerald-500/10 text-emerald-400'\n                                                : loop.risk === 'Medium'\n                                                    ? 'bg-amber-500/10 text-amber-400'\n                                                    : 'bg-red-500/10 text-red-400'\n                                                }`}\n                                        >\n                                            {loop.risk} Risk\n                                        </Badge>\n                                        {loop.isStable && (\n                                            <Badge variant=\"secondary\" className=\"text-[9px] bg-blue-500/10 text-blue-400 border-none\">\n                                                Stable\n                                            </Badge>\n                                        )}\n                                    </div>\n\n                                    {/* APY */}\n                                    <div className=\"border-t border-white/5 pt-4 mt-4\">\n                                        <div className=\"text-[10px] text-muted-foreground mb-0.5\">\n                                            Max {loop.maxLeverage}x Leverage\n                                        </div>\n                                        <div className=\"font-bold font-mono text-[#CEFF00] text-3xl\">\n                                            +{loop.leveragedApy}%\n                                        </div>\n                                        <div className=\"text-[10px] text-muted-foreground mt-1\">\n                                            Supply: {loop.supplyApy.toFixed(1)}% | Borrow: {loop.borrowApy.toFixed(1)}%\n                                        </div>\n                                    </div>\n\n                                    {/* Button */}\n\n                                </>\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n\n            {displayLoops.length === 0 && (\n                <div className=\"text-center py-12 text-muted-foreground\">\n                    No strategies found for this filter. Try a different selection.\n                </div>\n            )}\n\n            {selectedLoop && (\n                <StrategyModal\n                    isOpen={isModalOpen}\n                    onClose={() => setIsModalOpen(false)}\n                    initialData={{\n                        protocol: selectedLoop.protocol as 'venus' | 'kinza' | 'radiant',\n                        supplyAsset: selectedLoop.supplyAsset,\n                        borrowAsset: selectedLoop.borrowAsset\n                    }}\n                />\n            )}\n\n            <StrategyInfoModal\n                isOpen={isInfoOpen}\n                onClose={() => setIsInfoOpen(false)}\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\asset-icon.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Image"},"fix":{"range":[15,47],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":84,"column":17,"nodeType":"JSXOpeningElement","endLine":100,"endColumn":19},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":105,"column":17,"nodeType":"JSXOpeningElement","endLine":105,"endColumn":101}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport Image from 'next/image';\n\nconst ASSET_LOGOS: Record<string, string> = {\n    'USDT': 'https://s2.coinmarketcap.com/static/img/coins/64x64/825.png',\n    'USDC': 'https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png',\n    'FDUSD': 'https://s2.coinmarketcap.com/static/img/coins/64x64/26081.png',\n    'BNB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png',\n    'WBNB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png',\n    'ETH': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1027.png',\n    'BTC': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1.png',\n    'BTCB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/4023.png',\n    'SOLVBTC': 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/assets/0x4aae823a6a0b376De6A78e74eCC5b079d38cBCf7/logo.png', // SolvBTC (TrustWallet)\n    'ASBNB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/31668.png', // Ankr Staked BNB (approx) - checking ID\n    'SLISBNB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/31998.png', // slisBNB\n    'XRP': 'https://s2.coinmarketcap.com/static/img/coins/64x64/52.png',\n    'ADA': 'https://s2.coinmarketcap.com/static/img/coins/64x64/2010.png',\n    'DOGE': 'https://s2.coinmarketcap.com/static/img/coins/64x64/74.png',\n    'DOT': 'https://s2.coinmarketcap.com/static/img/coins/64x64/6636.png',\n    'TRX': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1958.png',\n    'LTC': 'https://s2.coinmarketcap.com/static/img/coins/64x64/2.png',\n    'BCH': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1831.png',\n    'FIL': 'https://s2.coinmarketcap.com/static/img/coins/64x64/2280.png',\n    'ATOM': 'https://s2.coinmarketcap.com/static/img/coins/64x64/3794.png',\n    'NEAR': 'https://s2.coinmarketcap.com/static/img/coins/64x64/6535.png',\n    'UNI': 'https://s2.coinmarketcap.com/static/img/coins/64x64/7083.png',\n    'LINK': 'https://s2.coinmarketcap.com/static/img/coins/64x64/1975.png',\n    'MATIC': 'https://s2.coinmarketcap.com/static/img/coins/64x64/3890.png',\n    'SHIB': 'https://s2.coinmarketcap.com/static/img/coins/64x64/5994.png',\n    'DAI': 'https://s2.coinmarketcap.com/static/img/coins/64x64/4943.png',\n    'TUSD': 'https://s2.coinmarketcap.com/static/img/coins/64x64/2563.png',\n    'CAKE': 'https://s2.coinmarketcap.com/static/img/coins/64x64/7186.png',\n    'XVS': 'https://s2.coinmarketcap.com/static/img/coins/64x64/7288.png',\n    'AAVE': 'https://s2.coinmarketcap.com/static/img/coins/64x64/7278.png',\n    'RDNT': 'https://s2.coinmarketcap.com/static/img/coins/64x64/21159.png',\n    'SXP': 'https://s2.coinmarketcap.com/static/img/coins/64x64/6842.png',\n    'TWT': 'https://s2.coinmarketcap.com/static/img/coins/64x64/5964.png',\n    'BSW': 'https://s2.coinmarketcap.com/static/img/coins/64x64/10746.png',\n    'ALPACA': 'https://s2.coinmarketcap.com/static/img/coins/64x64/8707.png',\n    'XSOLVBTC': 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/assets/0x4aae823a6a0b376De6A78e74eCC5b079d38cBCf7/logo.png', // Fallback to SolvBTC\n};\n\nconst ARBITRUM_BADGE = 'https://cryptologos.cc/logos/arbitrum-arb-logo.png';\n\ninterface AssetIconProps {\n    symbol: string;\n    tokenAddress?: string;\n    size?: number;\n    className?: string;\n}\n\nexport function AssetIcon({ symbol, tokenAddress, size = 32, className = '' }: AssetIconProps) {\n    const s = symbol.toUpperCase();\n\n    // 1. Hardcoded Mapping (Fastest & Most Reliable for Majors)\n    let logoUrl = ASSET_LOGOS[s];\n\n    // 2. TrustWallet Assets (If Address is known)\n    if (!logoUrl && tokenAddress) {\n        // TrustWallet uses checksum address usually, but let's try direct. \n        // Note: TrustWallet repo is case-sensitive (Checksummed).\n        // Since we don't have checksum util here comfortably, we might need to rely on what the API return.\n        // API usually returns Checksummed.\n        logoUrl = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/assets/${tokenAddress}/logo.png`;\n    }\n\n    // 3. CoinCap Fallback (Generic Symbol)\n    if (!logoUrl) {\n        logoUrl = `https://assets.coincap.io/assets/icons/${symbol.toLowerCase()}@2x.png`;\n    }\n\n    // Special case for BTCB if not found\n    if (!logoUrl && s === 'BTCB') {\n        logoUrl = ASSET_LOGOS['BTC'];\n    }\n\n    const fallbackImage = ASSET_LOGOS['ETH']; // Ultimate fallback\n\n    return (\n        <div className={`relative flex items-center justify-center bg-transparent ${className}`} style={{ width: size, height: size }}>\n            {/* Main Token Logo */}\n            <div className=\"rounded-full overflow-hidden bg-white/5 border border-white/10\" style={{ width: size, height: size }}>\n                <img\n                    src={logoUrl}\n                    alt={symbol}\n                    width={size}\n                    height={size}\n                    className=\"object-cover w-full h-full\"\n                    onError={(e) => {\n                        // Fallback logic on error\n                        const target = e.target as HTMLImageElement;\n                        // Determine failure chain\n                        if (target.src === logoUrl && logoUrl !== fallbackImage) {\n                            // If TrustWallet failed, try CoinCap? \n                            // Simplify: just go to fallback or generic first letter?\n                            target.src = fallbackImage;\n                        }\n                    }}\n                />\n            </div>\n\n            {/* Chain badge (Bottom Right) */}\n            <div className=\"absolute -bottom-1 -right-1 rounded-full border border-black bg-[#121216] p-[1px]\" style={{ width: size * 0.45, height: size * 0.45 }}>\n                <img src={ARBITRUM_BADGE} alt=\"Arbitrum\" className=\"w-full h-full object-contain\" />\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\slider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":17,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":74}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface SliderProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value' | 'defaultValue'> {\n    onValueChange?: (value: number[]) => void\n    defaultValue?: number[]\n    value?: number[]\n    max?: number\n    min?: number\n    step?: number\n    className?: string\n}\n\nconst Slider = React.forwardRef<HTMLInputElement, SliderProps>(\n    ({ className, min = 0, max = 100, step = 1, defaultValue = [0], value, onValueChange, ...props }, ref) => {\n        const [val, setVal] = React.useState(defaultValue[0])\n\n        const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n            const newValue = parseFloat(e.target.value)\n            setVal(newValue)\n            if (onValueChange) {\n                onValueChange([newValue])\n            }\n        }\n\n        // Calculate percentage for background gradient\n        const percentage = ((val - min) / (max - min)) * 100\n\n        return (\n            <div className={cn(\"relative flex w-full touch-none select-none items-center\", className)}>\n                <input\n                    type=\"range\"\n                    min={min}\n                    max={max}\n                    step={step}\n                    value={val}\n                    onChange={handleChange}\n                    className=\"absolute w-full h-2 opacity-0 cursor-pointer z-20\"\n                    ref={ref}\n                    {...props}\n                />\n                <div className=\"relative w-full h-2 bg-secondary rounded-full overflow-hidden\">\n                    <div\n                        className=\"absolute h-full bg-[#CEFF00]\"\n                        style={{ width: `${percentage}%` }}\n                    />\n                </div>\n                <div\n                    className=\"absolute h-5 w-5 rounded-full border-2 border-[#CEFF00] bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 z-10 pointer-events-none\"\n                    style={{ left: `calc(${percentage}% - 10px)` }}\n                />\n            </div>\n        )\n    }\n)\nSlider.displayName = \"Slider\"\n\nexport { Slider }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\components\\ui\\use-toast.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionTypes' is assigned a value but only used as a type.","line":19,"column":7,"nodeType":"Identifier","messageId":"usedOnlyAsType","endLine":19,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Adapted from shadcn/ui\nimport * as React from \"react\"\n\nimport type {\n    ToastActionElement,\n    ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n    id: string\n    title?: React.ReactNode\n    description?: React.ReactNode\n    action?: ToastActionElement\n}\n\nconst actionTypes = {\n    ADD_TOAST: \"ADD_TOAST\",\n    UPDATE_TOAST: \"UPDATE_TOAST\",\n    DISMISS_TOAST: \"DISMISS_TOAST\",\n    REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n    count = (count + 1) % Number.MAX_SAFE_INTEGER\n    return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n    | {\n        type: ActionType[\"ADD_TOAST\"]\n        toast: ToasterToast\n    }\n    | {\n        type: ActionType[\"UPDATE_TOAST\"]\n        toast: Partial<ToasterToast>\n        id: string\n    }\n    | {\n        type: ActionType[\"DISMISS_TOAST\"]\n        toastId?: string\n    }\n    | {\n        type: ActionType[\"REMOVE_TOAST\"]\n        toastId?: string\n    }\n\ninterface State {\n    toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n    if (toastTimeouts.has(toastId)) {\n        return\n    }\n\n    const timeout = setTimeout(() => {\n        toastTimeouts.delete(toastId)\n        dispatch({\n            type: \"REMOVE_TOAST\",\n            toastId: toastId,\n        })\n    }, TOAST_REMOVE_DELAY)\n\n    toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n        case \"ADD_TOAST\":\n            return {\n                ...state,\n                toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n            }\n\n        case \"UPDATE_TOAST\":\n            return {\n                ...state,\n                toasts: state.toasts.map((t) =>\n                    t.id === action.id ? { ...t, ...action.toast } : t\n                ),\n            }\n\n        case \"DISMISS_TOAST\": {\n            const { toastId } = action\n\n            // ! Side effects ! - This could be extracted into a dismissToast() action,\n            // but I'll keep it here for simplicity\n            if (toastId) {\n                addToRemoveQueue(toastId)\n            } else {\n                state.toasts.forEach((toast) => {\n                    addToRemoveQueue(toast.id)\n                })\n            }\n\n            return {\n                ...state,\n                toasts: state.toasts.map((t) =>\n                    t.id === toastId || action.toastId === undefined\n                        ? {\n                            ...t,\n                            open: false,\n                        }\n                        : t\n                ),\n            }\n        }\n        case \"REMOVE_TOAST\":\n            if (action.toastId === undefined) {\n                return {\n                    ...state,\n                    toasts: [],\n                }\n            }\n            return {\n                ...state,\n                toasts: state.toasts.filter((t) => t.id !== action.toastId),\n            }\n    }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n    memoryState = reducer(memoryState, action)\n    listeners.forEach((listener) => {\n        listener(memoryState)\n    })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n    const id = genId()\n\n    const update = (props: ToasterToast) =>\n        dispatch({\n            type: \"UPDATE_TOAST\",\n            id,\n            toast: props,\n        })\n    const dismiss = () =>\n        dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n    dispatch({\n        type: \"ADD_TOAST\",\n        toast: {\n            ...props,\n            id,\n            open: true,\n            onOpenChange: (open: boolean) => {\n                if (!open) dismiss()\n            },\n        },\n    })\n\n    return {\n        id,\n        dismiss,\n        update,\n    }\n}\n\nfunction useToast() {\n    const [state, setState] = React.useState<State>(memoryState)\n\n    React.useEffect(() => {\n        listeners.push(setState)\n        return () => {\n            const index = listeners.indexOf(setState)\n            if (index > -1) {\n                listeners.splice(index, 1)\n            }\n        }\n    }, [state])\n\n    return {\n        ...state,\n        toast,\n        dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n    }\n}\n\nexport { useToast, toast }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useAggregatedHealth.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2029,2032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2029,2032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":142,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":142,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useReadContracts, useAccount, useReadContract } from 'wagmi';\nimport { useMemo } from 'react';\nimport { formatUnits, parseAbi } from 'viem';\nimport { useTokenPrices } from './useTokenPrices';\nimport { KINZA_POOL, RADIANT_LENDING_POOL, VENUS_COMPTROLLER } from '@/lib/pool-config';\n\nconst ZERO_ADDRESS = '0x0000000000000000000000000000000000000000';\n\nconst VENUS_COMPTROLLER_ABI = parseAbi([\n    'function getAccountLiquidity(address account) view returns (uint256, uint256, uint256)',\n    'function getAllMarkets() view returns (address[])',\n    'function getAssetsIn(address account) view returns (address[])',\n    'function markets(address vToken) view returns (bool, uint256, bool)',\n]);\n\nconst VTOKEN_ABI = parseAbi([\n    'function borrowBalanceStored(address account) view returns (uint256)',\n    'function balanceOf(address owner) view returns (uint256)',\n    'function exchangeRateStored() view returns (uint256)',\n    'function symbol() view returns (string)',\n]);\n\nconst AAVE_ABI = parseAbi([\n    'function getUserAccountData(address user) view returns (uint256, uint256, uint256, uint256, uint256, uint256)',\n]);\n\nexport interface ProtocolHealth {\n    healthFactor: number;\n    isHealthy: boolean;\n    status: 'safe' | 'warning' | 'danger' | 'inactive';\n    hasPositions: boolean;\n    borrowPowerUSD: number;\n    debtUSD: number;\n}\n\nexport function useAggregatedHealth(targetAddress?: string) {\n    const { address: connectedAddress } = useAccount();\n    const address = targetAddress || connectedAddress;\n    const { data: prices } = useTokenPrices();\n\n    const hasVenus = VENUS_COMPTROLLER.toLowerCase() !== ZERO_ADDRESS;\n    const hasKinza = KINZA_POOL.toLowerCase() !== ZERO_ADDRESS;\n    const hasRadiant = RADIANT_LENDING_POOL.toLowerCase() !== ZERO_ADDRESS;\n\n    const { data: venusMarkets } = useReadContract({\n        address: VENUS_COMPTROLLER,\n        abi: VENUS_COMPTROLLER_ABI,\n        functionName: 'getAllMarkets',\n        query: { enabled: !!address && hasVenus }\n    });\n\n    const contracts: any[] = [];\n    let venusLiqIndex = -1;\n    let venusAssetsInIndex = -1;\n    let kinzaIndex = -1;\n    let radiantIndex = -1;\n    let venusMarkersStartIndex = -1;\n\n    if (hasVenus) {\n        venusLiqIndex = contracts.push({\n            address: VENUS_COMPTROLLER,\n            abi: VENUS_COMPTROLLER_ABI,\n            functionName: 'getAccountLiquidity',\n            args: address ? [address as `0x${string}`] : undefined,\n        }) - 1;\n\n        venusAssetsInIndex = contracts.push({\n            address: VENUS_COMPTROLLER,\n            abi: VENUS_COMPTROLLER_ABI,\n            functionName: 'getAssetsIn',\n            args: address ? [address as `0x${string}`] : undefined,\n        }) - 1;\n\n        if (address && venusMarkets && (venusMarkets as string[]).length > 0) {\n            venusMarkersStartIndex = contracts.length;\n            (venusMarkets as string[]).forEach((market) => {\n                contracts.push(\n                    { address: market as `0x${string}`, abi: VTOKEN_ABI, functionName: 'borrowBalanceStored', args: [address] },\n                    { address: market as `0x${string}`, abi: VTOKEN_ABI, functionName: 'balanceOf', args: [address] },\n                    { address: market as `0x${string}`, abi: VTOKEN_ABI, functionName: 'exchangeRateStored' },\n                    { address: market as `0x${string}`, abi: VTOKEN_ABI, functionName: 'symbol' },\n                    { address: VENUS_COMPTROLLER, abi: VENUS_COMPTROLLER_ABI, functionName: 'markets', args: [market as `0x${string}`] },\n                );\n            });\n        }\n    }\n\n    if (hasKinza) {\n        kinzaIndex = contracts.push({\n            address: KINZA_POOL,\n            abi: AAVE_ABI,\n            functionName: 'getUserAccountData',\n            args: address ? [address as `0x${string}`] : undefined,\n        }) - 1;\n    }\n\n    if (hasRadiant) {\n        radiantIndex = contracts.push({\n            address: RADIANT_LENDING_POOL,\n            abi: AAVE_ABI,\n            functionName: 'getUserAccountData',\n            args: address ? [address as `0x${string}`] : undefined,\n        }) - 1;\n    }\n\n    const { data, refetch } = useReadContracts({\n        contracts,\n        query: {\n            enabled: !!address && contracts.length > 0,\n            refetchInterval: 15000,\n        }\n    });\n\n    return useMemo(() => {\n        const defaultHealth: ProtocolHealth = {\n            healthFactor: 0,\n            isHealthy: true,\n            status: 'inactive',\n            hasPositions: false,\n            borrowPowerUSD: 0,\n            debtUSD: 0\n        };\n\n        if (!data || !address || !prices) {\n            return {\n                venus: defaultHealth,\n                kinza: defaultHealth,\n                radiant: defaultHealth,\n                overallScore: 10,\n                totalBorrowPowerUSD: 0,\n                totalDebtUSD: 0,\n                isLoading: true\n            };\n        }\n\n        let venus: ProtocolHealth = { ...defaultHealth };\n        let kinza: ProtocolHealth = { ...defaultHealth };\n        let radiant: ProtocolHealth = { ...defaultHealth };\n\n        if (hasVenus && venusLiqIndex >= 0 && data[venusLiqIndex]?.status === 'success') {\n            const venusLiqRes = data[venusLiqIndex];\n            const [_, liquidity, shortfall] = venusLiqRes.result as [bigint, bigint, bigint];\n            const liq = parseFloat(formatUnits(liquidity, 18));\n            const sf = parseFloat(formatUnits(shortfall, 18));\n\n            const enteredMarkets =\n                venusAssetsInIndex >= 0 && data[venusAssetsInIndex]?.status === 'success'\n                    ? (data[venusAssetsInIndex].result as string[]).map((market) => market.toLowerCase())\n                    : [];\n\n            let totalBorrowUSD = 0;\n            let totalBorrowPowerUSD = 0;\n\n            if (venusMarkets && venusMarkersStartIndex >= 0) {\n                for (let i = 0; i < (venusMarkets as string[]).length; i++) {\n                    const marketAddr = (venusMarkets as string[])[i].toLowerCase();\n                    const baseIdx = venusMarkersStartIndex + (i * 5);\n                    const borRes = data[baseIdx];\n                    const balRes = data[baseIdx + 1];\n                    const exRes = data[baseIdx + 2];\n                    const symRes = data[baseIdx + 3];\n                    const mktRes = data[baseIdx + 4];\n\n                    if (borRes?.status === 'success' && symRes?.status === 'success') {\n                        const borrowBal = borRes.result as bigint;\n                        const vSymbol = symRes.result as string;\n                        let symbol = vSymbol.startsWith('v') ? vSymbol.slice(1) : vSymbol;\n                        if (symbol === 'BTC') symbol = 'BTCB';\n                        if (symbol === 'WBNB') symbol = 'BNB';\n                        const price = prices.getPrice(symbol);\n\n                        if (borrowBal > 0) {\n                            totalBorrowUSD += parseFloat(formatUnits(borrowBal, 18)) * price;\n                        }\n\n                        if (\n                            enteredMarkets.includes(marketAddr) &&\n                            balRes?.status === 'success' &&\n                            exRes?.status === 'success' &&\n                            mktRes?.status === 'success'\n                        ) {\n                            const vBal = balRes.result as bigint;\n                            const exRate = exRes.result as bigint;\n                            const mktInfo = mktRes.result as [boolean, bigint, boolean];\n                            const ltv = parseFloat(formatUnits(mktInfo[1], 18));\n\n                            const supplyUnderlying = (vBal * exRate) / BigInt(1e18);\n                            const supplyUSD = parseFloat(formatUnits(supplyUnderlying, 18)) * price;\n                            totalBorrowPowerUSD += supplyUSD * ltv;\n                        }\n                    }\n                }\n            }\n\n            const hasPositions = liq > 0 || sf > 0 || totalBorrowUSD > 0;\n            if (hasPositions) {\n                let hf = 10;\n                if (totalBorrowUSD > 0) {\n                    hf = (liq + totalBorrowUSD) / totalBorrowUSD;\n                    if (sf > 0) {\n                        hf = totalBorrowUSD > 0 ? (totalBorrowUSD - sf) / totalBorrowUSD : 0.5;\n                    }\n                } else if (liq > 0) {\n                    hf = 10;\n                }\n\n                venus = {\n                    healthFactor: hf,\n                    isHealthy: sf === 0 && hf > 1.2,\n                    status: sf > 0 ? 'danger' : (hf < 1.3 ? 'warning' : 'safe'),\n                    hasPositions,\n                    borrowPowerUSD: totalBorrowPowerUSD,\n                    debtUSD: totalBorrowUSD\n                };\n            }\n        }\n\n        if (hasKinza && kinzaIndex >= 0 && data[kinzaIndex]?.status === 'success') {\n            const result = data[kinzaIndex].result as [bigint, bigint, bigint, bigint, bigint, bigint];\n            const totalCollateral = Number(result[0]) / 1e8;\n            const totalDebt = Number(result[1]) / 1e8;\n            const hfRaw = Number(result[5]) / 1e18;\n            const hasPositions = totalCollateral > 0.001 || totalDebt > 0.001;\n\n            if (hasPositions) {\n                kinza = {\n                    healthFactor: hfRaw,\n                    isHealthy: hfRaw > 1.2,\n                    status: hfRaw > 1.5 ? 'safe' : (hfRaw > 1.0 ? 'warning' : 'danger'),\n                    hasPositions,\n                    borrowPowerUSD: Number(result[0]) / 1e8 * (Number(result[4]) / 10000),\n                    debtUSD: totalDebt\n                };\n            }\n        }\n\n        if (hasRadiant && radiantIndex >= 0 && data[radiantIndex]?.status === 'success') {\n            const result = data[radiantIndex].result as [bigint, bigint, bigint, bigint, bigint, bigint];\n            const totalCollateral = Number(result[0]) / 1e8;\n            const totalDebt = Number(result[1]) / 1e8;\n            const hfRaw = Number(result[5]) / 1e18;\n            const hasPositions = totalCollateral > 0.001 || totalDebt > 0.001;\n\n            if (hasPositions) {\n                radiant = {\n                    healthFactor: hfRaw,\n                    isHealthy: hfRaw > 1.2,\n                    status: hfRaw > 1.5 ? 'safe' : (hfRaw > 1.0 ? 'warning' : 'danger'),\n                    hasPositions,\n                    borrowPowerUSD: Number(result[0]) / 1e8 * (Number(result[4]) / 10000),\n                    debtUSD: Number(result[1]) / 1e8\n                };\n            }\n        }\n\n        const activeProtocols = [venus, kinza, radiant].filter((protocol) => protocol.hasPositions);\n        let overallScore = 10;\n        if (activeProtocols.length > 0) {\n            const avgHF = activeProtocols.reduce((sum, protocol) => sum + Math.min(2, protocol.healthFactor), 0) / activeProtocols.length;\n            overallScore = Math.min(10, Math.max(0, avgHF * 5));\n            overallScore = Math.round(overallScore * 10) / 10;\n        }\n\n        const totalBorrowPowerUSD = (venus.borrowPowerUSD || 0) + (kinza.borrowPowerUSD || 0) + (radiant.borrowPowerUSD || 0);\n        const totalDebtUSD = (venus.debtUSD || 0) + (kinza.debtUSD || 0) + (radiant.debtUSD || 0);\n\n        return {\n            venus,\n            kinza,\n            radiant,\n            overallScore,\n            totalBorrowPowerUSD,\n            totalDebtUSD,\n            isLoading: false,\n            refetch\n        };\n    }, [\n        data,\n        address,\n        prices,\n        venusMarkets,\n        hasVenus,\n        hasKinza,\n        hasRadiant,\n        venusLiqIndex,\n        venusAssetsInIndex,\n        kinzaIndex,\n        radiantIndex,\n        venusMarkersStartIndex,\n        refetch\n    ]);\n}\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useKinzaPortfolio.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'reserves' logical expression could make the dependencies of useMemo Hook (at line 157) change on every render. To fix this, wrap the initialization of 'reserves' in its own useMemo() Hook.","line":39,"column":11,"nodeType":"VariableDeclarator","endLine":39,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2286,2289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2286,2289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3181,3184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3181,3184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3718,3721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3718,3721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5018,5021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5018,5021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useReadContract, useReadContracts, useAccount } from 'wagmi';\nimport { parseAbi, formatUnits } from 'viem';\nimport { useTokenPrices } from './useTokenPrices';\nimport allowedAssets from '@/lib/allowedAssets.json';\nimport { useMemo } from 'react';\nimport { KINZA_DATA_PROVIDER, KINZA_POOL } from '@/lib/pool-config';\n\nconst ZERO_ADDRESS = '0x0000000000000000000000000000000000000000';\n\nconst POOL_ABI = parseAbi([\n    'function getReservesList() view returns (address[])',\n]);\n\nconst DATA_PROVIDER_ABI = parseAbi([\n    'function getUserReserveData(address asset, address user) view returns (uint256 currentATokenBalance, uint256 currentStableDebtBalance, uint256 currentVariableDebtBalance, uint256 principalStableDebt, uint256 scaledVariableDebt, uint256 stableBorrowRate, uint256 liquidityRate, uint40 stableRateLastUpdated, bool usedAsCollateralEnabled)'\n]);\n\nconst ERC20_ABI = parseAbi([\n    'function decimals() view returns (uint8)',\n    'function symbol() view returns (string)'\n]);\n\nexport function useKinzaPortfolio() {\n    const { address } = useAccount();\n    const { data: prices } = useTokenPrices();\n    const isConfigured = KINZA_POOL.toLowerCase() !== ZERO_ADDRESS && KINZA_DATA_PROVIDER.toLowerCase() !== ZERO_ADDRESS;\n\n    // 1. Fetch All Reserves from Pool\n    const { data: allReserves } = useReadContract({\n        address: KINZA_POOL,\n        abi: POOL_ABI,\n        functionName: 'getReservesList',\n        query: {\n            enabled: isConfigured,\n            staleTime: 1000 * 60 * 60, // 1 hour\n        }\n    });\n\n    const reserves = (allReserves as `0x${string}`[]) || [];\n\n    // 2. Build multicall: for each reserve, fetch getUserReserveData + symbol + decimals\n    // 3 calls per reserve: getUserReserveData, symbol, decimals\n    const contractCalls = reserves.flatMap(reserve => [\n        {\n            address: KINZA_DATA_PROVIDER,\n            abi: DATA_PROVIDER_ABI,\n            functionName: 'getUserReserveData',\n            args: [reserve, address]\n        },\n        { address: reserve, abi: ERC20_ABI, functionName: 'symbol' },\n        { address: reserve, abi: ERC20_ABI, functionName: 'decimals' },\n    ]);\n\n    const { data: activeData, refetch } = useReadContracts({\n        contracts: address && reserves.length > 0 ? contractCalls as any[] : [],\n        query: {\n            enabled: isConfigured && !!address && reserves.length > 0,\n            refetchInterval: 15000\n        }\n    });\n\n    // 3. Process Data\n    return useMemo(() => {\n        if (!isConfigured) {\n            return {\n                totalSupplyUSD: 0,\n                totalBorrowUSD: 0,\n                netWorthUSD: 0,\n                positions: [],\n                isLoading: false,\n                refetch\n            };\n        }\n\n        if (!activeData || !prices || !address) {\n            return {\n                totalSupplyUSD: 0,\n                totalBorrowUSD: 0,\n                netWorthUSD: 0,\n                positions: [],\n                isLoading: !!address, // true if we have address but no data yet\n                refetch\n            };\n        }\n\n        let totalSupplyUSD = 0;\n        let totalBorrowUSD = 0;\n        const positions: any[] = [];\n\n        // activeData is flat: [UserReserveData, Symbol, Decimals, UserReserveData, Symbol, Decimals, ...]\n        // 3 calls per reserve\n        for (let i = 0; i < reserves.length; i++) {\n            const baseIndex = i * 3;\n            const reserveDataRes = activeData[baseIndex];\n            const symbolRes = activeData[baseIndex + 1];\n            const decimalsRes = activeData[baseIndex + 2];\n\n            if (reserveDataRes?.status !== 'success') continue;\n\n            const reserveData = reserveDataRes.result as any[];\n            // Index 0: currentATokenBalance (supply)\n            // Index 1: currentStableDebtBalance\n            // Index 2: currentVariableDebtBalance\n            const aTokenBalance = reserveData[0] as bigint;\n            const stableDebt = reserveData[1] as bigint;\n            const variableDebt = reserveData[2] as bigint;\n\n            // Skip if no positions\n            if (aTokenBalance === BigInt(0) && stableDebt === BigInt(0) && variableDebt === BigInt(0)) continue;\n\n            let symbol = symbolRes?.status === 'success' ? symbolRes.result as string : 'Unknown';\n            const decimals = decimalsRes?.status === 'success' ? decimalsRes.result as number : 18;\n\n            // Normalize symbol for price lookup\n            if (symbol === 'WBNB') symbol = 'BNB';\n\n            const price = prices.getPrice(symbol);\n\n            const supplyNum = parseFloat(formatUnits(aTokenBalance, decimals));\n            const borrowNum = parseFloat(formatUnits(variableDebt + stableDebt, decimals));\n\n            const supplyUSD = supplyNum * price;\n            const borrowUSD = borrowNum * price;\n\n            totalSupplyUSD += supplyUSD;\n            totalBorrowUSD += borrowUSD;\n\n            // Find APY data from allowedAssets\n            const assetConfig = (allowedAssets.kinza as any[]).find(\n                a => a.symbol === symbol || a.originalSymbol === symbol\n            );\n            const supplyAPY = assetConfig ? assetConfig.apy : 0;\n            const borrowAPY = assetConfig ? assetConfig.apyBaseBorrow : 0;\n            const ltv = assetConfig ? assetConfig.ltv : 0;\n\n            positions.push({\n                symbol,\n                supply: supplyNum,\n                supplyUSD,\n                borrow: borrowNum,\n                borrowUSD,\n                price,\n                apy: supplyAPY,\n                borrowApy: borrowAPY,\n                ltv\n            });\n        }\n\n        return {\n            totalSupplyUSD,\n            totalBorrowUSD,\n            netWorthUSD: totalSupplyUSD - totalBorrowUSD,\n            positions,\n            isLoading: false,\n            refetch\n        };\n    }, [activeData, prices, reserves, refetch, address, isConfigured]);\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useRadiantPortfolio.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'reserves' logical expression could make the dependencies of useMemo Hook (at line 88) change on every render. To fix this, wrap the initialization of 'reserves' in its own useMemo() Hook.","line":40,"column":11,"nodeType":"VariableDeclarator","endLine":40,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2510,2513],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2510,2513],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3378,3381],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3378,3381],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4363,4366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4363,4366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5299,5302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5299,5302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6469,6472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6469,6472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useReadContract, useReadContracts, useAccount } from 'wagmi';\nimport { parseAbi, formatUnits } from 'viem';\nimport { useTokenPrices } from './useTokenPrices';\nimport allowedAssets from '@/lib/allowedAssets.json';\nimport { useMemo } from 'react';\nimport { RADIANT_LENDING_POOL } from '@/lib/pool-config';\n\nconst ZERO_ADDRESS = '0x0000000000000000000000000000000000000000';\n\n// NOTE: The ProtocolDataProvider at 0x2f9D... is INCOMPATIBLE with this pool.\n// We use Pool.getReserveData() to get aToken/debtToken addresses, then query balanceOf directly.\n\nconst POOL_ABI = parseAbi([\n    'function getReservesList() view returns (address[])',\n    'function getReserveData(address asset) view returns (uint256 configuration, uint128 liquidityIndex, uint128 currentLiquidityRate, uint128 variableBorrowIndex, uint128 currentVariableBorrowRate, uint128 currentStableBorrowRate, uint40 lastUpdateTimestamp, address aTokenAddress, address stableDebtTokenAddress, address variableDebtTokenAddress, address interestRateStrategyAddress, uint8 id)'\n]);\n\nconst ERC20_ABI = parseAbi([\n    'function balanceOf(address account) view returns (uint256)',\n    'function decimals() view returns (uint8)',\n    'function symbol() view returns (string)'\n]);\n\nexport function useRadiantPortfolio() {\n    const { address } = useAccount();\n    const { data: prices } = useTokenPrices();\n    const isConfigured = RADIANT_LENDING_POOL.toLowerCase() !== ZERO_ADDRESS;\n\n    // 1. Fetch Reserve List\n    const { data: reservesList } = useReadContract({\n        address: RADIANT_LENDING_POOL,\n        abi: POOL_ABI,\n        functionName: 'getReservesList',\n        query: {\n            enabled: isConfigured,\n            staleTime: 1000 * 60 * 60\n        } // 1 hour\n    });\n\n    const reserves = (reservesList as `0x${string}`[]) || [];\n\n    // 2. First multicall: getReserveData for each reserve to discover aToken/debtToken addresses\n    //    Plus symbol + decimals of the underlying\n    //    4 calls per reserve: getReserveData, symbol, decimals\n    const reserveInfoCalls = reserves.flatMap(asset => [\n        {\n            address: RADIANT_LENDING_POOL,\n            abi: POOL_ABI,\n            functionName: 'getReserveData',\n            args: [asset]\n        },\n        { address: asset, abi: ERC20_ABI, functionName: 'symbol' },\n        { address: asset, abi: ERC20_ABI, functionName: 'decimals' },\n    ]);\n\n    const { data: reserveInfoData } = useReadContracts({\n        contracts: reserves.length > 0 ? reserveInfoCalls as any[] : [],\n        query: {\n            enabled: isConfigured && reserves.length > 0,\n            staleTime: 1000 * 60 * 60 // 1 hour (aToken addresses don't change)\n        }\n    });\n\n    // 3. Extract aToken/debtToken addresses, build balance queries\n    const tokenAddresses = useMemo(() => {\n        if (!reserveInfoData) return [];\n        const result: { aToken: `0x${string}`; varDebtToken: `0x${string}`; symbol: string; decimals: number; reserve: `0x${string}` }[] = [];\n\n        for (let i = 0; i < reserves.length; i++) {\n            const baseIndex = i * 3;\n            const reserveDataRes = reserveInfoData[baseIndex];\n            const symRes = reserveInfoData[baseIndex + 1];\n            const decRes = reserveInfoData[baseIndex + 2];\n\n            if (reserveDataRes?.status !== 'success') continue;\n\n            const data = reserveDataRes.result as any[];\n            // Index 7: aTokenAddress, Index 9: variableDebtTokenAddress\n            result.push({\n                aToken: data[7] as `0x${string}`,\n                varDebtToken: data[9] as `0x${string}`,\n                symbol: symRes?.status === 'success' ? (symRes.result as string) : 'Unknown',\n                decimals: decRes?.status === 'success' ? (decRes.result as number) : 18,\n                reserve: reserves[i]\n            });\n        }\n        return result;\n    }, [reserveInfoData, reserves]);\n\n    // 4. Second multicall: balanceOf on aToken and varDebtToken for the user\n    const balanceCalls = tokenAddresses.flatMap(t => [\n        { address: t.aToken, abi: ERC20_ABI, functionName: 'balanceOf', args: [address] },\n        { address: t.varDebtToken, abi: ERC20_ABI, functionName: 'balanceOf', args: [address] },\n    ]);\n\n    const { data: balanceData, refetch } = useReadContracts({\n        contracts: address && tokenAddresses.length > 0 ? balanceCalls as any[] : [],\n        query: {\n            enabled: isConfigured && !!address && tokenAddresses.length > 0,\n            refetchInterval: 15000\n        }\n    });\n\n    // 5. Process results\n    return useMemo(() => {\n        if (!isConfigured) {\n            return {\n                totalSupplyUSD: 0,\n                totalBorrowUSD: 0,\n                netWorthUSD: 0,\n                positions: [],\n                isLoading: false,\n                refetch\n            };\n        }\n\n        if (!balanceData || !prices || !address || tokenAddresses.length === 0) {\n            return {\n                totalSupplyUSD: 0,\n                totalBorrowUSD: 0,\n                netWorthUSD: 0,\n                positions: [],\n                isLoading: !!address, // true if we have address but no data yet\n                refetch\n            };\n        }\n\n        let totalSupplyUSD = 0;\n        let totalBorrowUSD = 0;\n        const positions: any[] = [];\n\n        for (let i = 0; i < tokenAddresses.length; i++) {\n            const baseIndex = i * 2;\n            const aTokenBalRes = balanceData[baseIndex];\n            const varDebtBalRes = balanceData[baseIndex + 1];\n\n            const aTokenBal = aTokenBalRes?.status === 'success' ? (aTokenBalRes.result as bigint) : BigInt(0);\n            const varDebtBal = varDebtBalRes?.status === 'success' ? (varDebtBalRes.result as bigint) : BigInt(0);\n\n            if (aTokenBal === BigInt(0) && varDebtBal === BigInt(0)) continue;\n\n            const { symbol: rawSymbol, decimals } = tokenAddresses[i];\n            let symbol = rawSymbol;\n            if (symbol === 'WBNB') symbol = 'BNB';\n\n            const price = prices.getPrice(symbol);\n\n            const supplyNum = parseFloat(formatUnits(aTokenBal, decimals));\n            const borrowNum = parseFloat(formatUnits(varDebtBal, decimals));\n\n            const supplyUSD = supplyNum * price;\n            const borrowUSD = borrowNum * price;\n\n            totalSupplyUSD += supplyUSD;\n            totalBorrowUSD += borrowUSD;\n\n            // Find APY data\n            const assetConfig = (allowedAssets.radiant as any[]).find(\n                a => a.symbol === symbol || a.originalSymbol === symbol\n            );\n            const supplyAPY = assetConfig ? assetConfig.apy : 0;\n            const borrowAPY = assetConfig ? assetConfig.apyBaseBorrow : 0;\n            const ltv = assetConfig ? assetConfig.ltv : 0;\n\n            positions.push({\n                symbol,\n                supply: supplyNum,\n                supplyUSD,\n                borrow: borrowNum,\n                borrowUSD,\n                price,\n                apy: supplyAPY,\n                borrowApy: borrowAPY,\n                ltv\n            });\n        }\n\n        return {\n            totalSupplyUSD,\n            totalBorrowUSD,\n            netWorthUSD: totalSupplyUSD - totalBorrowUSD,\n            positions,\n            isLoading: false,\n            refetch\n        };\n    }, [balanceData, prices, tokenAddresses, refetch, address, isConfigured]);\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useSmartLoops.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useTokenPrices.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useUserSettings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useVenusCollateral.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useVenusPortfolio.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3143,3146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3143,3146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":99,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3933,3936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3933,3936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":1,"message":"'assetConfig' is never reassigned. Use 'const' instead.","line":178,"column":21,"nodeType":"Identifier","messageId":"useConst","endLine":178,"endColumn":32,"fix":{"range":[7936,8148],"text":"const assetConfig = (allowedAssets.venus as any[]).find(a =>\n                    a.symbol === symbol ||\n                    a.originalSymbol === symbol ||\n                    a.symbol === vSymbol\n                );"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7978,7981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7978,7981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'enteredMarkets'. Either include it or remove the dependency array.","line":215,"column":8,"nodeType":"ArrayExpression","endLine":215,"endColumn":69,"suggestions":[{"desc":"Update the dependencies array to be: [isConfigured, refetch, activeData, prices, address, markets, enteredMarkets]","fix":{"range":[9151,9212],"text":"[isConfigured, refetch, activeData, prices, address, markets, enteredMarkets]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useReadContract, useReadContracts, useAccount } from 'wagmi';\nimport { useMemo } from 'react';\nimport { formatUnits, parseAbi } from 'viem';\nimport { VENUS_COMPTROLLER } from '@/lib/pool-config';\nimport { useTokenPrices } from '@/hooks/useTokenPrices';\nimport allowedAssets from '@/lib/allowedAssets.json';\n\nconst COMPTROLLER_ABI = parseAbi([\n    'function getAllMarkets() view returns (address[])',\n    'function getAssetsIn(address account) view returns (address[])',\n]);\n\nconst VTOKEN_ABI = parseAbi([\n    'function balanceOf(address owner) view returns (uint256)',\n    'function borrowBalanceStored(address account) view returns (uint256)',\n    'function exchangeRateStored() view returns (uint256)',\n    'function underlying() view returns (address)',\n    'function symbol() view returns (string)',\n    'function decimals() view returns (uint8)'\n]);\n\nexport function useVenusPortfolio() {\n    const { address } = useAccount();\n    const { data: prices } = useTokenPrices();\n    const isConfigured = VENUS_COMPTROLLER.toLowerCase() !== '0x0000000000000000000000000000000000000000';\n\n    // 1. Fetch All Markets from Comptroller\n    const { data: allMarkets } = useReadContract({\n        address: VENUS_COMPTROLLER as `0x${string}`,\n        abi: COMPTROLLER_ABI,\n        functionName: 'getAllMarkets',\n        query: {\n            enabled: isConfigured,\n            staleTime: 1000 * 60 * 60, // 1 hour\n        }\n    });\n\n    const { data: assetsIn } = useReadContract({\n        address: VENUS_COMPTROLLER as `0x${string}`,\n        abi: COMPTROLLER_ABI,\n        functionName: 'getAssetsIn',\n        args: address ? [address] : undefined,\n        query: {\n            enabled: isConfigured && !!address,\n        }\n    });\n\n    const markets = (allMarkets as `0x${string}`[]) || [];\n    const enteredMarkets = (assetsIn as `0x${string}`[]) || [];\n\n    // 2. Multicall for User Data\n    // We need: Balance, Borrow, ExchangeRate, Symbol.\n    // Underlying/Decimals are static per market but we fetch them to be safe/robust.\n    // To avoid too many calls, we can assume standard 18 for most or fetch just ONCE if needed.\n    // For now, let's fetch essential data. If user has balance > 0, we can do a second fetch or just fetch all?\n    // Fetching 6 items * 50 markets = 300 calls. Might be heavy but okay for multicall.\n    // Let's stick to the script logic but simplified for React (hooks).\n\n    // Optimization: We can't conditionally fetch in a hook easily without complex effects.\n    // So we fetch basic data first.\n    const contractCalls = markets.flatMap(market => [\n        { address: market, abi: VTOKEN_ABI, functionName: 'balanceOf', args: [address] },\n        { address: market, abi: VTOKEN_ABI, functionName: 'borrowBalanceStored', args: [address] },\n        { address: market, abi: VTOKEN_ABI, functionName: 'exchangeRateStored' },\n        { address: market, abi: VTOKEN_ABI, functionName: 'symbol' },\n        { address: market, abi: VTOKEN_ABI, functionName: 'underlying' },\n    ]);\n\n    const { data: activeData, refetch } = useReadContracts({\n        contracts: address && markets.length > 0 ? contractCalls as any[] : [],\n        query: {\n            enabled: isConfigured && !!address && markets.length > 0,\n            refetchInterval: 15000\n        }\n    });\n\n    // 3. Process Data\n    return useMemo(() => {\n        if (!isConfigured) return {\n            totalSupplyUSD: 0,\n            totalBorrowUSD: 0,\n            netWorthUSD: 0,\n            positions: [],\n            isLoading: false,\n            refetch\n        };\n\n        if (!activeData || !prices || !address) return {\n            totalSupplyUSD: 0,\n            totalBorrowUSD: 0,\n            netWorthUSD: 0,\n            positions: [],\n            isLoading: !!address, // true if we have address but no data yet\n            refetch\n        };\n\n        let totalSupplyUSD = 0;\n        let totalBorrowUSD = 0;\n        const positions: any[] = [];\n\n        // 5 calls per market\n        for (let i = 0; i < markets.length; i++) {\n            const baseIndex = i * 5;\n            const balRes = activeData[baseIndex];\n            const borRes = activeData[baseIndex + 1];\n            const exRes = activeData[baseIndex + 2];\n            const symRes = activeData[baseIndex + 3];\n            const undRes = activeData[baseIndex + 4];\n\n            if (balRes.status === 'success' && borRes.status === 'success' && exRes.status === 'success') {\n                const vBal = balRes.result as bigint;\n                const borrowBal = borRes.result as bigint; // Underlying amount\n                const exchangeRate = exRes.result as bigint;\n                const vSymbol = symRes.status === 'success' ? (symRes.result as string) : '';\n\n                // Skip if no balance and no borrow\n                if (vBal === BigInt(0) && borrowBal === BigInt(0)) continue;\n\n                // Determine Asset Symbol & Decimals\n                // Default to 18 decimals and derived symbol\n                let decimals = 18;\n                let symbol = vSymbol.startsWith('v') ? vSymbol.slice(1) : vSymbol;\n\n                // Special Cases logic (mirroring script roughly)\n                if (vSymbol === 'vBNB') {\n                    symbol = 'BNB';\n                    decimals = 18;\n                } else if (undRes.status === 'success' && undRes.result) {\n                    // Ideally we'd fetch decimals from underlying, but that requires another round of calls.\n                    // For now, we can infer or rely on `allowedAssets.json` if possible, \n                    // OR assume 18 (many legacy tokens use 18).\n                    // BTCB is 18. ETH is 18. Some stables use 6.\n                    // This assumption is a trade-off for performance in this hook.\n                    // If we need absolute precision we should add underlying decimals to the initial multicall\n                    // but we can't because we don't know the underlying address yet!\n                    // For this React implementation, assuming 18 can reduce extra calls.\n\n                    // Specific overrides if known:\n                    // Override with per-token decimals if exact precision is required.\n                }\n\n                if (symbol === 'WBNB') symbol = 'BNB';\n                if (symbol === 'BTC') symbol = 'BTCB'; // Venus vBTC -> Underlying is BTCB\n\n                // Supply in Underlying\n                // underlying = (vBal * exchangeRate) / 1e18\n                // Note: This formula assumes vToken has 8 decimals (usually) and underlying has 18?\n                // Actually Venus Maths:\n                // ExchangeRate is scaled by 1e18 + (underlyingDecimals - vTokenDecimals).\n                // vTokens usually have 8 decimals.\n                // If underlying is 18, exp = 18 + 18 - 8 = 28?\n                // Actually the standard formula:\n                // Supply = (vBal * ExchangeRate) / 1e18\n                // The result is in Underlying Decimals (Wei).\n\n                const supplyUnderlyingWei = (vBal * exchangeRate) / BigInt(\"1000000000000000000\");\n                const supplyNum = parseFloat(formatUnits(supplyUnderlyingWei, decimals));\n\n                // Borrow in Underlying\n                // Borrow balance IS stored in underlying amount directly.\n                const borrowNum = parseFloat(formatUnits(borrowBal, decimals));\n\n                // Price\n                // Map symbol for price\n                let priceSymbol = symbol;\n                if (symbol === 'BTCB') priceSymbol = 'BTC';\n\n                const price = prices.getPrice(priceSymbol) || prices.getPrice(symbol); // Try both\n\n                const supplyUSD = supplyNum * price;\n                const borrowUSD = borrowNum * price;\n\n                totalSupplyUSD += supplyUSD;\n                totalBorrowUSD += borrowUSD;\n\n                // Find APY data\n                // Try exact match, then v-stripped match\n                let assetConfig = (allowedAssets.venus as any[]).find(a =>\n                    a.symbol === symbol ||\n                    a.originalSymbol === symbol ||\n                    a.symbol === vSymbol\n                );\n\n                const supplyAPY = assetConfig ? assetConfig.apy : 0;\n                const borrowAPY = assetConfig ? assetConfig.apyBaseBorrow : 0;\n                const ltv = assetConfig ? assetConfig.ltv : 0;\n\n                const isCollateral = enteredMarkets.some(m => m.toLowerCase() === markets[i].toLowerCase());\n\n                positions.push({\n                    symbol,\n                    vTokenAddress: markets[i],\n                    isCollateral,\n                    supply: supplyNum,\n                    supplyUSD,\n                    borrow: borrowNum,\n                    borrowUSD,\n                    price,\n                    apy: supplyAPY,\n                    borrowApy: borrowAPY,\n                    ltv\n                });\n            }\n        }\n\n        return {\n            totalSupplyUSD,\n            totalBorrowUSD,\n            netWorthUSD: totalSupplyUSD - totalBorrowUSD,\n            positions,\n            isLoading: false,\n            refetch\n        };\n\n    }, [activeData, prices, address, markets, refetch, isConfigured]);\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\hooks\\useYields.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1091,1094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1091,1094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1951,1954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1951,1954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from '@tanstack/react-query';\nimport allowedAssets from '@/lib/allowedAssets.json';\nimport { targetDefiLlamaChain } from '@/lib/network';\nimport { ENABLED_SOURCE_PROJECTS, normalizeProject } from '@/lib/protocols';\n\nconst DEFILLAMA_API = 'https://yields.llama.fi/pools';\n\nexport interface YieldData {\n    chain: string;\n    project: string;\n    symbol: string;\n    tvlUsd: number;\n    apy: number;\n    apyBase: number;\n    apyReward: number;\n    apyBaseBorrow?: number;\n    apyRewardBorrow?: number;\n    totalSupplyUsd?: number;\n    totalBorrowUsd?: number;\n    ltv?: number;\n    pool: string;\n    underlyingTokens?: string[];\n    sourceProject?: string;\n}\n\n// Minimal normalization\nconst NORMALIZE_SYMBOL: Record<string, string> = {\n    'WETH': 'ETH',\n    // 'BTCB': 'BTC', // Keep BTCB as BTCB\n    // 'WBTC': 'BTC'\n};\n\nasync function fetchYields() {\n    const response = await fetch(DEFILLAMA_API);\n    const data = await response.json();\n    return data.data as YieldData[];\n}\n\nconst ALLOWED_POOL_IDS = new Set<string>();\nObject.values(allowedAssets).forEach((assets: any[]) => {\n    assets.forEach(asset => ALLOWED_POOL_IDS.add(asset.poolId));\n});\n\nexport function useYields() {\n    return useQuery({\n        queryKey: ['yields', targetDefiLlamaChain],\n        queryFn: fetchYields,\n        select: (data) => {\n            // Filter relevant chain + protocol set first\n            const filtered = data.filter(pool => {\n                const isTargetChain = pool.chain === targetDefiLlamaChain;\n                const isSupportedSourceProject = ENABLED_SOURCE_PROJECTS.has(pool.project);\n\n                if (!isTargetChain || !isSupportedSourceProject) {\n                    return false;\n                }\n\n                return ALLOWED_POOL_IDS.has(pool.pool) || pool.chain === 'Arbitrum';\n            });\n\n            // Aggregate duplicates on normalized project + symbol\n            const aggregatedMap = new Map<string, any>();\n\n            filtered.forEach(pool => {\n                const symbol = NORMALIZE_SYMBOL[pool.symbol] || pool.symbol;\n                const project = normalizeProject(pool.project.includes('venus') ? 'venus' : pool.project);\n                const key = `${project}-${symbol}`;\n\n                if (aggregatedMap.has(key)) {\n                    const existing = aggregatedMap.get(key);\n\n                    // Weighted Average APY calculation\n                    const totalTvl = existing.tvlUsd + pool.tvlUsd;\n                    const weightedApy = totalTvl > 0\n                        ? (existing.apy * existing.tvlUsd + pool.apy * pool.tvlUsd) / totalTvl\n                        : existing.apy;\n\n                    // Weighted Average Borrow APY Logic\n                    const existingBorrow = existing.totalBorrowUsd || ((existing.tvlUsd || 0) * 0.4);\n                    const poolBorrow = pool.totalBorrowUsd || ((pool.tvlUsd || 0) * 0.4);\n                    const totalBorrow = existingBorrow + poolBorrow;\n\n\n                    const existingBaseBorrow = existing.apyBaseBorrow || (existing.apyBase ? existing.apyBase * 1.5 : 0);\n                    const poolBaseBorrow = pool.apyBaseBorrow || (pool.apyBase ? pool.apyBase * 1.5 : 0);\n\n                    const existingRewardBorrow = existing.apyRewardBorrow || 0;\n                    const poolRewardBorrow = pool.apyRewardBorrow || 0;\n\n                    const weightedBaseBorrow = totalBorrow > 0\n                        ? (existingBaseBorrow * existingBorrow + poolBaseBorrow * poolBorrow) / totalBorrow\n                        : existingBaseBorrow;\n\n                    const weightedRewardBorrow = totalBorrow > 0\n                        ? (existingRewardBorrow * existingBorrow + poolRewardBorrow * poolBorrow) / totalBorrow\n                        : existingRewardBorrow;\n\n                    // Update existing entry\n                    existing.tvlUsd += pool.tvlUsd;\n                    existing.totalSupplyUsd = (existing.totalSupplyUsd || 0) + (pool.totalSupplyUsd || pool.tvlUsd);\n                    existing.totalBorrowUsd = totalBorrow;\n                    existing.apy = weightedApy;\n                    existing.apyBaseBorrow = weightedBaseBorrow;\n                    existing.apyRewardBorrow = weightedRewardBorrow;\n\n                    // Keep max LTV if different (safer to show what's possible, or min? Lets stick to first found for now or max)\n                    existing.ltv = Math.max(existing.ltv || 0, pool.ltv || 0);\n\n                } else {\n                    // Initialize new entry\n                    let fallbackLtv = 0.6;\n                    const symbolUpper = symbol.toUpperCase();\n                    if (['USDT', 'USDC', 'FDUSD', 'DAI', 'BUSD'].includes(symbolUpper)) {\n                        fallbackLtv = 0.8;\n                    } else if (['ETH', 'WETH', 'BTC', 'BTCB', 'WBTC', 'SOLVBTC'].includes(symbolUpper)) {\n                        fallbackLtv = 0.75;\n                    }\n\n                    aggregatedMap.set(key, {\n                        ...pool,\n                        symbol,\n                        project,\n                        sourceProject: pool.project,\n                        tvlUsd: pool.tvlUsd,\n                        apy: pool.apy,\n                        apyBaseBorrow: pool.apyBaseBorrow || (pool.apyBase ? pool.apyBase * 1.5 : 0),\n                        apyRewardBorrow: pool.apyRewardBorrow || 0,\n                        totalSupplyUsd: pool.totalSupplyUsd || pool.tvlUsd,\n                        totalBorrowUsd: pool.totalBorrowUsd || (pool.tvlUsd ? pool.tvlUsd * 0.4 : 0),\n                        ltv: pool.ltv || fallbackLtv\n                    });\n                }\n            });\n\n            return Array.from(aggregatedMap.values());\n        },\n    });\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\network.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\pool-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\protocols.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\simulation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\lib\\wagmi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\aryan\\Desktop\\OpButler-master\\src\\frontend\\scripts\\smoke-vault.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
